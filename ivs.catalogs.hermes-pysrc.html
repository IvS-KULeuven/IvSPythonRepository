<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ivs.catalogs.hermes</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="ivs-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ivs-module.html">Package&nbsp;ivs</a> ::
        <a href="ivs.catalogs-module.html">Package&nbsp;catalogs</a> ::
        Module&nbsp;hermes
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ivs.catalogs.hermes-pysrc.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<h1 class="epydoc">Source Code for <a href="ivs.catalogs.hermes-module.html">Module ivs.catalogs.hermes</a></h1>
<pre class="py-src">
<a name="L1"></a><tt class="py-lineno">   1</tt>  <tt class="py-line"><tt class="py-comment"># -*- coding: utf-8 -*-</tt> </tt>
<a name="L2"></a><tt class="py-lineno">   2</tt>  <tt class="py-line"><tt class="py-docstring">"""</tt> </tt>
<a name="L3"></a><tt class="py-lineno">   3</tt>  <tt class="py-line"><tt class="py-docstring">Interface the spectra from the Hermes spectrograph.</tt> </tt>
<a name="L4"></a><tt class="py-lineno">   4</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L5"></a><tt class="py-lineno">   5</tt>  <tt class="py-line"><tt class="py-docstring">The most important function is L{search}. This looks in SIMBAD for the coordinates</tt> </tt>
<a name="L6"></a><tt class="py-lineno">   6</tt>  <tt class="py-line"><tt class="py-docstring">of a given object, and finds all spectra matching those within a given radius.</tt> </tt>
<a name="L7"></a><tt class="py-lineno">   7</tt>  <tt class="py-line"><tt class="py-docstring">If the object's name is not recognised, it will look for correspondence between</tt> </tt>
<a name="L8"></a><tt class="py-lineno">   8</tt>  <tt class="py-line"><tt class="py-docstring">the given name and the contents of the FITS header's keyword C{object}. L{search}</tt> </tt>
<a name="L9"></a><tt class="py-lineno">   9</tt>  <tt class="py-line"><tt class="py-docstring">returns a record array, so that you can easily access all columns by their names.</tt> </tt>
<a name="L10"></a><tt class="py-lineno">  10</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L11"></a><tt class="py-lineno">  11</tt>  <tt class="py-line"><tt class="py-docstring">Note that Hermes spectra retrieved in B{logscale} should B{not be corrected} for</tt> </tt>
<a name="L12"></a><tt class="py-lineno">  12</tt>  <tt class="py-line"><tt class="py-docstring">the B{barycentric velocity} (the pipeline does it). The spectra retrieved in B{normal</tt> </tt>
<a name="L13"></a><tt class="py-lineno">  13</tt>  <tt class="py-line"><tt class="py-docstring">wavelength scale should} be corrected. These two cases are outlined below.</tt> </tt>
<a name="L14"></a><tt class="py-lineno">  14</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L15"></a><tt class="py-lineno">  15</tt>  <tt class="py-line"><tt class="py-docstring">Section 1. Data lookup and reading</tt> </tt>
<a name="L16"></a><tt class="py-lineno">  16</tt>  <tt class="py-line"><tt class="py-docstring">==================================</tt> </tt>
<a name="L17"></a><tt class="py-lineno">  17</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L18"></a><tt class="py-lineno">  18</tt>  <tt class="py-line"><tt class="py-docstring">B{Example usage:} retrieve all data on HD170580</tt> </tt>
<a name="L19"></a><tt class="py-lineno">  19</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L20"></a><tt class="py-lineno">  20</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; mydata = search('HD170580')</tt> </tt>
<a name="L21"></a><tt class="py-lineno">  21</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L22"></a><tt class="py-lineno">  22</tt>  <tt class="py-line"><tt class="py-docstring">Keep only those with a long enough exposure time:</tt> </tt>
<a name="L23"></a><tt class="py-lineno">  23</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L24"></a><tt class="py-lineno">  24</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; myselection = mydata[mydata['exptime']&gt;500]</tt> </tt>
<a name="L25"></a><tt class="py-lineno">  25</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L26"></a><tt class="py-lineno">  26</tt>  <tt class="py-line"><tt class="py-docstring">Now read in all the data, and plot the spectra. First, we need an extra module</tt> </tt>
<a name="L27"></a><tt class="py-lineno">  27</tt>  <tt class="py-line"><tt class="py-docstring">to read the FITS file and the plotting package.</tt> </tt>
<a name="L28"></a><tt class="py-lineno">  28</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L29"></a><tt class="py-lineno">  29</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; from ivs.io import fits</tt> </tt>
<a name="L30"></a><tt class="py-lineno">  30</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; import pylab as pl</tt> </tt>
<a name="L31"></a><tt class="py-lineno">  31</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L32"></a><tt class="py-lineno">  32</tt>  <tt class="py-line"><tt class="py-docstring">Then we can easily plot the relevant data:</tt> </tt>
<a name="L33"></a><tt class="py-lineno">  33</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L34"></a><tt class="py-lineno">  34</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; for fname in myselection['filename']:</tt> </tt>
<a name="L35"></a><tt class="py-lineno">  35</tt>  <tt class="py-line"><tt class="py-docstring">...     wave,flux = fits.read_spectrum(fname)</tt> </tt>
<a name="L36"></a><tt class="py-lineno">  36</tt>  <tt class="py-line"><tt class="py-docstring">...     p = pl.plot(wave,flux)</tt> </tt>
<a name="L37"></a><tt class="py-lineno">  37</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; p = pl.ylim(0,45000)</tt> </tt>
<a name="L38"></a><tt class="py-lineno">  38</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; p = pl.xlim(4511,4513.5)</tt> </tt>
<a name="L39"></a><tt class="py-lineno">  39</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L40"></a><tt class="py-lineno">  40</tt>  <tt class="py-line"><tt class="py-docstring">]include figure]]ivs_catalogs_hermes_HD170580.png]</tt> </tt>
<a name="L41"></a><tt class="py-lineno">  41</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L42"></a><tt class="py-lineno">  42</tt>  <tt class="py-line"><tt class="py-docstring">Note that you can easily shift them according to some radial velocity: as an</tt> </tt>
<a name="L43"></a><tt class="py-lineno">  43</tt>  <tt class="py-line"><tt class="py-docstring">extra example, we retrieve the data in wavelength scale, shift according to the</tt> </tt>
<a name="L44"></a><tt class="py-lineno">  44</tt>  <tt class="py-line"><tt class="py-docstring">barycentric velocity, convert to velocity space, and plot them:</tt> </tt>
<a name="L45"></a><tt class="py-lineno">  45</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L46"></a><tt class="py-lineno">  46</tt>  <tt class="py-line"><tt class="py-docstring">First start a new figure and add extra modules:</tt> </tt>
<a name="L47"></a><tt class="py-lineno">  47</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L48"></a><tt class="py-lineno">  48</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; p = pl.figure()</tt> </tt>
<a name="L49"></a><tt class="py-lineno">  49</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; from ivs.spectra import model         # to apply doppler shift</tt> </tt>
<a name="L50"></a><tt class="py-lineno">  50</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; from ivs.units import conversions     # to convert to velocity space</tt> </tt>
<a name="L51"></a><tt class="py-lineno">  51</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L52"></a><tt class="py-lineno">  52</tt>  <tt class="py-line"><tt class="py-docstring">Then get the spectra again, but now not in log scale. Make the same selection</tt> </tt>
<a name="L53"></a><tt class="py-lineno">  53</tt>  <tt class="py-line"><tt class="py-docstring">on exposure time.</tt> </tt>
<a name="L54"></a><tt class="py-lineno">  54</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L55"></a><tt class="py-lineno">  55</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; mydata = search('HD170580',data_type='cosmicsremoved_wavelength')</tt> </tt>
<a name="L56"></a><tt class="py-lineno">  56</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; myselection = mydata[mydata['exptime']&gt;500]</tt> </tt>
<a name="L57"></a><tt class="py-lineno">  57</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L58"></a><tt class="py-lineno">  58</tt>  <tt class="py-line"><tt class="py-docstring">Then read them all in and shift according to the barycentric velocity. Also,</tt> </tt>
<a name="L59"></a><tt class="py-lineno">  59</tt>  <tt class="py-line"><tt class="py-docstring">convert the spectra to velocity space afterwards for plotting purposes.</tt> </tt>
<a name="L60"></a><tt class="py-lineno">  60</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L61"></a><tt class="py-lineno">  61</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; for rv,fname in zip(myselection['bvcor'],myselection['filename']):</tt> </tt>
<a name="L62"></a><tt class="py-lineno">  62</tt>  <tt class="py-line"><tt class="py-docstring">...     wave,flux = fits.read_spectrum(fname)</tt> </tt>
<a name="L63"></a><tt class="py-lineno">  63</tt>  <tt class="py-line"><tt class="py-docstring">...     wave_shifted = model.doppler_shift(wave,rv)</tt> </tt>
<a name="L64"></a><tt class="py-lineno">  64</tt>  <tt class="py-line"><tt class="py-docstring">...     velo_shifted = conversions.convert('angstrom','km/s',wave_shifted,wave=(4512.3,'angstrom'))</tt> </tt>
<a name="L65"></a><tt class="py-lineno">  65</tt>  <tt class="py-line"><tt class="py-docstring">...     p = pl.plot(velo_shifted,flux)</tt> </tt>
<a name="L66"></a><tt class="py-lineno">  66</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; p = pl.ylim(0,45000)</tt> </tt>
<a name="L67"></a><tt class="py-lineno">  67</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; p = pl.xlim(-70,70)</tt> </tt>
<a name="L68"></a><tt class="py-lineno">  68</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L69"></a><tt class="py-lineno">  69</tt>  <tt class="py-line"><tt class="py-docstring">]include figure]]ivs_catalogs_hermes_HD170580_velo.png]</tt> </tt>
<a name="L70"></a><tt class="py-lineno">  70</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L71"></a><tt class="py-lineno">  71</tt>  <tt class="py-line"><tt class="py-docstring">Section 2. Extracting information</tt> </tt>
<a name="L72"></a><tt class="py-lineno">  72</tt>  <tt class="py-line"><tt class="py-docstring">=================================</tt> </tt>
<a name="L73"></a><tt class="py-lineno">  73</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L74"></a><tt class="py-lineno">  74</tt>  <tt class="py-line"><tt class="py-docstring">If you want to list the observers of a certain target, and the amount of spectra</tt> </tt>
<a name="L75"></a><tt class="py-lineno">  75</tt>  <tt class="py-line"><tt class="py-docstring">they took, you can do the following:</tt> </tt>
<a name="L76"></a><tt class="py-lineno">  76</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L77"></a><tt class="py-lineno">  77</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; data = search('HD50230')</tt> </tt>
<a name="L78"></a><tt class="py-lineno">  78</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; print [(i,list(data['observer']).count(i)) for i in set(data['observer'])]</tt> </tt>
<a name="L79"></a><tt class="py-lineno">  79</tt>  <tt class="py-line"><tt class="py-docstring">[('Robin Lombaert', 4), ('Steven Bloemen', 6), ('Pieter Degroote', 25), ('Michel Hillen', 3)]</tt> </tt>
<a name="L80"></a><tt class="py-lineno">  80</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L81"></a><tt class="py-lineno">  81</tt>  <tt class="py-line"><tt class="py-docstring">Section 3. Radial velocity computation with the HERMES DRS</tt> </tt>
<a name="L82"></a><tt class="py-lineno">  82</tt>  <tt class="py-line"><tt class="py-docstring">==========================================================</tt> </tt>
<a name="L83"></a><tt class="py-lineno">  83</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L84"></a><tt class="py-lineno">  84</tt>  <tt class="py-line"><tt class="py-docstring">Make sure you have sourced the Hermes DRS (C{source ~mercator/HermesDRS.rc}) and</tt> </tt>
<a name="L85"></a><tt class="py-lineno">  85</tt>  <tt class="py-line"><tt class="py-docstring">that you make a backup of your config file before proceeding.</tt> </tt>
<a name="L86"></a><tt class="py-lineno">  86</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L87"></a><tt class="py-lineno">  87</tt>  <tt class="py-line"><tt class="py-docstring">In this example, we first make a mask file:</tt> </tt>
<a name="L88"></a><tt class="py-lineno">  88</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L89"></a><tt class="py-lineno">  89</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; from ivs.spectra import linelists</tt> </tt>
<a name="L90"></a><tt class="py-lineno">  90</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; teff = 12500</tt> </tt>
<a name="L91"></a><tt class="py-lineno">  91</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; logg = 4.0</tt> </tt>
<a name="L92"></a><tt class="py-lineno">  92</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; ll = linelists.get_lines(teff,logg)</tt> </tt>
<a name="L93"></a><tt class="py-lineno">  93</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; mask_file = '%.0f_%.2f.fits'%(teff,logg)</tt> </tt>
<a name="L94"></a><tt class="py-lineno">  94</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; make_mask_file(ll['wavelength'],ll['depth'],filename=mask_file)</tt> </tt>
<a name="L95"></a><tt class="py-lineno">  95</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L96"></a><tt class="py-lineno">  96</tt>  <tt class="py-line"><tt class="py-docstring">And run the DRS:</tt> </tt>
<a name="L97"></a><tt class="py-lineno">  97</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L98"></a><tt class="py-lineno">  98</tt>  <tt class="py-line"><tt class="py-docstring">&gt;&gt;&gt; CCFList('HD170200',mask_file=mask_file)</tt> </tt>
<a name="L99"></a><tt class="py-lineno">  99</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L100"></a><tt class="py-lineno"> 100</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L101"></a><tt class="py-lineno"> 101</tt>  <tt class="py-line"><tt class="py-docstring">Section 4. Hermes overview file</tt> </tt>
<a name="L102"></a><tt class="py-lineno"> 102</tt>  <tt class="py-line"><tt class="py-docstring">===============================</tt> </tt>
<a name="L103"></a><tt class="py-lineno"> 103</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L104"></a><tt class="py-lineno"> 104</tt>  <tt class="py-line"><tt class="py-docstring">To ensure a fast lookup of datafiles, an overview file C{HermesFullDataOverview.tsv}</tt> </tt>
<a name="L105"></a><tt class="py-lineno"> 105</tt>  <tt class="py-line"><tt class="py-docstring">is created via L{make_data_overview}. The file resides in one of the C{IVSdata}</tt> </tt>
<a name="L106"></a><tt class="py-lineno"> 106</tt>  <tt class="py-line"><tt class="py-docstring">directories, and there should also exist a copy at C{/STER/mercator/hermes/}.</tt> </tt>
<a name="L107"></a><tt class="py-lineno"> 107</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L108"></a><tt class="py-lineno"> 108</tt>  <tt class="py-line"><tt class="py-docstring">The best strategy to keep the file up-to-date is by running this module in the</tt> </tt>
<a name="L109"></a><tt class="py-lineno"> 109</tt>  <tt class="py-line"><tt class="py-docstring">background in a terminal, via (probably on pleiad22)::</tt> </tt>
<a name="L110"></a><tt class="py-lineno"> 110</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L111"></a><tt class="py-lineno"> 111</tt>  <tt class="py-line"><tt class="py-docstring">    $:&gt; python hermes.py update</tt> </tt>
<a name="L112"></a><tt class="py-lineno"> 112</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L113"></a><tt class="py-lineno"> 113</tt>  <tt class="py-line"><tt class="py-docstring">This script will look for a C{HermesFullDataOverview.tsv} in one of the data</tt> </tt>
<a name="L114"></a><tt class="py-lineno"> 114</tt>  <tt class="py-line"><tt class="py-docstring">directories (see L{config} module), check until what date data files are stored,</tt> </tt>
<a name="L115"></a><tt class="py-lineno"> 115</tt>  <tt class="py-line"><tt class="py-docstring">and add entries for HERMES data files created since the last update. If you</tt> </tt>
<a name="L116"></a><tt class="py-lineno"> 116</tt>  <tt class="py-line"><tt class="py-docstring">want a complete update of all the HERMES data folders, you will need to remove</tt> </tt>
<a name="L117"></a><tt class="py-lineno"> 117</tt>  <tt class="py-line"><tt class="py-docstring">the file and run the update. Indeed, if C{HermesFullDataOverview.tsv} does not</tt> </tt>
<a name="L118"></a><tt class="py-lineno"> 118</tt>  <tt class="py-line"><tt class="py-docstring">exist, it will create a new file in the current working directory from scratch,</tt> </tt>
<a name="L119"></a><tt class="py-lineno"> 119</tt>  <tt class="py-line"><tt class="py-docstring">and copy it to C{/STER/mercator/hermes/}. It is the user's responsibility to</tt> </tt>
<a name="L120"></a><tt class="py-lineno"> 120</tt>  <tt class="py-line"><tt class="py-docstring">copy the file also to one of the IVSdata directories where the user has write</tt> </tt>
<a name="L121"></a><tt class="py-lineno"> 121</tt>  <tt class="py-line"><tt class="py-docstring">permission, so that next time the update is performed, the script can start from</tt> </tt>
<a name="L122"></a><tt class="py-lineno"> 122</tt>  <tt class="py-line"><tt class="py-docstring">the previous results.</tt> </tt>
<a name="L123"></a><tt class="py-lineno"> 123</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L124"></a><tt class="py-lineno"> 124</tt>  <tt class="py-line"><tt class="py-docstring">When running the above command in the terminal, you will notice that the script</tt> </tt>
<a name="L125"></a><tt class="py-lineno"> 125</tt>  <tt class="py-line"><tt class="py-docstring">does not terminate until a manual C{CTRL+C} is performed. Indeed, when left running</tt> </tt>
<a name="L126"></a><tt class="py-lineno"> 126</tt>  <tt class="py-line"><tt class="py-docstring">the script will perform the update once a day. So once it runs, as long as the</tt> </tt>
<a name="L127"></a><tt class="py-lineno"> 127</tt>  <tt class="py-line"><tt class="py-docstring">filepaths do not change or computers do not shut down, you don't need to run it</tt> </tt>
<a name="L128"></a><tt class="py-lineno"> 128</tt>  <tt class="py-line"><tt class="py-docstring">again. If a computer does stop running, just restart again with::</tt> </tt>
<a name="L129"></a><tt class="py-lineno"> 129</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L130"></a><tt class="py-lineno"> 130</tt>  <tt class="py-line"><tt class="py-docstring">    $:&gt; python hermes.py update</tt> </tt>
<a name="L131"></a><tt class="py-lineno"> 131</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L132"></a><tt class="py-lineno"> 132</tt>  <tt class="py-line"><tt class="py-docstring">and everything should be fine.</tt> </tt>
<a name="L133"></a><tt class="py-lineno"> 133</tt>  <tt class="py-line"><tt class="py-docstring"></tt> </tt>
<a name="L134"></a><tt class="py-lineno"> 134</tt>  <tt class="py-line"><tt class="py-docstring">@var hermesDir: Path to the directory in which the hermes folders (hermesAnalysis, </tt> </tt>
<a name="L135"></a><tt class="py-lineno"> 135</tt>  <tt class="py-line"><tt class="py-docstring">                hermesRun, hermesDebug) are located. By default this is set to </tt> </tt>
<a name="L136"></a><tt class="py-lineno"> 136</tt>  <tt class="py-line"><tt class="py-docstring">                '/home/user/'.</tt> </tt>
<a name="L137"></a><tt class="py-lineno"> 137</tt>  <tt class="py-line"><tt class="py-docstring">                </tt> </tt>
<a name="L138"></a><tt class="py-lineno"> 138</tt>  <tt class="py-line"><tt class="py-docstring">@var tempDir: Path to temporary directory where files nessessary for hermesVR to run</tt> </tt>
<a name="L139"></a><tt class="py-lineno"> 139</tt>  <tt class="py-line"><tt class="py-docstring">              can be copied to. You need write permission in this directory. The </tt> </tt>
<a name="L140"></a><tt class="py-lineno"> 140</tt>  <tt class="py-line"><tt class="py-docstring">              default is set to '/scratch/user/'</tt> </tt>
<a name="L141"></a><tt class="py-lineno"> 141</tt>  <tt class="py-line"><tt class="py-docstring">"""</tt> </tt>
<a name="L142"></a><tt class="py-lineno"> 142</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">re</tt> </tt>
<a name="L143"></a><tt class="py-lineno"> 143</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">os</tt> </tt>
<a name="L144"></a><tt class="py-lineno"> 144</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">sys</tt> </tt>
<a name="L145"></a><tt class="py-lineno"> 145</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt id="link-0" class="py-name" targets="Function ivs.config.glob()=ivs.config-module.html#glob"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-0', 'glob', 'link-0');">glob</a></tt> </tt>
<a name="L146"></a><tt class="py-lineno"> 146</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">time</tt> </tt>
<a name="L147"></a><tt class="py-lineno"> 147</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">shutil</tt> </tt>
<a name="L148"></a><tt class="py-lineno"> 148</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">logging</tt> </tt>
<a name="L149"></a><tt class="py-lineno"> 149</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">getpass</tt> </tt>
<a name="L150"></a><tt class="py-lineno"> 150</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">datetime</tt> </tt>
<a name="L151"></a><tt class="py-lineno"> 151</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">subprocess</tt> </tt>
<a name="L152"></a><tt class="py-lineno"> 152</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">numpy</tt> <tt class="py-keyword">as</tt> <tt class="py-name">np</tt> </tt>
<a name="L153"></a><tt class="py-lineno"> 153</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt class="py-name">pyfits</tt> </tt>
<a name="L154"></a><tt class="py-lineno"> 154</tt>  <tt class="py-line"> </tt>
<a name="L155"></a><tt class="py-lineno"> 155</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt id="link-1" class="py-name" targets="Method ivs.statistics.linearregression.LinearModel.copy()=ivs.statistics.linearregression.LinearModel-class.html#copy"><a title="ivs.statistics.linearregression.LinearModel.copy" class="py-name" href="#" onclick="return doclink('link-1', 'copy', 'link-1');">copy</a></tt> </tt>
<a name="L156"></a><tt class="py-lineno"> 156</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">lxml</tt> <tt class="py-keyword">import</tt> <tt class="py-name">etree</tt> </tt>
<a name="L157"></a><tt class="py-lineno"> 157</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">xml</tt><tt class="py-op">.</tt><tt class="py-name">etree</tt> <tt class="py-keyword">import</tt> <tt class="py-name">ElementTree</tt> <tt class="py-keyword">as</tt> <tt class="py-name">ET</tt> </tt>
<a name="L158"></a><tt class="py-lineno"> 158</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">collections</tt> <tt class="py-keyword">import</tt> <tt class="py-name">defaultdict</tt> </tt>
<a name="L159"></a><tt class="py-lineno"> 159</tt>  <tt class="py-line"> </tt>
<a name="L160"></a><tt class="py-lineno"> 160</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-2" class="py-name" targets="Package ivs=ivs-module.html"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-2', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-3" class="py-name" targets="Package ivs.catalogs=ivs.catalogs-module.html"><a title="ivs.catalogs" class="py-name" href="#" onclick="return doclink('link-3', 'catalogs', 'link-3');">catalogs</a></tt> <tt class="py-keyword">import</tt> <tt id="link-4" class="py-name" targets="Module ivs.catalogs.sesame=ivs.catalogs.sesame-module.html"><a title="ivs.catalogs.sesame" class="py-name" href="#" onclick="return doclink('link-4', 'sesame', 'link-4');">sesame</a></tt> </tt>
<a name="L161"></a><tt class="py-lineno"> 161</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-5" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-5', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-6" class="py-name" targets="Package ivs.io=ivs.io-module.html"><a title="ivs.io" class="py-name" href="#" onclick="return doclink('link-6', 'io', 'link-6');">io</a></tt> <tt class="py-keyword">import</tt> <tt id="link-7" class="py-name" targets="Module ivs.io.ascii=ivs.io.ascii-module.html"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-7', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">,</tt> <tt id="link-8" class="py-name" targets="Module ivs.io.fits=ivs.io.fits-module.html"><a title="ivs.io.fits" class="py-name" href="#" onclick="return doclink('link-8', 'fits', 'link-8');">fits</a></tt> </tt>
<a name="L162"></a><tt class="py-lineno"> 162</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-9" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-9', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-10" class="py-name" targets="Package ivs.aux=ivs.aux-module.html"><a title="ivs.aux" class="py-name" href="#" onclick="return doclink('link-10', 'aux', 'link-10');">aux</a></tt> <tt class="py-keyword">import</tt> <tt id="link-11" class="py-name" targets="Module ivs.aux.loggers=ivs.aux.loggers-module.html"><a title="ivs.aux.loggers" class="py-name" href="#" onclick="return doclink('link-11', 'loggers', 'link-11');">loggers</a></tt> </tt>
<a name="L163"></a><tt class="py-lineno"> 163</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-12" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-12', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-13" class="py-name" targets="Package ivs.observations=ivs.observations-module.html,Method ivs.statistics.linearregression.LinearFit.observations()=ivs.statistics.linearregression.LinearFit-class.html#observations"><a title="ivs.observations
ivs.statistics.linearregression.LinearFit.observations" class="py-name" href="#" onclick="return doclink('link-13', 'observations', 'link-13');">observations</a></tt> <tt class="py-keyword">import</tt> <tt id="link-14" class="py-name" targets="Module ivs.observations.airmass=ivs.observations.airmass-module.html,Function ivs.observations.airmass.airmass()=ivs.observations.airmass-module.html#airmass"><a title="ivs.observations.airmass
ivs.observations.airmass.airmass" class="py-name" href="#" onclick="return doclink('link-14', 'airmass', 'link-14');">airmass</a></tt> </tt>
<a name="L164"></a><tt class="py-lineno"> 164</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-15" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-15', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-16" class="py-name"><a title="ivs.observations
ivs.statistics.linearregression.LinearFit.observations" class="py-name" href="#" onclick="return doclink('link-16', 'observations', 'link-13');">observations</a></tt><tt class="py-op">.</tt><tt class="py-name">barycentric_correction</tt> <tt class="py-keyword">import</tt> <tt class="py-name">helcorr</tt> </tt>
<a name="L165"></a><tt class="py-lineno"> 165</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-17" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-17', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-18" class="py-name" targets="Package ivs.units=ivs.units-module.html"><a title="ivs.units" class="py-name" href="#" onclick="return doclink('link-18', 'units', 'link-18');">units</a></tt> <tt class="py-keyword">import</tt> <tt id="link-19" class="py-name" targets="Module ivs.units.conversions=ivs.units.conversions-module.html"><a title="ivs.units.conversions" class="py-name" href="#" onclick="return doclink('link-19', 'conversions', 'link-19');">conversions</a></tt> </tt>
<a name="L166"></a><tt class="py-lineno"> 166</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-20" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-20', 'ivs', 'link-2');">ivs</a></tt> <tt class="py-keyword">import</tt> <tt id="link-21" class="py-name" targets="Module ivs.config=ivs.config-module.html"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-21', 'config', 'link-21');">config</a></tt> </tt>
<a name="L167"></a><tt class="py-lineno"> 167</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-22" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-22', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-23" class="py-name" targets="Package ivs.spectra=ivs.spectra-module.html"><a title="ivs.spectra" class="py-name" href="#" onclick="return doclink('link-23', 'spectra', 'link-23');">spectra</a></tt> <tt class="py-keyword">import</tt> <tt id="link-24" class="py-name" targets="Module ivs.spectra.tools=ivs.spectra.tools-module.html"><a title="ivs.spectra.tools" class="py-name" href="#" onclick="return doclink('link-24', 'tools', 'link-24');">tools</a></tt> <tt class="py-keyword">as</tt> <tt class="py-name">sptools</tt> </tt>
<a name="L168"></a><tt class="py-lineno"> 168</tt>  <tt class="py-line"> </tt>
<a name="L169"></a><tt class="py-lineno"> 169</tt>  <tt class="py-line"> </tt>
<a name="L170"></a><tt class="py-lineno"> 170</tt>  <tt class="py-line"><tt id="link-25" class="py-name" targets="Variable ivs.catalogs.hermes.hermesDir=ivs.catalogs.hermes-module.html#hermesDir"><a title="ivs.catalogs.hermes.hermesDir" class="py-name" href="#" onclick="return doclink('link-25', 'hermesDir', 'link-25');">hermesDir</a></tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">expanduser</tt><tt class="py-op">(</tt><tt class="py-string">'~/'</tt><tt class="py-op">)</tt> </tt>
<a name="L171"></a><tt class="py-lineno"> 171</tt>  <tt class="py-line"><tt id="link-26" class="py-name" targets="Variable ivs.catalogs.hermes.tempDir=ivs.catalogs.hermes-module.html#tempDir"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-26', 'tempDir', 'link-26');">tempDir</a></tt> <tt class="py-op">=</tt> <tt class="py-string">'/scratch/%s/'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">getpass</tt><tt class="py-op">.</tt><tt class="py-name">getuser</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L172"></a><tt class="py-lineno"> 172</tt>  <tt class="py-line"> </tt>
<a name="L173"></a><tt class="py-lineno"> 173</tt>  <tt class="py-line"><tt id="link-27" class="py-name" targets="Variable ivs.asteroseismology.granulation.logger=ivs.asteroseismology.granulation-module.html#logger,Variable ivs.asteroseismology.redgiantfreqs.logger=ivs.asteroseismology.redgiantfreqs-module.html#logger,Variable ivs.asteroseismology.solarosc.logger=ivs.asteroseismology.solarosc-module.html#logger,Variable ivs.aux.decorators.logger=ivs.aux.decorators-module.html#logger,Variable ivs.catalogs.coralie.logger=ivs.catalogs.coralie-module.html#logger,Variable ivs.catalogs.corot.logger=ivs.catalogs.corot-module.html#logger,Variable ivs.catalogs.crossmatch.logger=ivs.catalogs.crossmatch-module.html#logger,Variable ivs.catalogs.gator.logger=ivs.catalogs.gator-module.html#logger,Variable ivs.catalogs.gcpd.logger=ivs.catalogs.gcpd-module.html#logger,Variable ivs.catalogs.hermes.logger=ivs.catalogs.hermes-module.html#logger,Variable ivs.catalogs.hipparcos.logger=ivs.catalogs.hipparcos-module.html#logger,Variable ivs.catalogs.kepler.logger=ivs.catalogs.kepler-module.html#logger,Variable ivs.catalogs.mast.logger=ivs.catalogs.mast-module.html#logger,Variable ivs.catalogs.p7.logger=ivs.catalogs.p7-module.html#logger,Variable ivs.catalogs.sesame.logger=ivs.catalogs.sesame-module.html#logger,Variable ivs.catalogs.vizier.logger=ivs.catalogs.vizier-module.html#logger,Variable ivs.io.ascii.logger=ivs.io.ascii-module.html#logger,Variable ivs.io.fits.logger=ivs.io.fits-module.html#logger,Variable ivs.io.hdf5.logger=ivs.io.hdf5-module.html#logger,Variable ivs.observations.distance.logger=ivs.observations.distance-module.html#logger,Variable ivs.observations.visibility.logger=ivs.observations.visibility-module.html#logger,Variable ivs.roche.binary.logger=ivs.roche.binary-module.html#logger,Variable ivs.sed.builder.logger=ivs.sed.builder-module.html#logger,Variable ivs.sed.creategrids.logger=ivs.sed.creategrids-module.html#logger,Variable ivs.sed.decorators.logger=ivs.sed.decorators-module.html#logger,Variable ivs.sed.distance.logger=ivs.sed.distance-module.html#logger,Variable ivs.sed.extinctionmodels.logger=ivs.sed.extinctionmodels-module.html#logger,Variable ivs.sed.filters.logger=ivs.sed.filters-module.html#logger,Variable ivs.sed.fit.logger=ivs.sed.fit-module.html#logger,Variable ivs.sed.limbdark.logger=ivs.sed.limbdark-module.html#logger,Variable ivs.sed.model.logger=ivs.sed.model-module.html#logger,Variable ivs.sed.reddening.logger=ivs.sed.reddening-module.html#logger,Variable ivs.sigproc.evaluate.logger=ivs.sigproc.evaluate-module.html#logger,Variable ivs.sigproc.filtering.logger=ivs.sigproc.filtering-module.html#logger,Variable ivs.sigproc.fit.logger=ivs.sigproc.fit-module.html#logger,Variable ivs.sigproc.funclib.logger=ivs.sigproc.funclib-module.html#logger,Variable ivs.spectra.linelists.logger=ivs.spectra.linelists-module.html#logger,Variable ivs.spectra.model.logger=ivs.spectra.model-module.html#logger,Variable ivs.spectra.tools.logger=ivs.spectra.tools-module.html#logger,Variable ivs.stellar_evolution.adipls.logger=ivs.stellar_evolution.adipls-module.html#logger,Variable ivs.stellar_evolution.fileio.logger=ivs.stellar_evolution.fileio-module.html#logger,Variable ivs.stellar_evolution.gyre.logger=ivs.stellar_evolution.gyre-module.html#logger,Variable ivs.stellar_evolution.puls.logger=ivs.stellar_evolution.puls-module.html#logger,Variable ivs.timeseries.decorators.logger=ivs.timeseries.decorators-module.html#logger,Variable ivs.timeseries.freqanalyse.logger=ivs.timeseries.freqanalyse-module.html#logger,Variable ivs.timeseries.keplerorbit.logger=ivs.timeseries.keplerorbit-module.html#logger,Variable ivs.timeseries.pergrams.logger=ivs.timeseries.pergrams-module.html#logger,Variable ivs.timeseries.windowfunctions.logger=ivs.timeseries.windowfunctions-module.html#logger,Variable ivs.units.conversions.logger=ivs.units.conversions-module.html#logger"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-27', 'logger', 'link-27');">logger</a></tt> <tt class="py-op">=</tt> <tt class="py-name">logging</tt><tt class="py-op">.</tt><tt class="py-name">getLogger</tt><tt class="py-op">(</tt><tt class="py-string">"CAT.HERMES"</tt><tt class="py-op">)</tt> </tt>
<a name="L174"></a><tt class="py-lineno"> 174</tt>  <tt class="py-line"><tt id="link-28" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-28', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">addHandler</tt><tt class="py-op">(</tt><tt id="link-29" class="py-name"><a title="ivs.aux.loggers" class="py-name" href="#" onclick="return doclink('link-29', 'loggers', 'link-11');">loggers</a></tt><tt class="py-op">.</tt><tt id="link-30" class="py-name" targets="Class ivs.asteroseismology.granulation.NullHandler=ivs.asteroseismology.granulation.NullHandler-class.html,Class ivs.asteroseismology.solarosc.NullHandler=ivs.asteroseismology.solarosc.NullHandler-class.html,Class ivs.aux.loggers.NullHandler=ivs.aux.loggers.NullHandler-class.html"><a title="ivs.asteroseismology.granulation.NullHandler
ivs.asteroseismology.solarosc.NullHandler
ivs.aux.loggers.NullHandler" class="py-name" href="#" onclick="return doclink('link-30', 'NullHandler', 'link-30');">NullHandler</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L175"></a><tt class="py-lineno"> 175</tt>  <tt class="py-line"> </tt>
<a name="L176"></a><tt class="py-lineno"> 176</tt>  <tt class="py-line"><tt class="py-comment">#{ User functions</tt> </tt>
<a name="L177"></a><tt class="py-lineno"> 177</tt>  <tt class="py-line"> </tt>
<a name="search"></a><div id="search-def"><a name="L178"></a><tt class="py-lineno"> 178</tt> <a class="py-toggle" href="#" id="search-toggle" onclick="return toggle('search');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#search">search</a><tt class="py-op">(</tt><tt class="py-param">ID</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">time_range</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">prog_ID</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">data_type</tt><tt class="py-op">=</tt><tt class="py-string">'cosmicsremoved_log'</tt><tt class="py-op">,</tt> </tt>
<a name="L179"></a><tt class="py-lineno"> 179</tt>  <tt class="py-line">           <tt class="py-param">radius</tt><tt class="py-op">=</tt><tt class="py-number">1.</tt><tt class="py-op">,</tt><tt class="py-param">filename</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="search-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="search-expanded"><a name="L180"></a><tt class="py-lineno"> 180</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L181"></a><tt class="py-lineno"> 181</tt>  <tt class="py-line"><tt class="py-docstring">    Retrieve datafiles from the Hermes catalogue.</tt> </tt>
<a name="L182"></a><tt class="py-lineno"> 182</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L183"></a><tt class="py-lineno"> 183</tt>  <tt class="py-line"><tt class="py-docstring">    B{If C{ID} is given}: A string search is performed to match the 'object'</tt> </tt>
<a name="L184"></a><tt class="py-lineno"> 184</tt>  <tt class="py-line"><tt class="py-docstring">    field in the FITS headers. The coordinates are pulled from SIMBAD. If the</tt> </tt>
<a name="L185"></a><tt class="py-lineno"> 185</tt>  <tt class="py-line"><tt class="py-docstring">    star ID is recognised by SIMBAD, an additional search is done based only on</tt> </tt>
<a name="L186"></a><tt class="py-lineno"> 186</tt>  <tt class="py-line"><tt class="py-docstring">    the coordinates. The union of both searches is the final result.</tt> </tt>
<a name="L187"></a><tt class="py-lineno"> 187</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L188"></a><tt class="py-lineno"> 188</tt>  <tt class="py-line"><tt class="py-docstring">    B{If C{time_range} is given}: The search is confined within the defined</tt> </tt>
<a name="L189"></a><tt class="py-lineno"> 189</tt>  <tt class="py-line"><tt class="py-docstring">    range. If you only give one day, the search is confined to the observations</tt> </tt>
<a name="L190"></a><tt class="py-lineno"> 190</tt>  <tt class="py-line"><tt class="py-docstring">    made during the night starting at that day. If C{ID} is not given, all</tt> </tt>
<a name="L191"></a><tt class="py-lineno"> 191</tt>  <tt class="py-line"><tt class="py-docstring">    observations will be returned of the given datatype.</tt> </tt>
<a name="L192"></a><tt class="py-lineno"> 192</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L193"></a><tt class="py-lineno"> 193</tt>  <tt class="py-line"><tt class="py-docstring">    B{If C{prog_ID} is given}: The search is performed to match the number of</tt> </tt>
<a name="L194"></a><tt class="py-lineno"> 194</tt>  <tt class="py-line"><tt class="py-docstring">    the program. Individual stars are not queried in SIMBAD, so any information</tt> </tt>
<a name="L195"></a><tt class="py-lineno"> 195</tt>  <tt class="py-line"><tt class="py-docstring">    that is missing in the header will not be corrected.</tt> </tt>
<a name="L196"></a><tt class="py-lineno"> 196</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L197"></a><tt class="py-lineno"> 197</tt>  <tt class="py-line"><tt class="py-docstring">    If you don't give either ID or time_range, the info on all data will be</tt> </tt>
<a name="L198"></a><tt class="py-lineno"> 198</tt>  <tt class="py-line"><tt class="py-docstring">    returned. This is a huge amount of data, so it can take a while before it</tt> </tt>
<a name="L199"></a><tt class="py-lineno"> 199</tt>  <tt class="py-line"><tt class="py-docstring">    is returned. Remember that the header of each spectrum is read in and checked.</tt> </tt>
<a name="L200"></a><tt class="py-lineno"> 200</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L201"></a><tt class="py-lineno"> 201</tt>  <tt class="py-line"><tt class="py-docstring">    Data type can be any of:</tt> </tt>
<a name="L202"></a><tt class="py-lineno"> 202</tt>  <tt class="py-line"><tt class="py-docstring">        1. cosmicsremoved_log: return log merged without cosmics</tt> </tt>
<a name="L203"></a><tt class="py-lineno"> 203</tt>  <tt class="py-line"><tt class="py-docstring">        2. cosmicsremoved_wavelength: return wavelength merged without cosmics</tt> </tt>
<a name="L204"></a><tt class="py-lineno"> 204</tt>  <tt class="py-line"><tt class="py-docstring">        3. ext_log: return log merged with cosmics</tt> </tt>
<a name="L205"></a><tt class="py-lineno"> 205</tt>  <tt class="py-line"><tt class="py-docstring">        4. ext_wavelength: return wavelength merged with cosmics</tt> </tt>
<a name="L206"></a><tt class="py-lineno"> 206</tt>  <tt class="py-line"><tt class="py-docstring">        5. raw: raw files (also TECH..., i.e. any file in the raw directory)</tt> </tt>
<a name="L207"></a><tt class="py-lineno"> 207</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L208"></a><tt class="py-lineno"> 208</tt>  <tt class="py-line"><tt class="py-docstring">    This functions needs a C{HermesFullDataOverview.tsv} file located in one</tt> </tt>
<a name="L209"></a><tt class="py-lineno"> 209</tt>  <tt class="py-line"><tt class="py-docstring">    of the datadirectories from C{config.py}, and subdirectory C{catalogs/hermes}.</tt> </tt>
<a name="L210"></a><tt class="py-lineno"> 210</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L211"></a><tt class="py-lineno"> 211</tt>  <tt class="py-line"><tt class="py-docstring">    If this file does not exist, you can create it with L{make_data_overview}.</tt> </tt>
<a name="L212"></a><tt class="py-lineno"> 212</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L213"></a><tt class="py-lineno"> 213</tt>  <tt class="py-line"><tt class="py-docstring">    If you want a summary file with the data you search for, you can give</tt> </tt>
<a name="L214"></a><tt class="py-lineno"> 214</tt>  <tt class="py-line"><tt class="py-docstring">    C{filename} as an extra keyword argument. The results will be saved to that</tt> </tt>
<a name="L215"></a><tt class="py-lineno"> 215</tt>  <tt class="py-line"><tt class="py-docstring">    file.</tt> </tt>
<a name="L216"></a><tt class="py-lineno"> 216</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L217"></a><tt class="py-lineno"> 217</tt>  <tt class="py-line"><tt class="py-docstring">    The columns in the returned record array are listed in L{make_data_overview},</tt> </tt>
<a name="L218"></a><tt class="py-lineno"> 218</tt>  <tt class="py-line"><tt class="py-docstring">    but are repeated here (capital letters are directly retrieved from the</tt> </tt>
<a name="L219"></a><tt class="py-lineno"> 219</tt>  <tt class="py-line"><tt class="py-docstring">    fits header, small letters are calculated values. The real header strings</tt> </tt>
<a name="L220"></a><tt class="py-lineno"> 220</tt>  <tt class="py-line"><tt class="py-docstring">    are all small capitals):</tt> </tt>
<a name="L221"></a><tt class="py-lineno"> 221</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L222"></a><tt class="py-lineno"> 222</tt>  <tt class="py-line"><tt class="py-docstring">        1.  UNSEQ</tt> </tt>
<a name="L223"></a><tt class="py-lineno"> 223</tt>  <tt class="py-line"><tt class="py-docstring">        2.  PROG_ID</tt> </tt>
<a name="L224"></a><tt class="py-lineno"> 224</tt>  <tt class="py-line"><tt class="py-docstring">        3.  OBSMODE</tt> </tt>
<a name="L225"></a><tt class="py-lineno"> 225</tt>  <tt class="py-line"><tt class="py-docstring">        4.  BVCOR</tt> </tt>
<a name="L226"></a><tt class="py-lineno"> 226</tt>  <tt class="py-line"><tt class="py-docstring">        5.  OBSERVER</tt> </tt>
<a name="L227"></a><tt class="py-lineno"> 227</tt>  <tt class="py-line"><tt class="py-docstring">        6.  OBJECT</tt> </tt>
<a name="L228"></a><tt class="py-lineno"> 228</tt>  <tt class="py-line"><tt class="py-docstring">        7.  RA</tt> </tt>
<a name="L229"></a><tt class="py-lineno"> 229</tt>  <tt class="py-line"><tt class="py-docstring">        8.  DEC</tt> </tt>
<a name="L230"></a><tt class="py-lineno"> 230</tt>  <tt class="py-line"><tt class="py-docstring">        9.  BJD</tt> </tt>
<a name="L231"></a><tt class="py-lineno"> 231</tt>  <tt class="py-line"><tt class="py-docstring">        10. EXPTIME</tt> </tt>
<a name="L232"></a><tt class="py-lineno"> 232</tt>  <tt class="py-line"><tt class="py-docstring">        11. PMTOTAL</tt> </tt>
<a name="L233"></a><tt class="py-lineno"> 233</tt>  <tt class="py-line"><tt class="py-docstring">        12. DATE-AVG</tt> </tt>
<a name="L234"></a><tt class="py-lineno"> 234</tt>  <tt class="py-line"><tt class="py-docstring">        13. OBJECT</tt> </tt>
<a name="L235"></a><tt class="py-lineno"> 235</tt>  <tt class="py-line"><tt class="py-docstring">        14. airmass</tt> </tt>
<a name="L236"></a><tt class="py-lineno"> 236</tt>  <tt class="py-line"><tt class="py-docstring">        15. filename</tt> </tt>
<a name="L237"></a><tt class="py-lineno"> 237</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L238"></a><tt class="py-lineno"> 238</tt>  <tt class="py-line"><tt class="py-docstring">    The column C{filename} contains a string with the absolute location of the</tt> </tt>
<a name="L239"></a><tt class="py-lineno"> 239</tt>  <tt class="py-line"><tt class="py-docstring">    file. If you need any extra information from the header, you can easily</tt> </tt>
<a name="L240"></a><tt class="py-lineno"> 240</tt>  <tt class="py-line"><tt class="py-docstring">    retrieve it.</tt> </tt>
<a name="L241"></a><tt class="py-lineno"> 241</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L242"></a><tt class="py-lineno"> 242</tt>  <tt class="py-line"><tt class="py-docstring">    If BVCOR or BJD are not available from the FITS header, this function will</tt> </tt>
<a name="L243"></a><tt class="py-lineno"> 243</tt>  <tt class="py-line"><tt class="py-docstring">    attempt to calculate it. It will not succeed if the object's name is not</tt> </tt>
<a name="L244"></a><tt class="py-lineno"> 244</tt>  <tt class="py-line"><tt class="py-docstring">    recognised by SIMBAD.</tt> </tt>
<a name="L245"></a><tt class="py-lineno"> 245</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L246"></a><tt class="py-lineno"> 246</tt>  <tt class="py-line"><tt class="py-docstring">    Example usage: retrieve all data on HD50230</tt> </tt>
<a name="L247"></a><tt class="py-lineno"> 247</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L248"></a><tt class="py-lineno"> 248</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; mydata = search('HD50230')</tt> </tt>
<a name="L249"></a><tt class="py-lineno"> 249</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L250"></a><tt class="py-lineno"> 250</tt>  <tt class="py-line"><tt class="py-docstring">    Keep only those with a long enough exposure time:</tt> </tt>
<a name="L251"></a><tt class="py-lineno"> 251</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L252"></a><tt class="py-lineno"> 252</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; myselection = mydata[mydata['exptime']&gt;500]</tt> </tt>
<a name="L253"></a><tt class="py-lineno"> 253</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L254"></a><tt class="py-lineno"> 254</tt>  <tt class="py-line"><tt class="py-docstring">    Look up the 'telalt' value in the FITS headers of all these files via a fast</tt> </tt>
<a name="L255"></a><tt class="py-lineno"> 255</tt>  <tt class="py-line"><tt class="py-docstring">    list comprehension:</tt> </tt>
<a name="L256"></a><tt class="py-lineno"> 256</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L257"></a><tt class="py-lineno"> 257</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; telalts = [pyfits.getheader(fname)['telalt'] for fname in myselection['filename']]</tt> </tt>
<a name="L258"></a><tt class="py-lineno"> 258</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L259"></a><tt class="py-lineno"> 259</tt>  <tt class="py-line"><tt class="py-docstring">    Search for all data of HD50230 taken in the night of 22 September 2009:</tt> </tt>
<a name="L260"></a><tt class="py-lineno"> 260</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L261"></a><tt class="py-lineno"> 261</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; data = hermes.search('HD50230',time_range='2009-9-22')</tt> </tt>
<a name="L262"></a><tt class="py-lineno"> 262</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L263"></a><tt class="py-lineno"> 263</tt>  <tt class="py-line"><tt class="py-docstring">    Or within an interval of a few days:</tt> </tt>
<a name="L264"></a><tt class="py-lineno"> 264</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L265"></a><tt class="py-lineno"> 265</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; data = hermes.search('HD50230',time_range=('2009-9-23','2009-9-30'))</tt> </tt>
<a name="L266"></a><tt class="py-lineno"> 266</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L267"></a><tt class="py-lineno"> 267</tt>  <tt class="py-line"><tt class="py-docstring">    Search for all data observed in a given night:</tt> </tt>
<a name="L268"></a><tt class="py-lineno"> 268</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L269"></a><tt class="py-lineno"> 269</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; data = hermes.search(time_range='2009-9-22')</tt> </tt>
<a name="L270"></a><tt class="py-lineno"> 270</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L271"></a><tt class="py-lineno"> 271</tt>  <tt class="py-line"><tt class="py-docstring">    B{Warning:} the heliocentric correction is not calculated when no ID is given,</tt> </tt>
<a name="L272"></a><tt class="py-lineno"> 272</tt>  <tt class="py-line"><tt class="py-docstring">    so make sure it is present in the header if you need it, or calculate it yourself.</tt> </tt>
<a name="L273"></a><tt class="py-lineno"> 273</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L274"></a><tt class="py-lineno"> 274</tt>  <tt class="py-line"><tt class="py-docstring">    @param ID: ID of the star, understandable by SIMBAD</tt> </tt>
<a name="L275"></a><tt class="py-lineno"> 275</tt>  <tt class="py-line"><tt class="py-docstring">    @type ID: str</tt> </tt>
<a name="L276"></a><tt class="py-lineno"> 276</tt>  <tt class="py-line"><tt class="py-docstring">    @param time_range: range of dates to confine the search to</tt> </tt>
<a name="L277"></a><tt class="py-lineno"> 277</tt>  <tt class="py-line"><tt class="py-docstring">    @type time_range: tuple strings of type '2009-09-23T04:24:35.712556' or '2009-09-23'</tt> </tt>
<a name="L278"></a><tt class="py-lineno"> 278</tt>  <tt class="py-line"><tt class="py-docstring">    @param data_type: if None, all data will be returned. Otherwise, subset</tt> </tt>
<a name="L279"></a><tt class="py-lineno"> 279</tt>  <tt class="py-line"><tt class="py-docstring">    'cosmicsremoved', 'merged' or 'raw'</tt> </tt>
<a name="L280"></a><tt class="py-lineno"> 280</tt>  <tt class="py-line"><tt class="py-docstring">    @type data_type: str</tt> </tt>
<a name="L281"></a><tt class="py-lineno"> 281</tt>  <tt class="py-line"><tt class="py-docstring">    @param radius: search radius around the coordinates (arcminutes)</tt> </tt>
<a name="L282"></a><tt class="py-lineno"> 282</tt>  <tt class="py-line"><tt class="py-docstring">    @type radius: float</tt> </tt>
<a name="L283"></a><tt class="py-lineno"> 283</tt>  <tt class="py-line"><tt class="py-docstring">    @param filename: write summary to outputfile if not None</tt> </tt>
<a name="L284"></a><tt class="py-lineno"> 284</tt>  <tt class="py-line"><tt class="py-docstring">    @type filename: str</tt> </tt>
<a name="L285"></a><tt class="py-lineno"> 285</tt>  <tt class="py-line"><tt class="py-docstring">    @return: record array with summary information on the observations, as well</tt> </tt>
<a name="L286"></a><tt class="py-lineno"> 286</tt>  <tt class="py-line"><tt class="py-docstring">    as their location (column 'filename')</tt> </tt>
<a name="L287"></a><tt class="py-lineno"> 287</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: numpy rec array</tt> </tt>
<a name="L288"></a><tt class="py-lineno"> 288</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L289"></a><tt class="py-lineno"> 289</tt>  <tt class="py-line">    <tt class="py-comment">#-- read in the data from the overview file, and get SIMBAD information</tt> </tt>
<a name="L290"></a><tt class="py-lineno"> 290</tt>  <tt class="py-line">    <tt class="py-comment">#   of the star</tt> </tt>
<a name="L291"></a><tt class="py-lineno"> 291</tt>  <tt class="py-line">    <tt class="py-name">ctlFile</tt> <tt class="py-op">=</tt> <tt class="py-string">'/STER/mercator/hermes/HermesFullDataOverview.tsv'</tt> </tt>
<a name="L292"></a><tt class="py-lineno"> 292</tt>  <tt class="py-line">    <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt id="link-31" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-31', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-32" class="py-name" targets="Function ivs.io.ascii.read2recarray()=ivs.io.ascii-module.html#read2recarray,Function ivs.io.fits.read2recarray()=ivs.io.fits-module.html#read2recarray"><a title="ivs.io.ascii.read2recarray
ivs.io.fits.read2recarray" class="py-name" href="#" onclick="return doclink('link-32', 'read2recarray', 'link-32');">read2recarray</a></tt><tt class="py-op">(</tt><tt class="py-name">ctlFile</tt><tt class="py-op">,</tt> <tt class="py-name">splitchar</tt><tt class="py-op">=</tt><tt class="py-string">'\t'</tt><tt class="py-op">)</tt> </tt>
<a name="L293"></a><tt class="py-lineno"> 293</tt>  <tt class="py-line">    <tt class="py-comment">#data = ascii.read2recarray(config.get_datafile(os.path.join('catalogs','hermes'),'HermesFullDataOverview.tsv'),splitchar='\t')</tt> </tt>
<a name="L294"></a><tt class="py-lineno"> 294</tt>  <tt class="py-line">    <tt class="py-name">keep</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">ones</tt><tt class="py-op">(</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-name">bool</tt><tt class="py-op">)</tt> </tt>
<a name="L295"></a><tt class="py-lineno"> 295</tt>  <tt class="py-line">    <tt class="py-comment">#-- confined search within given time range</tt> </tt>
<a name="L296"></a><tt class="py-lineno"> 296</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">time_range</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L297"></a><tt class="py-lineno"> 297</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">isinstance</tt><tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">,</tt><tt class="py-name">str</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L298"></a><tt class="py-lineno"> 298</tt>  <tt class="py-line">            <tt class="py-name">time_range</tt> <tt class="py-op">=</tt> <tt id="link-33" class="py-name" targets="Function ivs.catalogs.hermes._timestamp2datetime()=ivs.catalogs.hermes-module.html#_timestamp2datetime"><a title="ivs.catalogs.hermes._timestamp2datetime" class="py-name" href="#" onclick="return doclink('link-33', '_timestamp2datetime', 'link-33');">_timestamp2datetime</a></tt><tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">)</tt> </tt>
<a name="L299"></a><tt class="py-lineno"> 299</tt>  <tt class="py-line">            <tt class="py-name">time_range</tt> <tt class="py-op">=</tt> <tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">,</tt><tt class="py-name">time_range</tt><tt class="py-op">+</tt><tt class="py-name">datetime</tt><tt class="py-op">.</tt><tt class="py-name">timedelta</tt><tt class="py-op">(</tt><tt class="py-name">days</tt><tt class="py-op">=</tt><tt class="py-number">1</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L300"></a><tt class="py-lineno"> 300</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L301"></a><tt class="py-lineno"> 301</tt>  <tt class="py-line">            <tt class="py-name">time_range</tt> <tt class="py-op">=</tt> <tt class="py-op">(</tt><tt id="link-34" class="py-name"><a title="ivs.catalogs.hermes._timestamp2datetime" class="py-name" href="#" onclick="return doclink('link-34', '_timestamp2datetime', 'link-33');">_timestamp2datetime</a></tt><tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt id="link-35" class="py-name"><a title="ivs.catalogs.hermes._timestamp2datetime" class="py-name" href="#" onclick="return doclink('link-35', '_timestamp2datetime', 'link-33');">_timestamp2datetime</a></tt><tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">[</tt><tt class="py-number">1</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L302"></a><tt class="py-lineno"> 302</tt>  <tt class="py-line">        <tt class="py-name">keep</tt> <tt class="py-op">=</tt> <tt class="py-name">keep</tt> <tt class="py-op">&amp;</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-name">time_range</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">&lt;=</tt><tt id="link-36" class="py-name"><a title="ivs.catalogs.hermes._timestamp2datetime" class="py-name" href="#" onclick="return doclink('link-36', '_timestamp2datetime', 'link-33');">_timestamp2datetime</a></tt><tt class="py-op">(</tt><tt class="py-name">i</tt><tt class="py-op">)</tt><tt class="py-op">&lt;=</tt><tt class="py-name">time_range</tt><tt class="py-op">[</tt><tt class="py-number">1</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">i</tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'date-avg'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">bool</tt><tt class="py-op">)</tt> </tt>
<a name="L303"></a><tt class="py-lineno"> 303</tt>  <tt class="py-line">        <tt class="py-name">info</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L304"></a><tt class="py-lineno"> 304</tt>  <tt class="py-line">         </tt>
<a name="L305"></a><tt class="py-lineno"> 305</tt>  <tt class="py-line">     </tt>
<a name="L306"></a><tt class="py-lineno"> 306</tt>  <tt class="py-line">    <tt class="py-comment">#-- search on ID</tt> </tt>
<a name="L307"></a><tt class="py-lineno"> 307</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">ID</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L308"></a><tt class="py-lineno"> 308</tt>  <tt class="py-line">        <tt class="py-name">info</tt> <tt class="py-op">=</tt> <tt id="link-37" class="py-name"><a title="ivs.catalogs.sesame" class="py-name" href="#" onclick="return doclink('link-37', 'sesame', 'link-4');">sesame</a></tt><tt class="py-op">.</tt><tt id="link-38" class="py-name" targets="Function ivs.catalogs.coralie.search()=ivs.catalogs.coralie-module.html#search,Function ivs.catalogs.gator.search()=ivs.catalogs.gator-module.html#search,Function ivs.catalogs.gcpd.search()=ivs.catalogs.gcpd-module.html#search,Function ivs.catalogs.hermes.search()=ivs.catalogs.hermes-module.html#search,Function ivs.catalogs.mast.search()=ivs.catalogs.mast-module.html#search,Function ivs.catalogs.sesame.search()=ivs.catalogs.sesame-module.html#search,Function ivs.catalogs.vizier.search()=ivs.catalogs.vizier-module.html#search"><a title="ivs.catalogs.coralie.search
ivs.catalogs.gator.search
ivs.catalogs.gcpd.search
ivs.catalogs.hermes.search
ivs.catalogs.mast.search
ivs.catalogs.sesame.search
ivs.catalogs.vizier.search" class="py-name" href="#" onclick="return doclink('link-38', 'search', 'link-38');">search</a></tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt> </tt>
<a name="L309"></a><tt class="py-lineno"> 309</tt>  <tt class="py-line">     </tt>
<a name="L310"></a><tt class="py-lineno"> 310</tt>  <tt class="py-line">        <tt class="py-comment">#-- first search on object name only</tt> </tt>
<a name="L311"></a><tt class="py-lineno"> 311</tt>  <tt class="py-line">        <tt class="py-name">ID</tt> <tt class="py-op">=</tt> <tt class="py-name">ID</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">' '</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'.'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'+'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'-'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'*'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt> </tt>
<a name="L312"></a><tt class="py-lineno"> 312</tt>  <tt class="py-line">        <tt class="py-name">match_names</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">objectn</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">' '</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'.'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'+'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'-'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'*'</tt><tt class="py-op">,</tt><tt class="py-string">''</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">objectn</tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'object'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">str</tt><tt class="py-op">)</tt> </tt>
<a name="L313"></a><tt class="py-lineno"> 313</tt>  <tt class="py-line">        <tt class="py-name">keep_id</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-name">ID</tt> <tt class="py-keyword">in</tt> <tt class="py-name">objectn</tt><tt class="py-op">)</tt> <tt class="py-keyword">or</tt> <tt class="py-op">(</tt><tt class="py-name">objectn</tt> <tt class="py-keyword">in</tt> <tt class="py-name">ID</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> <tt class="py-keyword">and</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">objectn</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> <tt class="py-keyword">and</tt> <tt class="py-name">True</tt> <tt class="py-keyword">or</tt> <tt class="py-name">False</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">objectn</tt> <tt class="py-keyword">in</tt> <tt class="py-name">match_names</tt><tt class="py-op">]</tt> </tt>
<a name="L314"></a><tt class="py-lineno"> 314</tt>  <tt class="py-line">        <tt class="py-name">keep_id</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">keep_id</tt><tt class="py-op">)</tt> </tt>
<a name="L315"></a><tt class="py-lineno"> 315</tt>  <tt class="py-line">        <tt class="py-comment">#   if we found the star on SIMBAD, we use its RA and DEC to match the star</tt> </tt>
<a name="L316"></a><tt class="py-lineno"> 316</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">info</tt><tt class="py-op">:</tt> </tt>
<a name="L317"></a><tt class="py-lineno"> 317</tt>  <tt class="py-line">            <tt class="py-name">ra</tt><tt class="py-op">,</tt><tt class="py-name">dec</tt> <tt class="py-op">=</tt> <tt class="py-name">info</tt><tt class="py-op">[</tt><tt class="py-string">'jradeg'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">info</tt><tt class="py-op">[</tt><tt class="py-string">'jdedeg'</tt><tt class="py-op">]</tt> </tt>
<a name="L318"></a><tt class="py-lineno"> 318</tt>  <tt class="py-line">            <tt class="py-name">keep_id</tt> <tt class="py-op">=</tt> <tt class="py-name">keep_id</tt> <tt class="py-op">|</tt> <tt class="py-op">(</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt id="link-39" class="py-name" targets="Method ivs.units.conversions.Unit.sqrt()=ivs.units.conversions.Unit-class.html#sqrt"><a title="ivs.units.conversions.Unit.sqrt" class="py-name" href="#" onclick="return doclink('link-39', 'sqrt', 'link-39');">sqrt</a></tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'ra'</tt><tt class="py-op">]</tt><tt class="py-op">-</tt><tt class="py-name">ra</tt><tt class="py-op">)</tt><tt class="py-op">**</tt><tt class="py-number">2</tt> <tt class="py-op">+</tt> <tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'dec'</tt><tt class="py-op">]</tt><tt class="py-op">-</tt><tt class="py-name">dec</tt><tt class="py-op">)</tt><tt class="py-op">**</tt><tt class="py-number">2</tt><tt class="py-op">)</tt> <tt class="py-op">&lt;</tt> <tt class="py-name">radius</tt><tt class="py-op">/</tt><tt class="py-number">60.</tt><tt class="py-op">)</tt> </tt>
<a name="L319"></a><tt class="py-lineno"> 319</tt>  <tt class="py-line">        <tt class="py-name">keep</tt> <tt class="py-op">=</tt> <tt class="py-name">keep</tt> <tt class="py-op">&amp;</tt> <tt class="py-name">keep_id</tt> </tt>
<a name="L320"></a><tt class="py-lineno"> 320</tt>  <tt class="py-line">     </tt>
<a name="L321"></a><tt class="py-lineno"> 321</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">prog_ID</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L322"></a><tt class="py-lineno"> 322</tt>  <tt class="py-line">        <tt class="py-name">keep</tt> <tt class="py-op">=</tt> <tt class="py-name">keep</tt> <tt class="py-op">&amp;</tt> <tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'prog_id'</tt><tt class="py-op">]</tt><tt class="py-op">==</tt><tt class="py-name">prog_ID</tt><tt class="py-op">)</tt> </tt>
<a name="L323"></a><tt class="py-lineno"> 323</tt>  <tt class="py-line">     </tt>
<a name="L324"></a><tt class="py-lineno"> 324</tt>  <tt class="py-line">    <tt class="py-comment">#-- if some data is found, we check if the C{data_type} string is contained</tt> </tt>
<a name="L325"></a><tt class="py-lineno"> 325</tt>  <tt class="py-line">    <tt class="py-comment">#   with the file's name. If not, we remove it.</tt> </tt>
<a name="L326"></a><tt class="py-lineno"> 326</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">any</tt><tt class="py-op">(</tt><tt class="py-name">keep</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L327"></a><tt class="py-lineno"> 327</tt>  <tt class="py-line">        <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-name">keep</tt><tt class="py-op">]</tt> </tt>
<a name="L328"></a><tt class="py-lineno"> 328</tt>  <tt class="py-line">     </tt>
<a name="L329"></a><tt class="py-lineno"> 329</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">data_type</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L330"></a><tt class="py-lineno"> 330</tt>  <tt class="py-line">            <tt class="py-name">data_type</tt> <tt class="py-op">==</tt> <tt class="py-name">data_type</tt><tt class="py-op">.</tt><tt class="py-name">lower</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L331"></a><tt class="py-lineno"> 331</tt>  <tt class="py-line">            <tt class="py-comment">#-- now derive the location of the 'data_type' types from the raw</tt> </tt>
<a name="L332"></a><tt class="py-lineno"> 332</tt>  <tt class="py-line">            <tt class="py-comment">#   files</tt> </tt>
<a name="L333"></a><tt class="py-lineno"> 333</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">data_type</tt><tt class="py-op">==</tt><tt class="py-string">'raw'</tt><tt class="py-op">:</tt> </tt>
<a name="L334"></a><tt class="py-lineno"> 334</tt>  <tt class="py-line">                <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'filename'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt id="link-40" class="py-name" targets="Function ivs.catalogs.hermes._derive_filelocation_from_raw()=ivs.catalogs.hermes-module.html#_derive_filelocation_from_raw"><a title="ivs.catalogs.hermes._derive_filelocation_from_raw" class="py-name" href="#" onclick="return doclink('link-40', '_derive_filelocation_from_raw', 'link-40');">_derive_filelocation_from_raw</a></tt><tt class="py-op">(</tt><tt id="link-41" class="py-name" targets="Variable ivs.makedoc.ff=ivs.makedoc-module.html#ff"><a title="ivs.makedoc.ff" class="py-name" href="#" onclick="return doclink('link-41', 'ff', 'link-41');">ff</a></tt><tt class="py-op">,</tt><tt class="py-name">data_type</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt id="link-42" class="py-name"><a title="ivs.makedoc.ff" class="py-name" href="#" onclick="return doclink('link-42', 'ff', 'link-41');">ff</a></tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'filename'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt> </tt>
<a name="L335"></a><tt class="py-lineno"> 335</tt>  <tt class="py-line">                <tt class="py-name">existing_files</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt id="link-43" class="py-name"><a title="ivs.makedoc.ff" class="py-name" href="#" onclick="return doclink('link-43', 'ff', 'link-41');">ff</a></tt><tt class="py-op">!=</tt><tt class="py-string">'naf'</tt> <tt class="py-keyword">for</tt> <tt id="link-44" class="py-name"><a title="ivs.makedoc.ff" class="py-name" href="#" onclick="return doclink('link-44', 'ff', 'link-41');">ff</a></tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'filename'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">bool</tt><tt class="py-op">)</tt> </tt>
<a name="L336"></a><tt class="py-lineno"> 336</tt>  <tt class="py-line">                <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-name">existing_files</tt><tt class="py-op">]</tt> </tt>
<a name="L337"></a><tt class="py-lineno"> 337</tt>  <tt class="py-line">            <tt class="py-name">seqs</tt> <tt class="py-op">=</tt> <tt class="py-name">sorted</tt><tt class="py-op">(</tt><tt class="py-name">set</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L338"></a><tt class="py-lineno"> 338</tt>  <tt class="py-line">        <tt id="link-45" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-45', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'ID={}/prog_ID={}: Found {:d} spectra (data type={} with unique unseqs)'</tt><tt class="py-op">.</tt><tt id="link-46" class="py-name" targets="Variable ivs.asteroseismology.redgiantfreqs.format=ivs.asteroseismology.redgiantfreqs-module.html#format"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-46', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">,</tt><tt class="py-name">prog_ID</tt><tt class="py-op">,</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">seqs</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-name">data_type</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L339"></a><tt class="py-lineno"> 339</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L340"></a><tt class="py-lineno"> 340</tt>  <tt class="py-line">        <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-op">:</tt><tt class="py-number">0</tt><tt class="py-op">]</tt> </tt>
<a name="L341"></a><tt class="py-lineno"> 341</tt>  <tt class="py-line">        <tt id="link-47" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-47', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'%s: Found no spectra'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L342"></a><tt class="py-lineno"> 342</tt>  <tt class="py-line">     </tt>
<a name="L343"></a><tt class="py-lineno"> 343</tt>  <tt class="py-line">    <tt class="py-comment">#-- we now check if the barycentric correction was calculated properly.</tt> </tt>
<a name="L344"></a><tt class="py-lineno"> 344</tt>  <tt class="py-line">    <tt class="py-comment">#   If not, we calculate it here, but only if the object was found in</tt> </tt>
<a name="L345"></a><tt class="py-lineno"> 345</tt>  <tt class="py-line">    <tt class="py-comment">#   SIMBAD. Else, we have no information on the ra and dec (if bvcorr was</tt> </tt>
<a name="L346"></a><tt class="py-lineno"> 346</tt>  <tt class="py-line">    <tt class="py-comment">#   not calculated, ra and dec are not in the header).</tt> </tt>
<a name="L347"></a><tt class="py-lineno"> 347</tt>  <tt class="py-line">    <tt class="py-keyword">for</tt> <tt class="py-name">obs</tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">:</tt> </tt>
<a name="L348"></a><tt class="py-lineno"> 348</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">ID</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt> <tt class="py-keyword">and</tt> <tt class="py-name">info</tt><tt class="py-op">:</tt> </tt>
<a name="L349"></a><tt class="py-lineno"> 349</tt>  <tt class="py-line">            <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L350"></a><tt class="py-lineno"> 350</tt>  <tt class="py-line">                <tt class="py-name">jd</tt>  <tt class="py-op">=</tt> <tt id="link-48" class="py-name" targets="Function ivs.catalogs.hermes._timestamp2jd()=ivs.catalogs.hermes-module.html#_timestamp2jd"><a title="ivs.catalogs.hermes._timestamp2jd" class="py-name" href="#" onclick="return doclink('link-48', '_timestamp2jd', 'link-48');">_timestamp2jd</a></tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'date-avg'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L351"></a><tt class="py-lineno"> 351</tt>  <tt class="py-line">            <tt class="py-keyword">except</tt> <tt class="py-name">ValueError</tt><tt class="py-op">:</tt> </tt>
<a name="L352"></a><tt class="py-lineno"> 352</tt>  <tt class="py-line">                <tt id="link-49" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-49', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'Header probably corrupted for unseq {}: no info on time or barycentric correction'</tt><tt class="py-op">.</tt><tt id="link-50" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-50', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L353"></a><tt class="py-lineno"> 353</tt>  <tt class="py-line">                <tt class="py-name">jd</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt> </tt>
<a name="L354"></a><tt class="py-lineno"> 354</tt>  <tt class="py-line">            <tt class="py-comment"># the previous line is equivalent to:</tt> </tt>
<a name="L355"></a><tt class="py-lineno"> 355</tt>  <tt class="py-line">            <tt class="py-comment"># day = dateutil.parser.parse(header['DATE-AVG'])</tt> </tt>
<a name="L356"></a><tt class="py-lineno"> 356</tt>  <tt class="py-line">            <tt class="py-comment"># BJD = ephem.julian_date(day)</tt> </tt>
<a name="L357"></a><tt class="py-lineno"> 357</tt>  <tt class="py-line">            <tt class="py-name">bvcorr</tt><tt class="py-op">,</tt> <tt class="py-name">hjd</tt> <tt class="py-op">=</tt> <tt class="py-name">helcorr</tt><tt class="py-op">(</tt><tt class="py-name">ra</tt><tt class="py-op">/</tt><tt class="py-number">360.</tt><tt class="py-op">*</tt><tt class="py-number">24</tt><tt class="py-op">,</tt> <tt class="py-name">dec</tt><tt class="py-op">,</tt> <tt class="py-name">jd</tt><tt class="py-op">)</tt> </tt>
<a name="L358"></a><tt class="py-lineno"> 358</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L359"></a><tt class="py-lineno"> 359</tt>  <tt class="py-line">            <tt class="py-keyword">break</tt> </tt>
<a name="L360"></a><tt class="py-lineno"> 360</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">isnan</tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'bvcor'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L361"></a><tt class="py-lineno"> 361</tt>  <tt class="py-line">            <tt id="link-51" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-51', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">"Corrected 'bvcor' for unseq {} (missing in header)"</tt><tt class="py-op">.</tt><tt id="link-52" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-52', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L362"></a><tt class="py-lineno"> 362</tt>  <tt class="py-line">            <tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'bvcor'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">bvcorr</tt><tt class="py-op">)</tt> </tt>
<a name="L363"></a><tt class="py-lineno"> 363</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">isnan</tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'bjd'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L364"></a><tt class="py-lineno"> 364</tt>  <tt class="py-line">            <tt id="link-53" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-53', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">"Corrected 'bjd' for unseq {} (missing in header)"</tt><tt class="py-op">.</tt><tt id="link-54" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-54', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L365"></a><tt class="py-lineno"> 365</tt>  <tt class="py-line">            <tt class="py-name">obs</tt><tt class="py-op">[</tt><tt class="py-string">'bjd'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">hjd</tt><tt class="py-op">)</tt> </tt>
<a name="L366"></a><tt class="py-lineno"> 366</tt>  <tt class="py-line">         </tt>
<a name="L367"></a><tt class="py-lineno"> 367</tt>  <tt class="py-line">     </tt>
<a name="L368"></a><tt class="py-lineno"> 368</tt>  <tt class="py-line">    <tt class="py-comment">#-- do we need the information as a file, or as a numpy array?</tt> </tt>
<a name="L369"></a><tt class="py-lineno"> 369</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">filename</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L370"></a><tt class="py-lineno"> 370</tt>  <tt class="py-line">        <tt id="link-55" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-55', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-56" class="py-name" targets="Function ivs.io.ascii.write_array()=ivs.io.ascii-module.html#write_array,Function ivs.io.fits.write_array()=ivs.io.fits-module.html#write_array"><a title="ivs.io.ascii.write_array
ivs.io.fits.write_array" class="py-name" href="#" onclick="return doclink('link-56', 'write_array', 'link-56');">write_array</a></tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">,</tt><tt class="py-name">filename</tt><tt class="py-op">,</tt><tt class="py-name">auto_width</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt><tt class="py-name">header</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L371"></a><tt class="py-lineno"> 371</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L372"></a><tt class="py-lineno"> 372</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">data</tt> </tt>
</div><a name="L373"></a><tt class="py-lineno"> 373</tt>  <tt class="py-line"> </tt>
<a name="merge_hermes_spectra"></a><div id="merge_hermes_spectra-def"><a name="L374"></a><tt class="py-lineno"> 374</tt> <a class="py-toggle" href="#" id="merge_hermes_spectra-toggle" onclick="return toggle('merge_hermes_spectra');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#merge_hermes_spectra">merge_hermes_spectra</a><tt class="py-op">(</tt><tt class="py-param">objlist</tt><tt class="py-op">,</tt> <tt class="py-param">wscalelist</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt> <tt class="py-op">**</tt><tt class="py-param">kwargs</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="merge_hermes_spectra-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="merge_hermes_spectra-expanded"><a name="L375"></a><tt class="py-lineno"> 375</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L376"></a><tt class="py-lineno"> 376</tt>  <tt class="py-line"><tt class="py-docstring">    Combines HERMES spectra with sigma clipping to remove cosmics. The input spectra</tt> </tt>
<a name="L377"></a><tt class="py-lineno"> 377</tt>  <tt class="py-line"><tt class="py-docstring">    are given as a list of filenames for the objects and for the wavelength scales. </tt> </tt>
<a name="L378"></a><tt class="py-lineno"> 378</tt>  <tt class="py-line"><tt class="py-docstring">    The output is the wavelength scale of the first object, the merged and sigma clipped </tt> </tt>
<a name="L379"></a><tt class="py-lineno"> 379</tt>  <tt class="py-line"><tt class="py-docstring">    flux, and the adapted header of the object. In this adapted header, the exposure</tt> </tt>
<a name="L380"></a><tt class="py-lineno"> 380</tt>  <tt class="py-line"><tt class="py-docstring">    time is the sum of all individual exposure times, and the observing time is averaged.</tt> </tt>
<a name="L381"></a><tt class="py-lineno"> 381</tt>  <tt class="py-line"><tt class="py-docstring">    Uses the L{ivs.spectra.tools.merge_cosmic_clipping} method to merge the spectra.</tt> </tt>
<a name="L382"></a><tt class="py-lineno"> 382</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L383"></a><tt class="py-lineno"> 383</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; data = search('KIC9540226')</tt> </tt>
<a name="L384"></a><tt class="py-lineno"> 384</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; objlist = data['filename']</tt> </tt>
<a name="L385"></a><tt class="py-lineno"> 385</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; wave, flux, header = merge_hermes_spectra(objlist, wscalelist=None)</tt> </tt>
<a name="L386"></a><tt class="py-lineno"> 386</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L387"></a><tt class="py-lineno"> 387</tt>  <tt class="py-line"><tt class="py-docstring">    @param objlist: list of OBJ or order merged filenames</tt> </tt>
<a name="L388"></a><tt class="py-lineno"> 388</tt>  <tt class="py-line"><tt class="py-docstring">    @param wscalelist: list of wavelengthscale filenames</tt> </tt>
<a name="L389"></a><tt class="py-lineno"> 389</tt>  <tt class="py-line"><tt class="py-docstring">    @param vrads: list of radial velocities (optional)</tt> </tt>
<a name="L390"></a><tt class="py-lineno"> 390</tt>  <tt class="py-line"><tt class="py-docstring">    @param vrad_units: units of the radial velocities</tt> </tt>
<a name="L391"></a><tt class="py-lineno"> 391</tt>  <tt class="py-line"><tt class="py-docstring">    @param sigma: value used for sigma clipping</tt> </tt>
<a name="L392"></a><tt class="py-lineno"> 392</tt>  <tt class="py-line"><tt class="py-docstring">    @param window: window size used in median filter</tt> </tt>
<a name="L393"></a><tt class="py-lineno"> 393</tt>  <tt class="py-line"><tt class="py-docstring">    @param runs: number of iterations through the spectra</tt> </tt>
<a name="L394"></a><tt class="py-lineno"> 394</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L395"></a><tt class="py-lineno"> 395</tt>  <tt class="py-line"><tt class="py-docstring">    @return: The combined spectrum, cosmic clipped. (wave, flux, header)</tt> </tt>
<a name="L396"></a><tt class="py-lineno"> 396</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: [array, array, dict]</tt> </tt>
<a name="L397"></a><tt class="py-lineno"> 397</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L398"></a><tt class="py-lineno"> 398</tt>  <tt class="py-line">    <tt class="py-name">kwargs</tt><tt class="py-op">[</tt><tt class="py-string">'full_output'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">False</tt> </tt>
<a name="L399"></a><tt class="py-lineno"> 399</tt>  <tt class="py-line">     </tt>
<a name="L400"></a><tt class="py-lineno"> 400</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">wscalelist</tt> <tt class="py-op">==</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L401"></a><tt class="py-lineno"> 401</tt>  <tt class="py-line">        <tt class="py-comment">#-- Order Merged spectra are straight forward</tt> </tt>
<a name="L402"></a><tt class="py-lineno"> 402</tt>  <tt class="py-line">        <tt class="py-name">exptime</tt><tt class="py-op">,</tt> <tt class="py-name">bjd</tt> <tt class="py-op">=</tt> <tt class="py-number">0</tt><tt class="py-op">,</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros</tt><tt class="py-op">(</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L403"></a><tt class="py-lineno"> 403</tt>  <tt class="py-line">        <tt class="py-name">waves</tt><tt class="py-op">,</tt> <tt class="py-name">fluxes</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-op">[</tt><tt class="py-op">]</tt> </tt>
<a name="L404"></a><tt class="py-lineno"> 404</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">i</tt><tt class="py-op">,</tt> <tt class="py-name">ofile</tt> <tt class="py-keyword">in</tt> <tt class="py-name">enumerate</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L405"></a><tt class="py-lineno"> 405</tt>  <tt class="py-line">            <tt class="py-name">w</tt><tt class="py-op">,</tt> <tt class="py-name">f</tt><tt class="py-op">,</tt> <tt class="py-name">h</tt> <tt class="py-op">=</tt> <tt id="link-57" class="py-name"><a title="ivs.io.fits" class="py-name" href="#" onclick="return doclink('link-57', 'fits', 'link-8');">fits</a></tt><tt class="py-op">.</tt><tt id="link-58" class="py-name" targets="Function ivs.io.fits.read_spectrum()=ivs.io.fits-module.html#read_spectrum"><a title="ivs.io.fits.read_spectrum" class="py-name" href="#" onclick="return doclink('link-58', 'read_spectrum', 'link-58');">read_spectrum</a></tt><tt class="py-op">(</tt><tt class="py-name">ofile</tt><tt class="py-op">,</tt> <tt class="py-name">return_header</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L406"></a><tt class="py-lineno"> 406</tt>  <tt class="py-line">            <tt class="py-name">waves</tt><tt class="py-op">.</tt><tt class="py-name">append</tt><tt class="py-op">(</tt><tt class="py-name">w</tt><tt class="py-op">)</tt> </tt>
<a name="L407"></a><tt class="py-lineno"> 407</tt>  <tt class="py-line">            <tt class="py-name">fluxes</tt><tt class="py-op">.</tt><tt class="py-name">append</tt><tt class="py-op">(</tt><tt class="py-name">f</tt><tt class="py-op">)</tt> </tt>
<a name="L408"></a><tt class="py-lineno"> 408</tt>  <tt class="py-line">            <tt class="py-name">exptime</tt> <tt class="py-op">+=</tt> <tt class="py-name">h</tt><tt class="py-op">[</tt><tt class="py-string">'exptime'</tt><tt class="py-op">]</tt> </tt>
<a name="L409"></a><tt class="py-lineno"> 409</tt>  <tt class="py-line">            <tt class="py-comment">#bjd[i] = h['bjd']</tt> </tt>
<a name="L410"></a><tt class="py-lineno"> 410</tt>  <tt class="py-line">         </tt>
<a name="L411"></a><tt class="py-lineno"> 411</tt>  <tt class="py-line">        <tt class="py-name">waves</tt><tt class="py-op">,</tt> <tt class="py-name">fluxes</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">waves</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">fluxes</tt><tt class="py-op">)</tt> </tt>
<a name="L412"></a><tt class="py-lineno"> 412</tt>  <tt class="py-line">        <tt class="py-name">mwave</tt><tt class="py-op">,</tt> <tt class="py-name">mflux</tt> <tt class="py-op">=</tt> <tt class="py-name">sptools</tt><tt class="py-op">.</tt><tt id="link-59" class="py-name" targets="Function ivs.spectra.tools.merge_cosmic_clipping()=ivs.spectra.tools-module.html#merge_cosmic_clipping"><a title="ivs.spectra.tools.merge_cosmic_clipping" class="py-name" href="#" onclick="return doclink('link-59', 'merge_cosmic_clipping', 'link-59');">merge_cosmic_clipping</a></tt><tt class="py-op">(</tt><tt class="py-name">waves</tt><tt class="py-op">,</tt> <tt class="py-name">fluxes</tt><tt class="py-op">,</tt> <tt class="py-op">**</tt><tt class="py-name">kwargs</tt><tt class="py-op">)</tt> </tt>
<a name="L413"></a><tt class="py-lineno"> 413</tt>  <tt class="py-line">         </tt>
<a name="L414"></a><tt class="py-lineno"> 414</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L415"></a><tt class="py-lineno"> 415</tt>  <tt class="py-line">        <tt class="py-comment">#-- The OBJ spectra need to be merged order per order</tt> </tt>
<a name="L416"></a><tt class="py-lineno"> 416</tt>  <tt class="py-line">        <tt class="py-comment"># read all spectra</tt> </tt>
<a name="L417"></a><tt class="py-lineno"> 417</tt>  <tt class="py-line">        <tt class="py-name">exptime</tt><tt class="py-op">,</tt> <tt class="py-name">bjd</tt> <tt class="py-op">=</tt> <tt class="py-number">0</tt><tt class="py-op">,</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros</tt><tt class="py-op">(</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L418"></a><tt class="py-lineno"> 418</tt>  <tt class="py-line">        <tt class="py-name">waves</tt><tt class="py-op">,</tt> <tt class="py-name">fluxes</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-number">55</tt><tt class="py-op">,</tt><tt class="py-number">4608</tt><tt class="py-op">,</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-number">55</tt><tt class="py-op">,</tt><tt class="py-number">4608</tt><tt class="py-op">,</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">wscalelist</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L419"></a><tt class="py-lineno"> 419</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">i</tt><tt class="py-op">,</tt> <tt class="py-op">(</tt><tt class="py-name">ofile</tt><tt class="py-op">,</tt> <tt class="py-name">wfile</tt><tt class="py-op">)</tt> <tt class="py-keyword">in</tt> <tt class="py-name">enumerate</tt><tt class="py-op">(</tt><tt class="py-name">zip</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">,</tt> <tt class="py-name">wscalelist</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L420"></a><tt class="py-lineno"> 420</tt>  <tt class="py-line">            <tt class="py-name">odata</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getdata</tt><tt class="py-op">(</tt><tt class="py-name">ofile</tt><tt class="py-op">,</tt> <tt class="py-number">0</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">T</tt> <tt class="py-comment"># The flux has format (4608, 55) thus is transposed</tt> </tt>
<a name="L421"></a><tt class="py-lineno"> 421</tt>  <tt class="py-line">            <tt class="py-name">oheader</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getheader</tt><tt class="py-op">(</tt><tt class="py-name">ofile</tt><tt class="py-op">,</tt> <tt class="py-number">0</tt><tt class="py-op">)</tt> </tt>
<a name="L422"></a><tt class="py-lineno"> 422</tt>  <tt class="py-line">            <tt class="py-name">wdata</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getdata</tt><tt class="py-op">(</tt><tt class="py-name">wfile</tt><tt class="py-op">,</tt> <tt class="py-number">0</tt><tt class="py-op">)</tt> </tt>
<a name="L423"></a><tt class="py-lineno"> 423</tt>  <tt class="py-line">            <tt class="py-name">fluxes</tt><tt class="py-op">[</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-name">i</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">odata</tt> </tt>
<a name="L424"></a><tt class="py-lineno"> 424</tt>  <tt class="py-line">            <tt class="py-name">waves</tt><tt class="py-op">[</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-name">i</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">wdata</tt> </tt>
<a name="L425"></a><tt class="py-lineno"> 425</tt>  <tt class="py-line">            <tt class="py-name">exptime</tt> <tt class="py-op">+=</tt> <tt class="py-name">oheader</tt><tt class="py-op">[</tt><tt class="py-string">'exptime'</tt><tt class="py-op">]</tt> </tt>
<a name="L426"></a><tt class="py-lineno"> 426</tt>  <tt class="py-line">            <tt class="py-comment">#bjd[i] = oheader['bjd']</tt> </tt>
<a name="L427"></a><tt class="py-lineno"> 427</tt>  <tt class="py-line">         </tt>
<a name="L428"></a><tt class="py-lineno"> 428</tt>  <tt class="py-line">        <tt class="py-comment"># merge the spectra</tt> </tt>
<a name="L429"></a><tt class="py-lineno"> 429</tt>  <tt class="py-line">        <tt class="py-name">mwave</tt><tt class="py-op">,</tt> <tt class="py-name">mflux</tt> <tt class="py-op">=</tt> <tt class="py-name">waves</tt><tt class="py-op">[</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros</tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-number">55</tt><tt class="py-op">,</tt> <tt class="py-number">4608</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L430"></a><tt class="py-lineno"> 430</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">i</tt> <tt class="py-keyword">in</tt> <tt class="py-name">range</tt><tt class="py-op">(</tt><tt class="py-number">55</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L431"></a><tt class="py-lineno"> 431</tt>  <tt class="py-line">            <tt class="py-name">wave</tt><tt class="py-op">,</tt> <tt class="py-name">flux</tt> <tt class="py-op">=</tt> <tt class="py-name">sptools</tt><tt class="py-op">.</tt><tt id="link-60" class="py-name"><a title="ivs.spectra.tools.merge_cosmic_clipping" class="py-name" href="#" onclick="return doclink('link-60', 'merge_cosmic_clipping', 'link-59');">merge_cosmic_clipping</a></tt><tt class="py-op">(</tt><tt class="py-name">waves</tt><tt class="py-op">[</tt><tt class="py-name">i</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">T</tt><tt class="py-op">,</tt> <tt class="py-name">fluxes</tt><tt class="py-op">[</tt><tt class="py-name">i</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">,</tt><tt class="py-op">:</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">T</tt><tt class="py-op">,</tt> <tt class="py-op">**</tt><tt class="py-name">kwargs</tt><tt class="py-op">)</tt> </tt>
<a name="L432"></a><tt class="py-lineno"> 432</tt>  <tt class="py-line">            <tt class="py-name">mflux</tt><tt class="py-op">[</tt><tt class="py-name">i</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">flux</tt> </tt>
<a name="L433"></a><tt class="py-lineno"> 433</tt>  <tt class="py-line">         </tt>
<a name="L434"></a><tt class="py-lineno"> 434</tt>  <tt class="py-line">    <tt class="py-name">header</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getheader</tt><tt class="py-op">(</tt><tt class="py-name">objlist</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> <tt class="py-number">0</tt><tt class="py-op">)</tt> </tt>
<a name="L435"></a><tt class="py-lineno"> 435</tt>  <tt class="py-line">    <tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'exptime'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">exptime</tt> </tt>
<a name="L436"></a><tt class="py-lineno"> 436</tt>  <tt class="py-line">    <tt class="py-comment">#header['bjd'] = np.average(bjd)</tt> </tt>
<a name="L437"></a><tt class="py-lineno"> 437</tt>  <tt class="py-line">     </tt>
<a name="L438"></a><tt class="py-lineno"> 438</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">mwave</tt><tt class="py-op">,</tt> <tt class="py-name">mflux</tt><tt class="py-op">,</tt> <tt class="py-name">header</tt> </tt>
</div><a name="L439"></a><tt class="py-lineno"> 439</tt>  <tt class="py-line"> </tt>
<a name="make_list_star"></a><div id="make_list_star-def"><a name="L440"></a><tt class="py-lineno"> 440</tt> <a class="py-toggle" href="#" id="make_list_star-toggle" onclick="return toggle('make_list_star');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#make_list_star">make_list_star</a><tt class="py-op">(</tt><tt class="py-param">ID</tt><tt class="py-op">,</tt><tt class="py-param">direc</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="make_list_star-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="make_list_star-expanded"><a name="L441"></a><tt class="py-lineno"> 441</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L442"></a><tt class="py-lineno"> 442</tt>  <tt class="py-line"><tt class="py-docstring">    Mimics HermesTool MakeListStar.</tt> </tt>
<a name="L443"></a><tt class="py-lineno"> 443</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L444"></a><tt class="py-lineno"> 444</tt>  <tt class="py-line"><tt class="py-docstring">    This should work as input for HermesTool CCFList.py</tt> </tt>
<a name="L445"></a><tt class="py-lineno"> 445</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L446"></a><tt class="py-lineno"> 446</tt>  <tt class="py-line"><tt class="py-docstring">    The result is a file in the current working directory with name C{ID.list}.</tt> </tt>
<a name="L447"></a><tt class="py-lineno"> 447</tt>  <tt class="py-line"><tt class="py-docstring">    If you have specified the C{direc} keyword, the file will be written inside</tt> </tt>
<a name="L448"></a><tt class="py-lineno"> 448</tt>  <tt class="py-line"><tt class="py-docstring">    that directory. Make sure you have write permission.</tt> </tt>
<a name="L449"></a><tt class="py-lineno"> 449</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L450"></a><tt class="py-lineno"> 450</tt>  <tt class="py-line"><tt class="py-docstring">    The contents of the file is:</tt> </tt>
<a name="L451"></a><tt class="py-lineno"> 451</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L452"></a><tt class="py-lineno"> 452</tt>  <tt class="py-line"><tt class="py-docstring">    unseq, date-avg, ID, bjd, bvcor, prog_id, exptime, airmass, pmtotal</tt> </tt>
<a name="L453"></a><tt class="py-lineno"> 453</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L454"></a><tt class="py-lineno"> 454</tt>  <tt class="py-line"><tt class="py-docstring">    @param ID: name of the star, understandable by SIMBAD.</tt> </tt>
<a name="L455"></a><tt class="py-lineno"> 455</tt>  <tt class="py-line"><tt class="py-docstring">    @type ID: string</tt> </tt>
<a name="L456"></a><tt class="py-lineno"> 456</tt>  <tt class="py-line"><tt class="py-docstring">    @param direc: directory to write the file into (defaults to current working</tt> </tt>
<a name="L457"></a><tt class="py-lineno"> 457</tt>  <tt class="py-line"><tt class="py-docstring">    directory)</tt> </tt>
<a name="L458"></a><tt class="py-lineno"> 458</tt>  <tt class="py-line"><tt class="py-docstring">    @type direc: string</tt> </tt>
<a name="L459"></a><tt class="py-lineno"> 459</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L460"></a><tt class="py-lineno"> 460</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">direc</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L461"></a><tt class="py-lineno"> 461</tt>  <tt class="py-line">        <tt class="py-name">direc</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">getcwd</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L462"></a><tt class="py-lineno"> 462</tt>  <tt class="py-line">    <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt id="link-61" class="py-name"><a title="ivs.catalogs.coralie.search
ivs.catalogs.gator.search
ivs.catalogs.gcpd.search
ivs.catalogs.hermes.search
ivs.catalogs.mast.search
ivs.catalogs.sesame.search
ivs.catalogs.vizier.search" class="py-name" href="#" onclick="return doclink('link-61', 'search', 'link-38');">search</a></tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt> </tt>
<a name="L463"></a><tt class="py-lineno"> 463</tt>  <tt class="py-line">    <tt class="py-name">fname</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">direc</tt><tt class="py-op">,</tt><tt class="py-string">'%s.list'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L464"></a><tt class="py-lineno"> 464</tt>  <tt class="py-line">    <tt id="link-62" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-62', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-63" class="py-name"><a title="ivs.io.ascii.write_array
ivs.io.fits.write_array" class="py-name" href="#" onclick="return doclink('link-63', 'write_array', 'link-56');">write_array</a></tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'date-avg'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-op">[</tt><tt class="py-name">ID</tt> <tt class="py-keyword">for</tt> <tt class="py-name">i</tt> <tt class="py-keyword">in</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> </tt>
<a name="L465"></a><tt class="py-lineno"> 465</tt>  <tt class="py-line">                       <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'bjd'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'bvcor'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'prog_id'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'exptime'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> </tt>
<a name="L466"></a><tt class="py-lineno"> 466</tt>  <tt class="py-line">                       <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'airmass'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'pmtotal'</tt><tt class="py-op">]</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">fname</tt><tt class="py-op">,</tt><tt class="py-name">axis0</tt><tt class="py-op">=</tt><tt class="py-string">'cols'</tt><tt class="py-op">)</tt> </tt>
</div><a name="L467"></a><tt class="py-lineno"> 467</tt>  <tt class="py-line">     </tt>
<a name="make_mask_file"></a><div id="make_mask_file-def"><a name="L468"></a><tt class="py-lineno"> 468</tt> <a class="py-toggle" href="#" id="make_mask_file-toggle" onclick="return toggle('make_mask_file');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#make_mask_file">make_mask_file</a><tt class="py-op">(</tt><tt class="py-param">wavelength</tt><tt class="py-op">,</tt><tt class="py-param">depth</tt><tt class="py-op">,</tt><tt class="py-param">filename</tt><tt class="py-op">=</tt><tt class="py-string">'mymask.fits'</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="make_mask_file-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="make_mask_file-expanded"><a name="L469"></a><tt class="py-lineno"> 469</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L470"></a><tt class="py-lineno"> 470</tt>  <tt class="py-line"><tt class="py-docstring">    Make a mask file for RV calculations with the Hermes pipeline.</tt> </tt>
<a name="L471"></a><tt class="py-lineno"> 471</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L472"></a><tt class="py-lineno"> 472</tt>  <tt class="py-line"><tt class="py-docstring">    See L{ivs.units.linelists} to select appropriate masks. You readily use the</tt> </tt>
<a name="L473"></a><tt class="py-lineno"> 473</tt>  <tt class="py-line"><tt class="py-docstring">    columns C{wavelength} and C{depth} as input for this function.</tt> </tt>
<a name="L474"></a><tt class="py-lineno"> 474</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L475"></a><tt class="py-lineno"> 475</tt>  <tt class="py-line"><tt class="py-docstring">    @param wavelength: wavelength in angstrom</tt> </tt>
<a name="L476"></a><tt class="py-lineno"> 476</tt>  <tt class="py-line"><tt class="py-docstring">    @type wavelength: 1D numpy array</tt> </tt>
<a name="L477"></a><tt class="py-lineno"> 477</tt>  <tt class="py-line"><tt class="py-docstring">    @param depth: strenght of the line (1-normalised flux minimum)</tt> </tt>
<a name="L478"></a><tt class="py-lineno"> 478</tt>  <tt class="py-line"><tt class="py-docstring">    @type depth: 1D numpy array</tt> </tt>
<a name="L479"></a><tt class="py-lineno"> 479</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L480"></a><tt class="py-lineno"> 480</tt>  <tt class="py-line">    <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">wavelength</tt><tt class="py-op">,</tt><tt class="py-name">depth</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">T</tt> </tt>
<a name="L481"></a><tt class="py-lineno"> 481</tt>  <tt class="py-line">    <tt class="py-name">hdulist</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">PrimaryHDU</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L482"></a><tt class="py-lineno"> 482</tt>  <tt class="py-line">    <tt class="py-name">hdulist</tt><tt class="py-op">.</tt><tt class="py-name">writeto</tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt> </tt>
</div><a name="L483"></a><tt class="py-lineno"> 483</tt>  <tt class="py-line"> </tt>
<a name="L484"></a><tt class="py-lineno"> 484</tt>  <tt class="py-line"> </tt>
<a name="calibrate"></a><div id="calibrate-def"><a name="L485"></a><tt class="py-lineno"> 485</tt> <a class="py-toggle" href="#" id="calibrate-toggle" onclick="return toggle('calibrate');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#calibrate">calibrate</a><tt class="py-op">(</tt><tt class="py-param">wave</tt><tt class="py-op">,</tt><tt class="py-param">flux</tt><tt class="py-op">,</tt><tt class="py-param">header</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="calibrate-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="calibrate-expanded"><a name="L486"></a><tt class="py-lineno"> 486</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L487"></a><tt class="py-lineno"> 487</tt>  <tt class="py-line"><tt class="py-docstring">    Rough calibration of Hermes spectrum.</tt> </tt>
<a name="L488"></a><tt class="py-lineno"> 488</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L489"></a><tt class="py-lineno"> 489</tt>  <tt class="py-line"><tt class="py-docstring">    Thanks to Roy Ostensen for computing the response function via detailed</tt> </tt>
<a name="L490"></a><tt class="py-lineno"> 490</tt>  <tt class="py-line"><tt class="py-docstring">    modeling of Feige 66.</tt> </tt>
<a name="L491"></a><tt class="py-lineno"> 491</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L492"></a><tt class="py-lineno"> 492</tt>  <tt class="py-line">    <tt class="py-comment">#-- read instrument response function</tt> </tt>
<a name="L493"></a><tt class="py-lineno"> 493</tt>  <tt class="py-line">    <tt class="py-name">instrument</tt> <tt class="py-op">=</tt> <tt id="link-64" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-64', 'config', 'link-21');">config</a></tt><tt class="py-op">.</tt><tt id="link-65" class="py-name" targets="Function ivs.config.get_datafile()=ivs.config-module.html#get_datafile"><a title="ivs.config.get_datafile" class="py-name" href="#" onclick="return doclink('link-65', 'get_datafile', 'link-65');">get_datafile</a></tt><tt class="py-op">(</tt><tt class="py-string">'catalogs/hermes'</tt><tt class="py-op">,</tt><tt class="py-string">'hermes_20110319.resp'</tt><tt class="py-op">)</tt> </tt>
<a name="L494"></a><tt class="py-lineno"> 494</tt>  <tt class="py-line">    <tt class="py-name">iwave</tt><tt class="py-op">,</tt><tt class="py-name">iflux</tt> <tt class="py-op">=</tt> <tt id="link-66" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-66', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-67" class="py-name" targets="Function ivs.io.ascii.read2array()=ivs.io.ascii-module.html#read2array"><a title="ivs.io.ascii.read2array" class="py-name" href="#" onclick="return doclink('link-67', 'read2array', 'link-67');">read2array</a></tt><tt class="py-op">(</tt><tt class="py-name">instrument</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">T</tt> </tt>
<a name="L495"></a><tt class="py-lineno"> 495</tt>  <tt class="py-line">    <tt class="py-name">keep</tt> <tt class="py-op">=</tt> <tt class="py-op">(</tt><tt class="py-name">iwave</tt><tt class="py-op">.</tt><tt class="py-name">min</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">&lt;=</tt><tt class="py-name">wave</tt><tt class="py-op">)</tt> <tt class="py-op">&amp;</tt> <tt class="py-op">(</tt><tt class="py-name">wave</tt><tt class="py-op">&lt;=</tt><tt class="py-name">iwave</tt><tt class="py-op">.</tt><tt class="py-name">max</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L496"></a><tt class="py-lineno"> 496</tt>  <tt class="py-line">    <tt class="py-comment">#-- interpolate on observed wavelength array</tt> </tt>
<a name="L497"></a><tt class="py-lineno"> 497</tt>  <tt class="py-line">    <tt class="py-name">iflux</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">interp</tt><tt class="py-op">(</tt><tt class="py-name">wave</tt><tt class="py-op">[</tt><tt class="py-name">keep</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">iwave</tt><tt class="py-op">,</tt><tt class="py-name">iflux</tt><tt class="py-op">)</tt> </tt>
<a name="L498"></a><tt class="py-lineno"> 498</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">wave</tt><tt class="py-op">[</tt><tt class="py-name">keep</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-name">flux</tt><tt class="py-op">[</tt><tt class="py-name">keep</tt><tt class="py-op">]</tt><tt class="py-op">/</tt><tt class="py-name">iflux</tt><tt class="py-op">,</tt><tt class="py-name">iflux</tt> </tt>
</div><a name="L499"></a><tt class="py-lineno"> 499</tt>  <tt class="py-line"><tt class="py-comment">#}</tt> </tt>
<a name="L500"></a><tt class="py-lineno"> 500</tt>  <tt class="py-line"> </tt>
<a name="L501"></a><tt class="py-lineno"> 501</tt>  <tt class="py-line"><tt class="py-comment">#{ Read / Write</tt> </tt>
<a name="L502"></a><tt class="py-lineno"> 502</tt>  <tt class="py-line"> </tt>
<a name="read_hermesVR_velocities"></a><div id="read_hermesVR_velocities-def"><a name="L503"></a><tt class="py-lineno"> 503</tt> <a class="py-toggle" href="#" id="read_hermesVR_velocities-toggle" onclick="return toggle('read_hermesVR_velocities');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#read_hermesVR_velocities">read_hermesVR_velocities</a><tt class="py-op">(</tt><tt class="py-param">unique</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-param">return_latest</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-param">unseq</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt> <tt class="py-param">object</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt> <tt class="py-op">**</tt><tt class="py-param">kwargs</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="read_hermesVR_velocities-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="read_hermesVR_velocities-expanded"><a name="L504"></a><tt class="py-lineno"> 504</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L505"></a><tt class="py-lineno"> 505</tt>  <tt class="py-line"><tt class="py-docstring">    Read the velocities.data file with the resuls from hermesVR. The results are</tt> </tt>
<a name="L506"></a><tt class="py-lineno"> 506</tt>  <tt class="py-line"><tt class="py-docstring">    returned as a numpy record array. By setting unique to True, the method will </tt> </tt>
<a name="L507"></a><tt class="py-lineno"> 507</tt>  <tt class="py-line"><tt class="py-docstring">    only return a unique set of sequence numbers. When return_latest is True it will </tt> </tt>
<a name="L508"></a><tt class="py-lineno"> 508</tt>  <tt class="py-line"><tt class="py-docstring">    pick the latest added version, otherwise the first added is picked.</tt> </tt>
<a name="L509"></a><tt class="py-lineno"> 509</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L510"></a><tt class="py-lineno"> 510</tt>  <tt class="py-line"><tt class="py-docstring">    You can supply a list of unseq numbers, and then only those will be returned,</tt> </tt>
<a name="L511"></a><tt class="py-lineno"> 511</tt>  <tt class="py-line"><tt class="py-docstring">    same goes for object. In both cases the output is ordered in the same way as </tt> </tt>
<a name="L512"></a><tt class="py-lineno"> 512</tt>  <tt class="py-line"><tt class="py-docstring">    the list of unseq or object that you provided. These lists can be used together</tt> </tt>
<a name="L513"></a><tt class="py-lineno"> 513</tt>  <tt class="py-line"><tt class="py-docstring">    with the unique option.</tt> </tt>
<a name="L514"></a><tt class="py-lineno"> 514</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L515"></a><tt class="py-lineno"> 515</tt>  <tt class="py-line"><tt class="py-docstring">    This method will search for 'velocities.data' in 'hermesDir/hermesAnalyses/'.</tt> </tt>
<a name="L516"></a><tt class="py-lineno"> 516</tt>  <tt class="py-line"><tt class="py-docstring">    You can provide another file location by using the keyword filename.</tt> </tt>
<a name="L517"></a><tt class="py-lineno"> 517</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L518"></a><tt class="py-lineno"> 518</tt>  <tt class="py-line"><tt class="py-docstring">    The field in the recored array are:</tt> </tt>
<a name="L519"></a><tt class="py-lineno"> 519</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L520"></a><tt class="py-lineno"> 520</tt>  <tt class="py-line"><tt class="py-docstring">        - unseq: unique number </tt> </tt>
<a name="L521"></a><tt class="py-lineno"> 521</tt>  <tt class="py-line"><tt class="py-docstring">        - object: object name </tt> </tt>
<a name="L522"></a><tt class="py-lineno"> 522</tt>  <tt class="py-line"><tt class="py-docstring">        - hjd: HJD </tt> </tt>
<a name="L523"></a><tt class="py-lineno"> 523</tt>  <tt class="py-line"><tt class="py-docstring">        - exptime: exposure time </tt> </tt>
<a name="L524"></a><tt class="py-lineno"> 524</tt>  <tt class="py-line"><tt class="py-docstring">        - bvcorr: bary_corr </tt> </tt>
<a name="L525"></a><tt class="py-lineno"> 525</tt>  <tt class="py-line"><tt class="py-docstring">        - rvdrift: RV drift (2F frames only) </tt> </tt>
<a name="L526"></a><tt class="py-lineno"> 526</tt>  <tt class="py-line"><tt class="py-docstring">        - telloff: telluric offset </tt> </tt>
<a name="L527"></a><tt class="py-lineno"> 527</tt>  <tt class="py-line"><tt class="py-docstring">        - tellofferr: error on telluric offset </tt> </tt>
<a name="L528"></a><tt class="py-lineno"> 528</tt>  <tt class="py-line"><tt class="py-docstring">        - telloffwidth: width telluric fit  </tt> </tt>
<a name="L529"></a><tt class="py-lineno"> 529</tt>  <tt class="py-line"><tt class="py-docstring">        - vrad: Vrad(55-74) (bvcorr applied)</tt> </tt>
<a name="L530"></a><tt class="py-lineno"> 530</tt>  <tt class="py-line"><tt class="py-docstring">        - vraderr: err on Vrad </tt> </tt>
<a name="L531"></a><tt class="py-lineno"> 531</tt>  <tt class="py-line"><tt class="py-docstring">        - nlines: number of lines used </tt> </tt>
<a name="L532"></a><tt class="py-lineno"> 532</tt>  <tt class="py-line"><tt class="py-docstring">        - ccfdepth: depth_CCF</tt> </tt>
<a name="L533"></a><tt class="py-lineno"> 533</tt>  <tt class="py-line"><tt class="py-docstring">        - ccfdeptherr: error on depth_CCF </tt> </tt>
<a name="L534"></a><tt class="py-lineno"> 534</tt>  <tt class="py-line"><tt class="py-docstring">        - ccfsigma: sigma_CCF</tt> </tt>
<a name="L535"></a><tt class="py-lineno"> 535</tt>  <tt class="py-line"><tt class="py-docstring">        - ccfsigmaerr: err on sigma_CCF</tt> </tt>
<a name="L536"></a><tt class="py-lineno"> 536</tt>  <tt class="py-line"><tt class="py-docstring">        - sn: signal to noise in spectrum (orders 55-74) </tt> </tt>
<a name="L537"></a><tt class="py-lineno"> 537</tt>  <tt class="py-line"><tt class="py-docstring">        - gaussoc: O-C of Gaussian fit </tt> </tt>
<a name="L538"></a><tt class="py-lineno"> 538</tt>  <tt class="py-line"><tt class="py-docstring">        - wvlfile: wavelength calibration file </tt> </tt>
<a name="L539"></a><tt class="py-lineno"> 539</tt>  <tt class="py-line"><tt class="py-docstring">        - maskfile: mask file </tt> </tt>
<a name="L540"></a><tt class="py-lineno"> 540</tt>  <tt class="py-line"><tt class="py-docstring">        - fffile: Flatfield file </tt> </tt>
<a name="L541"></a><tt class="py-lineno"> 541</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L542"></a><tt class="py-lineno"> 542</tt>  <tt class="py-line"><tt class="py-docstring">    @param unique: True is only return unique sequence numbers</tt> </tt>
<a name="L543"></a><tt class="py-lineno"> 543</tt>  <tt class="py-line"><tt class="py-docstring">    @type unique: bool</tt> </tt>
<a name="L544"></a><tt class="py-lineno"> 544</tt>  <tt class="py-line"><tt class="py-docstring">    @param return_latest: True to pick the last added file</tt> </tt>
<a name="L545"></a><tt class="py-lineno"> 545</tt>  <tt class="py-line"><tt class="py-docstring">    @type return_latest: bool</tt> </tt>
<a name="L546"></a><tt class="py-lineno"> 546</tt>  <tt class="py-line"><tt class="py-docstring">    @param unseq: list of sequence numbers to return</tt> </tt>
<a name="L547"></a><tt class="py-lineno"> 547</tt>  <tt class="py-line"><tt class="py-docstring">    @type unseq: list</tt> </tt>
<a name="L548"></a><tt class="py-lineno"> 548</tt>  <tt class="py-line"><tt class="py-docstring">    @param object: list of object names to return</tt> </tt>
<a name="L549"></a><tt class="py-lineno"> 549</tt>  <tt class="py-line"><tt class="py-docstring">    @type object: list</tt> </tt>
<a name="L550"></a><tt class="py-lineno"> 550</tt>  <tt class="py-line"><tt class="py-docstring">    @param filename: Path to the velocities.data file</tt> </tt>
<a name="L551"></a><tt class="py-lineno"> 551</tt>  <tt class="py-line"><tt class="py-docstring">    @type filename: str</tt> </tt>
<a name="L552"></a><tt class="py-lineno"> 552</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L553"></a><tt class="py-lineno"> 553</tt>  <tt class="py-line"><tt class="py-docstring">    @return: array with the requested result</tt> </tt>
<a name="L554"></a><tt class="py-lineno"> 554</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: record array</tt> </tt>
<a name="L555"></a><tt class="py-lineno"> 555</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L556"></a><tt class="py-lineno"> 556</tt>  <tt class="py-line">     </tt>
<a name="L557"></a><tt class="py-lineno"> 557</tt>  <tt class="py-line">    <tt class="py-comment">#-- read data from velocities.data</tt> </tt>
<a name="L558"></a><tt class="py-lineno"> 558</tt>  <tt class="py-line">    <tt class="py-name">velocity_file</tt> <tt class="py-op">=</tt> <tt class="py-name">kwargs</tt><tt class="py-op">.</tt><tt id="link-68" class="py-name" targets="Method ivs.io.database.Database.pop()=ivs.io.database.Database-class.html#pop"><a title="ivs.io.database.Database.pop" class="py-name" href="#" onclick="return doclink('link-68', 'pop', 'link-68');">pop</a></tt><tt class="py-op">(</tt><tt class="py-string">'filename'</tt><tt class="py-op">,</tt> <tt id="link-69" class="py-name"><a title="ivs.catalogs.hermes.hermesDir" class="py-name" href="#" onclick="return doclink('link-69', 'hermesDir', 'link-25');">hermesDir</a></tt> <tt class="py-op">+</tt> <tt class="py-string">'hermesAnalyses/velocities.data'</tt><tt class="py-op">)</tt> </tt>
<a name="L559"></a><tt class="py-lineno"> 559</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isfile</tt><tt class="py-op">(</tt><tt class="py-name">velocity_file</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L560"></a><tt class="py-lineno"> 560</tt>  <tt class="py-line">        <tt id="link-70" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-70', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">warning</tt><tt class="py-op">(</tt><tt class="py-string">'velocities.data file not found!'</tt><tt class="py-op">)</tt> </tt>
<a name="L561"></a><tt class="py-lineno"> 561</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-op">[</tt><tt class="py-op">]</tt> </tt>
<a name="L562"></a><tt class="py-lineno"> 562</tt>  <tt class="py-line">    <tt class="py-name">rawdata</tt> <tt class="py-op">=</tt> <tt id="link-71" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-71', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-72" class="py-name" targets="Function ivs.io.ascii.read2list()=ivs.io.ascii-module.html#read2list"><a title="ivs.io.ascii.read2list" class="py-name" href="#" onclick="return doclink('link-72', 'read2list', 'link-72');">read2list</a></tt><tt class="py-op">(</tt><tt class="py-name">velocity_file</tt><tt class="py-op">)</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt> </tt>
<a name="L563"></a><tt class="py-lineno"> 563</tt>  <tt class="py-line">     </tt>
<a name="L564"></a><tt class="py-lineno"> 564</tt>  <tt class="py-line">    <tt class="py-comment">#-- parse the data and store in rec array</tt> </tt>
<a name="L565"></a><tt class="py-lineno"> 565</tt>  <tt class="py-line">    <tt class="py-keyword">for</tt> <tt class="py-name">i</tt><tt class="py-op">,</tt> <tt class="py-name">line</tt> <tt class="py-keyword">in</tt> <tt class="py-name">enumerate</tt><tt class="py-op">(</tt><tt class="py-name">rawdata</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L566"></a><tt class="py-lineno"> 566</tt>  <tt class="py-line">        <tt class="py-comment"># here are some options to catch problems before creating the recarray.</tt> </tt>
<a name="L567"></a><tt class="py-lineno"> 567</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">line</tt><tt class="py-op">)</tt> <tt class="py-op">&gt;</tt> <tt class="py-number">21</tt><tt class="py-op">:</tt>  </tt>
<a name="L568"></a><tt class="py-lineno"> 568</tt>  <tt class="py-line">            <tt class="py-name">line</tt><tt class="py-op">[</tt><tt class="py-number">20</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-string">" "</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">line</tt><tt class="py-op">[</tt><tt class="py-number">20</tt><tt class="py-op">:</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L569"></a><tt class="py-lineno"> 569</tt>  <tt class="py-line">            <tt class="py-name">rawdata</tt><tt class="py-op">[</tt><tt class="py-name">i</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">tuple</tt><tt class="py-op">(</tt><tt class="py-name">line</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">:</tt><tt class="py-number">21</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L570"></a><tt class="py-lineno"> 570</tt>  <tt class="py-line">             </tt>
<a name="L571"></a><tt class="py-lineno"> 571</tt>  <tt class="py-line">    <tt class="py-name">dtype</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-string">'unseq'</tt><tt class="py-op">,</tt><tt class="py-string">'int'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'object'</tt><tt class="py-op">,</tt><tt class="py-string">'a20'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'hjd'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'exptime'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'bvcor'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> </tt>
<a name="L572"></a><tt class="py-lineno"> 572</tt>  <tt class="py-line">             <tt class="py-op">(</tt><tt class="py-string">'rvdrift'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'telloff'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'tellofferr'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'telloffwidth'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> </tt>
<a name="L573"></a><tt class="py-lineno"> 573</tt>  <tt class="py-line">             <tt class="py-op">(</tt><tt class="py-string">'vrad'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'vraderr'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'nlines'</tt><tt class="py-op">,</tt><tt class="py-string">'int'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'ccfdepth'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> </tt>
<a name="L574"></a><tt class="py-lineno"> 574</tt>  <tt class="py-line">             <tt class="py-op">(</tt><tt class="py-string">'ccfdeptherr'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> <tt class="py-op">(</tt><tt class="py-string">'ccfsigma'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'ccfsigmaerr'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'sn'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> </tt>
<a name="L575"></a><tt class="py-lineno"> 575</tt>  <tt class="py-line">             <tt class="py-op">(</tt><tt class="py-string">'gaussoc'</tt><tt class="py-op">,</tt><tt class="py-string">'f8'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'wvlfile'</tt><tt class="py-op">,</tt><tt class="py-string">'a80'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'maskfile'</tt><tt class="py-op">,</tt><tt class="py-string">'a80'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-string">'fffile'</tt><tt class="py-op">,</tt><tt class="py-string">'a80'</tt><tt class="py-op">)</tt><tt class="py-op">]</tt> </tt>
<a name="L576"></a><tt class="py-lineno"> 576</tt>  <tt class="py-line">    <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">rec</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">rawdata</tt><tt class="py-op">,</tt> <tt class="py-name">dtype</tt><tt class="py-op">=</tt><tt class="py-name">dtype</tt><tt class="py-op">)</tt>  </tt>
<a name="L577"></a><tt class="py-lineno"> 577</tt>  <tt class="py-line">     </tt>
<a name="L578"></a><tt class="py-lineno"> 578</tt>  <tt class="py-line">    <tt class="py-comment">#-- select which lines to keep</tt> </tt>
<a name="L579"></a><tt class="py-lineno"> 579</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">unique</tt><tt class="py-op">:</tt> </tt>
<a name="L580"></a><tt class="py-lineno"> 580</tt>  <tt class="py-line">        <tt class="py-name">unique_sequence</tt> <tt class="py-op">=</tt> <tt class="py-name">set</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L581"></a><tt class="py-lineno"> 581</tt>  <tt class="py-line">        <tt class="py-name">order</tt> <tt class="py-op">=</tt> <tt class="py-op">-</tt><tt class="py-number">1</tt> <tt class="py-keyword">if</tt> <tt class="py-name">return_latest</tt> <tt class="py-keyword">else</tt> <tt class="py-number">0</tt> </tt>
<a name="L582"></a><tt class="py-lineno"> 582</tt>  <tt class="py-line">        <tt class="py-name">select</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">]</tt> </tt>
<a name="L583"></a><tt class="py-lineno"> 583</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">seq</tt> <tt class="py-keyword">in</tt> <tt class="py-name">unique_sequence</tt><tt class="py-op">:</tt> </tt>
<a name="L584"></a><tt class="py-lineno"> 584</tt>  <tt class="py-line">            <tt class="py-name">select</tt><tt class="py-op">.</tt><tt class="py-name">append</tt><tt class="py-op">(</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">where</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">==</tt><tt class="py-name">seq</tt><tt class="py-op">)</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">[</tt><tt class="py-name">order</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L585"></a><tt class="py-lineno"> 585</tt>  <tt class="py-line">        <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-name">select</tt><tt class="py-op">,</tt><tt class="py-op">)</tt><tt class="py-op">]</tt> </tt>
<a name="L586"></a><tt class="py-lineno"> 586</tt>  <tt class="py-line">     </tt>
<a name="L587"></a><tt class="py-lineno"> 587</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">unseq</tt> <tt class="py-op">!=</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L588"></a><tt class="py-lineno"> 588</tt>  <tt class="py-line">        <tt class="py-comment"># also keep the order in which unseq is provided</tt> </tt>
<a name="L589"></a><tt class="py-lineno"> 589</tt>  <tt class="py-line">        <tt class="py-name">select</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">ravel</tt><tt class="py-op">(</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">hstack</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">where</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt><tt class="py-op">==</tt><tt class="py-name">sq</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">sq</tt> <tt class="py-keyword">in</tt> <tt class="py-name">unseq</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L590"></a><tt class="py-lineno"> 590</tt>  <tt class="py-line">        <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-name">select</tt><tt class="py-op">,</tt><tt class="py-op">)</tt><tt class="py-op">]</tt> </tt>
<a name="L591"></a><tt class="py-lineno"> 591</tt>  <tt class="py-line">         </tt>
<a name="L592"></a><tt class="py-lineno"> 592</tt>  <tt class="py-line">         </tt>
<a name="L593"></a><tt class="py-lineno"> 593</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">object</tt> <tt class="py-op">!=</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L594"></a><tt class="py-lineno"> 594</tt>  <tt class="py-line">        <tt class="py-name">select</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">ravel</tt><tt class="py-op">(</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">hstack</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">where</tt><tt class="py-op">(</tt><tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'object'</tt><tt class="py-op">]</tt><tt class="py-op">==</tt><tt class="py-name">ob</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">ob</tt> <tt class="py-keyword">in</tt> <tt class="py-name">object</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L595"></a><tt class="py-lineno"> 595</tt>  <tt class="py-line">        <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-name">select</tt><tt class="py-op">]</tt> </tt>
<a name="L596"></a><tt class="py-lineno"> 596</tt>  <tt class="py-line">     </tt>
<a name="L597"></a><tt class="py-lineno"> 597</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">data</tt> </tt>
</div><a name="L598"></a><tt class="py-lineno"> 598</tt>  <tt class="py-line"> </tt>
<a name="read_hermesVR_AllCCF"></a><div id="read_hermesVR_AllCCF-def"><a name="L599"></a><tt class="py-lineno"> 599</tt> <a class="py-toggle" href="#" id="read_hermesVR_AllCCF-toggle" onclick="return toggle('read_hermesVR_AllCCF');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#read_hermesVR_AllCCF">read_hermesVR_AllCCF</a><tt class="py-op">(</tt><tt class="py-param">unseq</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="read_hermesVR_AllCCF-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="read_hermesVR_AllCCF-expanded"><a name="L600"></a><tt class="py-lineno"> 600</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L601"></a><tt class="py-lineno"> 601</tt>  <tt class="py-line"><tt class="py-docstring">    Read the AllCCF.fits files written by hermesVR with the individual cross</tt> </tt>
<a name="L602"></a><tt class="py-lineno"> 602</tt>  <tt class="py-line"><tt class="py-docstring">    correlation functions of each order. The cross-correlation functions are stored</tt> </tt>
<a name="L603"></a><tt class="py-lineno"> 603</tt>  <tt class="py-line"><tt class="py-docstring">    in a HermesCCF object from which they can be requested.</tt> </tt>
<a name="L604"></a><tt class="py-lineno"> 604</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L605"></a><tt class="py-lineno"> 605</tt>  <tt class="py-line"><tt class="py-docstring">    You can read *_AllCCF.fits file by providing only the unique sequence number as</tt> </tt>
<a name="L606"></a><tt class="py-lineno"> 606</tt>  <tt class="py-line"><tt class="py-docstring">    an integer. In this case the file will be searched in the hermesDir/hermesAnalyses/ </tt> </tt>
<a name="L607"></a><tt class="py-lineno"> 607</tt>  <tt class="py-line"><tt class="py-docstring">    folder. You can also provide the complete filename instead as a string fx.</tt> </tt>
<a name="L608"></a><tt class="py-lineno"> 608</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L609"></a><tt class="py-lineno"> 609</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; read_hermesVR_AllCCF(457640)</tt> </tt>
<a name="L610"></a><tt class="py-lineno"> 610</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; read_hermesVR_AllCCF('/home/jorisv/hermesAnalysis/00457640_AllCCF.fits')</tt> </tt>
<a name="L611"></a><tt class="py-lineno"> 611</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L612"></a><tt class="py-lineno"> 612</tt>  <tt class="py-line"><tt class="py-docstring">    @param unseq: unique sequence number or filename to read</tt> </tt>
<a name="L613"></a><tt class="py-lineno"> 613</tt>  <tt class="py-line"><tt class="py-docstring">    @type unseq: int or str</tt> </tt>
<a name="L614"></a><tt class="py-lineno"> 614</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L615"></a><tt class="py-lineno"> 615</tt>  <tt class="py-line"><tt class="py-docstring">    @return: The cross correlation functions</tt> </tt>
<a name="L616"></a><tt class="py-lineno"> 616</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: HermesCCF object</tt> </tt>
<a name="L617"></a><tt class="py-lineno"> 617</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L618"></a><tt class="py-lineno"> 618</tt>  <tt class="py-line">     </tt>
<a name="L619"></a><tt class="py-lineno"> 619</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">type</tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt> <tt class="py-op">==</tt> <tt class="py-name">int</tt><tt class="py-op">:</tt> </tt>
<a name="L620"></a><tt class="py-lineno"> 620</tt>  <tt class="py-line">        <tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt id="link-73" class="py-name"><a title="ivs.catalogs.hermes.hermesDir" class="py-name" href="#" onclick="return doclink('link-73', 'hermesDir', 'link-25');">hermesDir</a></tt> <tt class="py-op">+</tt> <tt class="py-string">'hermesAnalyses/*{:.0f}_AllCCF.fits'</tt><tt class="py-op">.</tt><tt id="link-74" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-74', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt> </tt>
<a name="L621"></a><tt class="py-lineno"> 621</tt>  <tt class="py-line">        <tt id="link-75" class="py-name" targets="Variable ivs.makedoc.files=ivs.makedoc-module.html#files"><a title="ivs.makedoc.files" class="py-name" href="#" onclick="return doclink('link-75', 'files', 'link-75');">files</a></tt> <tt class="py-op">=</tt> <tt id="link-76" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-76', 'glob', 'link-0');">glob</a></tt><tt class="py-op">.</tt><tt id="link-77" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-77', 'glob', 'link-0');">glob</a></tt><tt class="py-op">(</tt> <tt class="py-name">filename</tt> <tt class="py-op">)</tt> </tt>
<a name="L622"></a><tt class="py-lineno"> 622</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt id="link-78" class="py-name"><a title="ivs.makedoc.files" class="py-name" href="#" onclick="return doclink('link-78', 'files', 'link-75');">files</a></tt><tt class="py-op">)</tt> <tt class="py-op">&gt;</tt> <tt class="py-number">0</tt><tt class="py-op">:</tt> </tt>
<a name="L623"></a><tt class="py-lineno"> 623</tt>  <tt class="py-line">            <tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt id="link-79" class="py-name"><a title="ivs.makedoc.files" class="py-name" href="#" onclick="return doclink('link-79', 'files', 'link-75');">files</a></tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt> </tt>
<a name="L624"></a><tt class="py-lineno"> 624</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L625"></a><tt class="py-lineno"> 625</tt>  <tt class="py-line">        <tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt class="py-name">unseq</tt> </tt>
<a name="L626"></a><tt class="py-lineno"> 626</tt>  <tt class="py-line">         </tt>
<a name="L627"></a><tt class="py-lineno"> 627</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isfile</tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L628"></a><tt class="py-lineno"> 628</tt>  <tt class="py-line">        <tt id="link-80" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-80', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">warning</tt><tt class="py-op">(</tt><tt class="py-string">"Filename ''{:}'' is NOT valid!, returning empty object"</tt><tt class="py-op">.</tt><tt id="link-81" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-81', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L629"></a><tt class="py-lineno"> 629</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-82" class="py-name" targets="Class ivs.catalogs.hermes.HermesCCF=ivs.catalogs.hermes.HermesCCF-class.html"><a title="ivs.catalogs.hermes.HermesCCF" class="py-name" href="#" onclick="return doclink('link-82', 'HermesCCF', 'link-82');">HermesCCF</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt> </tt>
<a name="L630"></a><tt class="py-lineno"> 630</tt>  <tt class="py-line">     </tt>
<a name="L631"></a><tt class="py-lineno"> 631</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-83" class="py-name"><a title="ivs.catalogs.hermes.HermesCCF" class="py-name" href="#" onclick="return doclink('link-83', 'HermesCCF', 'link-82');">HermesCCF</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">=</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt> </tt>
</div><a name="L632"></a><tt class="py-lineno"> 632</tt>  <tt class="py-line"> </tt>
<a name="write_hermesConfig"></a><div id="write_hermesConfig-def"><a name="L633"></a><tt class="py-lineno"> 633</tt> <a class="py-toggle" href="#" id="write_hermesConfig-toggle" onclick="return toggle('write_hermesConfig');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#write_hermesConfig">write_hermesConfig</a><tt class="py-op">(</tt><tt class="py-op">**</tt><tt class="py-param">kwargs</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="write_hermesConfig-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="write_hermesConfig-expanded"><a name="L634"></a><tt class="py-lineno"> 634</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L635"></a><tt class="py-lineno"> 635</tt>  <tt class="py-line"><tt class="py-docstring">    Update the hermesConfig.xml file with the specified keywords. This method will</tt> </tt>
<a name="L636"></a><tt class="py-lineno"> 636</tt>  <tt class="py-line"><tt class="py-docstring">    return the original content of the file as a dictionary. You can use that dict</tt> </tt>
<a name="L637"></a><tt class="py-lineno"> 637</tt>  <tt class="py-line"><tt class="py-docstring">    as an argument to this function if you want to restore the hermesConfig file to</tt> </tt>
<a name="L638"></a><tt class="py-lineno"> 638</tt>  <tt class="py-line"><tt class="py-docstring">    the original state.</tt> </tt>
<a name="L639"></a><tt class="py-lineno"> 639</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L640"></a><tt class="py-lineno"> 640</tt>  <tt class="py-line"><tt class="py-docstring">    write_hermesConfig will search for hermesConfig.xml in hermesDir/hermesRun/ </tt> </tt>
<a name="L641"></a><tt class="py-lineno"> 641</tt>  <tt class="py-line"><tt class="py-docstring">    unless a path is specified in the kwarg filename.</tt> </tt>
<a name="L642"></a><tt class="py-lineno"> 642</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L643"></a><tt class="py-lineno"> 643</tt>  <tt class="py-line"><tt class="py-docstring">    example use:</tt> </tt>
<a name="L644"></a><tt class="py-lineno"> 644</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L645"></a><tt class="py-lineno"> 645</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; old = write_hermesConfig(CurrentNight="/STER/mercator/hermes/20101214")</tt> </tt>
<a name="L646"></a><tt class="py-lineno"> 646</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; " Do some stuff "</tt> </tt>
<a name="L647"></a><tt class="py-lineno"> 647</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; write_hermesConfig(**old)</tt> </tt>
<a name="L648"></a><tt class="py-lineno"> 648</tt>  <tt class="py-line"><tt class="py-docstring">   </tt> </tt>
<a name="L649"></a><tt class="py-lineno"> 649</tt>  <tt class="py-line"><tt class="py-docstring">    @attention: This function does not check the validity of the keywords that you</tt> </tt>
<a name="L650"></a><tt class="py-lineno"> 650</tt>  <tt class="py-line"><tt class="py-docstring">    provide, that is your own responsibility. </tt> </tt>
<a name="L651"></a><tt class="py-lineno"> 651</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L652"></a><tt class="py-lineno"> 652</tt>  <tt class="py-line"><tt class="py-docstring">    @param filename: complete path to the hermesConfig.xml file</tt> </tt>
<a name="L653"></a><tt class="py-lineno"> 653</tt>  <tt class="py-line"><tt class="py-docstring">    @type filename: str</tt> </tt>
<a name="L654"></a><tt class="py-lineno"> 654</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L655"></a><tt class="py-lineno"> 655</tt>  <tt class="py-line"><tt class="py-docstring">    @return: The original content of hermesConfig.xml before modification.</tt> </tt>
<a name="L656"></a><tt class="py-lineno"> 656</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: dict</tt> </tt>
<a name="L657"></a><tt class="py-lineno"> 657</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L658"></a><tt class="py-lineno"> 658</tt>  <tt class="py-line">     </tt>
<a name="L659"></a><tt class="py-lineno"> 659</tt>  <tt class="py-line">    <tt class="py-name">config_file</tt> <tt class="py-op">=</tt> <tt class="py-name">kwargs</tt><tt class="py-op">.</tt><tt id="link-84" class="py-name"><a title="ivs.io.database.Database.pop" class="py-name" href="#" onclick="return doclink('link-84', 'pop', 'link-68');">pop</a></tt><tt class="py-op">(</tt><tt class="py-string">'filename'</tt><tt class="py-op">,</tt> <tt id="link-85" class="py-name"><a title="ivs.catalogs.hermes.hermesDir" class="py-name" href="#" onclick="return doclink('link-85', 'hermesDir', 'link-25');">hermesDir</a></tt> <tt class="py-op">+</tt> <tt class="py-string">'hermesRun/hermesConfig.xml'</tt><tt class="py-op">)</tt> </tt>
<a name="L660"></a><tt class="py-lineno"> 660</tt>  <tt class="py-line">     </tt>
<a name="L661"></a><tt class="py-lineno"> 661</tt>  <tt class="py-line">    <tt class="py-comment">#-- read current config file to dictionary</tt> </tt>
<a name="L662"></a><tt class="py-lineno"> 662</tt>  <tt class="py-line">    <tt class="py-name">old_config</tt> <tt class="py-op">=</tt> <tt id="link-86" class="py-name" targets="Function ivs.catalogs.hermes._etree_to_dict()=ivs.catalogs.hermes-module.html#_etree_to_dict"><a title="ivs.catalogs.hermes._etree_to_dict" class="py-name" href="#" onclick="return doclink('link-86', '_etree_to_dict', 'link-86');">_etree_to_dict</a></tt><tt class="py-op">(</tt> <tt class="py-name">ET</tt><tt class="py-op">.</tt><tt id="link-87" class="py-name" targets="Function ivs.aux.argkwargparser.parse()=ivs.aux.argkwargparser-module.html#parse"><a title="ivs.aux.argkwargparser.parse" class="py-name" href="#" onclick="return doclink('link-87', 'parse', 'link-87');">parse</a></tt><tt class="py-op">(</tt><tt class="py-name">config_file</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">getroot</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-op">)</tt><tt class="py-op">[</tt><tt class="py-string">'hermes'</tt><tt class="py-op">]</tt> </tt>
<a name="L663"></a><tt class="py-lineno"> 663</tt>  <tt class="py-line">     </tt>
<a name="L664"></a><tt class="py-lineno"> 664</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">kwargs</tt><tt class="py-op">.</tt><tt class="py-name">keys</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> <tt class="py-op">==</tt> <tt class="py-number">0.0</tt><tt class="py-op">:</tt> </tt>
<a name="L665"></a><tt class="py-lineno"> 665</tt>  <tt class="py-line">        <tt id="link-88" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-88', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Nothing written to hermesConfig.xml, returning current config.'</tt><tt class="py-op">)</tt> </tt>
<a name="L666"></a><tt class="py-lineno"> 666</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">old_config</tt> </tt>
<a name="L667"></a><tt class="py-lineno"> 667</tt>  <tt class="py-line">     </tt>
<a name="L668"></a><tt class="py-lineno"> 668</tt>  <tt class="py-line">    <tt class="py-comment">#-- update the config dictionary</tt> </tt>
<a name="L669"></a><tt class="py-lineno"> 669</tt>  <tt class="py-line">    <tt class="py-name">new_config</tt> <tt class="py-op">=</tt> <tt id="link-89" class="py-name"><a title="ivs.statistics.linearregression.LinearModel.copy" class="py-name" href="#" onclick="return doclink('link-89', 'copy', 'link-1');">copy</a></tt><tt class="py-op">.</tt><tt class="py-name">deepcopy</tt><tt class="py-op">(</tt><tt class="py-name">old_config</tt><tt class="py-op">)</tt> </tt>
<a name="L670"></a><tt class="py-lineno"> 670</tt>  <tt class="py-line">    <tt class="py-name">new_config</tt><tt class="py-op">.</tt><tt id="link-90" class="py-name" targets="Method ivs.aux.progressMeter.ProgressMeter.update()=ivs.aux.progressMeter.ProgressMeter-class.html#update,Method ivs.io.database.Database.update()=ivs.io.database.Database-class.html#update"><a title="ivs.aux.progressMeter.ProgressMeter.update
ivs.io.database.Database.update" class="py-name" href="#" onclick="return doclink('link-90', 'update', 'link-90');">update</a></tt><tt class="py-op">(</tt><tt class="py-name">kwargs</tt><tt class="py-op">)</tt> </tt>
<a name="L671"></a><tt class="py-lineno"> 671</tt>  <tt class="py-line">     </tt>
<a name="L672"></a><tt class="py-lineno"> 672</tt>  <tt class="py-line">    <tt id="link-91" class="py-name" targets="Module ivs.catalogs.hermes=ivs.catalogs.hermes-module.html"><a title="ivs.catalogs.hermes" class="py-name" href="#" onclick="return doclink('link-91', 'hermes', 'link-91');">hermes</a></tt> <tt class="py-op">=</tt> <tt class="py-name">etree</tt><tt class="py-op">.</tt><tt class="py-name">Element</tt><tt class="py-op">(</tt><tt class="py-string">"hermes"</tt><tt class="py-op">)</tt> </tt>
<a name="L673"></a><tt class="py-lineno"> 673</tt>  <tt class="py-line">    <tt class="py-keyword">for</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-name">new_config</tt><tt class="py-op">.</tt><tt class="py-name">keys</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L674"></a><tt class="py-lineno"> 674</tt>  <tt class="py-line">        <tt class="py-name">child</tt> <tt class="py-op">=</tt> <tt class="py-name">etree</tt><tt class="py-op">.</tt><tt class="py-name">SubElement</tt><tt class="py-op">(</tt><tt id="link-92" class="py-name"><a title="ivs.catalogs.hermes" class="py-name" href="#" onclick="return doclink('link-92', 'hermes', 'link-91');">hermes</a></tt><tt class="py-op">,</tt> <tt class="py-name">key</tt><tt class="py-op">)</tt> </tt>
<a name="L675"></a><tt class="py-lineno"> 675</tt>  <tt class="py-line">        <tt class="py-name">child</tt><tt class="py-op">.</tt><tt class="py-name">text</tt> <tt class="py-op">=</tt> <tt class="py-name">new_config</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt> </tt>
<a name="L676"></a><tt class="py-lineno"> 676</tt>  <tt class="py-line">     </tt>
<a name="L677"></a><tt class="py-lineno"> 677</tt>  <tt class="py-line">    <tt class="py-comment">#-- write to file</tt> </tt>
<a name="L678"></a><tt class="py-lineno"> 678</tt>  <tt class="py-line">    <tt class="py-name">out</tt> <tt class="py-op">=</tt> <tt class="py-name">etree</tt><tt class="py-op">.</tt><tt class="py-name">ElementTree</tt><tt class="py-op">(</tt><tt class="py-name">element</tt><tt class="py-op">=</tt><tt id="link-93" class="py-name"><a title="ivs.catalogs.hermes" class="py-name" href="#" onclick="return doclink('link-93', 'hermes', 'link-91');">hermes</a></tt><tt class="py-op">)</tt> </tt>
<a name="L679"></a><tt class="py-lineno"> 679</tt>  <tt class="py-line">    <tt class="py-name">out</tt><tt class="py-op">.</tt><tt id="link-94" class="py-name" targets="Method ivs.aux.decorators.LogPrinter.write()=ivs.aux.decorators.LogPrinter-class.html#write"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-94', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">config_file</tt><tt class="py-op">,</tt> <tt class="py-name">pretty_print</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L680"></a><tt class="py-lineno"> 680</tt>  <tt class="py-line">     </tt>
<a name="L681"></a><tt class="py-lineno"> 681</tt>  <tt class="py-line">    <tt id="link-95" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-95', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Written new hermesConfig to file:\n'</tt><tt class="py-op">+</tt><tt class="py-name">etree</tt><tt class="py-op">.</tt><tt class="py-name">tostring</tt><tt class="py-op">(</tt><tt id="link-96" class="py-name"><a title="ivs.catalogs.hermes" class="py-name" href="#" onclick="return doclink('link-96', 'hermes', 'link-91');">hermes</a></tt><tt class="py-op">,</tt> <tt class="py-name">pretty_print</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L682"></a><tt class="py-lineno"> 682</tt>  <tt class="py-line">     </tt>
<a name="L683"></a><tt class="py-lineno"> 683</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">old_config</tt> </tt>
</div><a name="L684"></a><tt class="py-lineno"> 684</tt>  <tt class="py-line">             </tt>
<a name="L685"></a><tt class="py-lineno"> 685</tt>  <tt class="py-line"> </tt>
<a name="L686"></a><tt class="py-lineno"> 686</tt>  <tt class="py-line"><tt class="py-comment">#}</tt> </tt>
<a name="L687"></a><tt class="py-lineno"> 687</tt>  <tt class="py-line"> </tt>
<a name="L688"></a><tt class="py-lineno"> 688</tt>  <tt class="py-line"><tt class="py-comment">#{ Hermes DRS wrappers</tt> </tt>
<a name="L689"></a><tt class="py-lineno"> 689</tt>  <tt class="py-line"> </tt>
<a name="run_hermesVR"></a><div id="run_hermesVR-def"><a name="L690"></a><tt class="py-lineno"> 690</tt> <a class="py-toggle" href="#" id="run_hermesVR-toggle" onclick="return toggle('run_hermesVR');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#run_hermesVR">run_hermesVR</a><tt class="py-op">(</tt><tt class="py-param">filename</tt><tt class="py-op">,</tt> <tt class="py-param">mask_file</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt> <tt class="py-param">wvl_file</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt> <tt class="py-param">cosmic_clipping</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> </tt>
<a name="L691"></a><tt class="py-lineno"> 691</tt>  <tt class="py-line">                 <tt class="py-param">flatfield</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">,</tt> <tt class="py-param">vrange</tt><tt class="py-op">=</tt><tt class="py-string">'default'</tt><tt class="py-op">,</tt> <tt class="py-param">vrot</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">,</tt> <tt class="py-param">version</tt><tt class="py-op">=</tt><tt class="py-string">'release'</tt><tt class="py-op">,</tt> </tt>
<a name="L692"></a><tt class="py-lineno"> 692</tt>  <tt class="py-line">                 <tt class="py-param">verbose</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">,</tt> <tt class="py-param">timeout</tt><tt class="py-op">=</tt><tt class="py-number">500</tt><tt class="py-op">,</tt> <tt class="py-op">**</tt><tt class="py-param">kwargs</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="run_hermesVR-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="run_hermesVR-expanded"><a name="L693"></a><tt class="py-lineno"> 693</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L694"></a><tt class="py-lineno"> 694</tt>  <tt class="py-line"><tt class="py-docstring">    Wrapper around hermesVR that will run hermesVR on any given filename. Thus not on</tt> </tt>
<a name="L695"></a><tt class="py-lineno"> 695</tt>  <tt class="py-line"><tt class="py-docstring">    sequence number. This can be usefull if you first merge together 2 back-to-back </tt> </tt>
<a name="L696"></a><tt class="py-lineno"> 696</tt>  <tt class="py-line"><tt class="py-docstring">    spectra and then want to calculate the radial velocity of the merged spectrum.</tt> </tt>
<a name="L697"></a><tt class="py-lineno"> 697</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L698"></a><tt class="py-lineno"> 698</tt>  <tt class="py-line"><tt class="py-docstring">    The original file will not be modified, it is coppied to the tempDir, and the name</tt> </tt>
<a name="L699"></a><tt class="py-lineno"> 699</tt>  <tt class="py-line"><tt class="py-docstring">    will be changed according to the supplied flags. During the process hermesConfig.xml</tt> </tt>
<a name="L700"></a><tt class="py-lineno"> 700</tt>  <tt class="py-line"><tt class="py-docstring">    is adapted, but after hermesVR is finished, it is restored to its old state.</tt> </tt>
<a name="L701"></a><tt class="py-lineno"> 701</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L702"></a><tt class="py-lineno"> 702</tt>  <tt class="py-line"><tt class="py-docstring">    When providing a wavelength scale file, provide the full path, but cut off the </tt> </tt>
<a name="L703"></a><tt class="py-lineno"> 703</tt>  <tt class="py-line"><tt class="py-docstring">    '_HRF_TH_ext_wavelengthScale.fits' part of the filename. Thus if you want to use:</tt> </tt>
<a name="L704"></a><tt class="py-lineno"> 704</tt>  <tt class="py-line"><tt class="py-docstring">    '/folder/2451577_HRF_TH_ext_wavelengthScale.fits', use:</tt> </tt>
<a name="L705"></a><tt class="py-lineno"> 705</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L706"></a><tt class="py-lineno"> 706</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; run_hermesVR(filename, wvl_file = '/folder/2451577')</tt> </tt>
<a name="L707"></a><tt class="py-lineno"> 707</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L708"></a><tt class="py-lineno"> 708</tt>  <tt class="py-line"><tt class="py-docstring">    The results of hermesVR are saved to the standard paths, as provided in the</tt> </tt>
<a name="L709"></a><tt class="py-lineno"> 709</tt>  <tt class="py-line"><tt class="py-docstring">    hermesConfig file. This method only returns the unseq number of the filename</tt> </tt>
<a name="L710"></a><tt class="py-lineno"> 710</tt>  <tt class="py-line"><tt class="py-docstring">    so you can find the corresponding output file, the output of hermesVR as a </tt> </tt>
<a name="L711"></a><tt class="py-lineno"> 711</tt>  <tt class="py-line"><tt class="py-docstring">    string, and a unix return signal of running hermesVR. </tt> </tt>
<a name="L712"></a><tt class="py-lineno"> 712</tt>  <tt class="py-line"><tt class="py-docstring">    The returncode is 0 if no errors are found. Any negative number means hermesVR</tt> </tt>
<a name="L713"></a><tt class="py-lineno"> 713</tt>  <tt class="py-line"><tt class="py-docstring">    failed (codes can be consulted here:  U{unix signals </tt> </tt>
<a name="L714"></a><tt class="py-lineno"> 714</tt>  <tt class="py-line"><tt class="py-docstring">    &lt;http://people.cs.pitt.edu/~alanjawi/cs449/code/shell/UnixSignals.htm&gt;}).</tt> </tt>
<a name="L715"></a><tt class="py-lineno"> 715</tt>  <tt class="py-line"><tt class="py-docstring">    If returncode = -35, then hermesVR completed but didn't write any output. In</tt> </tt>
<a name="L716"></a><tt class="py-lineno"> 716</tt>  <tt class="py-line"><tt class="py-docstring">    this case consult the logs or string output to find out what went wrong.</tt> </tt>
<a name="L717"></a><tt class="py-lineno"> 717</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L718"></a><tt class="py-lineno"> 718</tt>  <tt class="py-line"><tt class="py-docstring">    @param filename: complete path to the input spectrum for hermesVR</tt> </tt>
<a name="L719"></a><tt class="py-lineno"> 719</tt>  <tt class="py-line"><tt class="py-docstring">    @type filename: str</tt> </tt>
<a name="L720"></a><tt class="py-lineno"> 720</tt>  <tt class="py-line"><tt class="py-docstring">    @param mask_file: complete path to the mask file to use or None</tt> </tt>
<a name="L721"></a><tt class="py-lineno"> 721</tt>  <tt class="py-line"><tt class="py-docstring">    @type mask_file: str</tt> </tt>
<a name="L722"></a><tt class="py-lineno"> 722</tt>  <tt class="py-line"><tt class="py-docstring">    @param wvl_file: path to wavelengthscale file or None</tt> </tt>
<a name="L723"></a><tt class="py-lineno"> 723</tt>  <tt class="py-line"><tt class="py-docstring">    @type wvl_file: str</tt> </tt>
<a name="L724"></a><tt class="py-lineno"> 724</tt>  <tt class="py-line"><tt class="py-docstring">    @param cosmic_clipping: Doesn't do anything for now</tt> </tt>
<a name="L725"></a><tt class="py-lineno"> 725</tt>  <tt class="py-line"><tt class="py-docstring">    @type cosmic_clipping: bool</tt> </tt>
<a name="L726"></a><tt class="py-lineno"> 726</tt>  <tt class="py-line"><tt class="py-docstring">    @param flatfield: Use flatfield devision or not</tt> </tt>
<a name="L727"></a><tt class="py-lineno"> 727</tt>  <tt class="py-line"><tt class="py-docstring">    @type flatfield: bool</tt> </tt>
<a name="L728"></a><tt class="py-lineno"> 728</tt>  <tt class="py-line"><tt class="py-docstring">    @param vrange: Size of velocity window ('default', 'large' (x2), 'xlarge' (x5))</tt> </tt>
<a name="L729"></a><tt class="py-lineno"> 729</tt>  <tt class="py-line"><tt class="py-docstring">    @type vrange: str</tt> </tt>
<a name="L730"></a><tt class="py-lineno"> 730</tt>  <tt class="py-line"><tt class="py-docstring">    @param vrot: Fit CCF with rotationaly broadend profile instead of gaussian</tt> </tt>
<a name="L731"></a><tt class="py-lineno"> 731</tt>  <tt class="py-line"><tt class="py-docstring">    @type vrot: bool</tt> </tt>
<a name="L732"></a><tt class="py-lineno"> 732</tt>  <tt class="py-line"><tt class="py-docstring">    @param version: which version of the pipeline to use: 'release' or 'trunk'</tt> </tt>
<a name="L733"></a><tt class="py-lineno"> 733</tt>  <tt class="py-line"><tt class="py-docstring">    @type version: str</tt> </tt>
<a name="L734"></a><tt class="py-lineno"> 734</tt>  <tt class="py-line"><tt class="py-docstring">    @param verbose: print output of hermesVR</tt> </tt>
<a name="L735"></a><tt class="py-lineno"> 735</tt>  <tt class="py-line"><tt class="py-docstring">    @type verbose: bool</tt> </tt>
<a name="L736"></a><tt class="py-lineno"> 736</tt>  <tt class="py-line"><tt class="py-docstring">    @param timeout: Maximum time hermesVR is allowed to run in seconds</tt> </tt>
<a name="L737"></a><tt class="py-lineno"> 737</tt>  <tt class="py-line"><tt class="py-docstring">    @type timeout: int</tt> </tt>
<a name="L738"></a><tt class="py-lineno"> 738</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L739"></a><tt class="py-lineno"> 739</tt>  <tt class="py-line"><tt class="py-docstring">    @return: unseq used, text output of hermesVR, unix return code</tt> </tt>
<a name="L740"></a><tt class="py-lineno"> 740</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: (int, str, int)</tt> </tt>
<a name="L741"></a><tt class="py-lineno"> 741</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L742"></a><tt class="py-lineno"> 742</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L743"></a><tt class="py-lineno"> 743</tt>  <tt class="py-line">    <tt class="py-comment">#-- Create running directory</tt> </tt>
<a name="L744"></a><tt class="py-lineno"> 744</tt>  <tt class="py-line">    <tt class="py-name">vrDir</tt> <tt class="py-op">=</tt> <tt id="link-97" class="py-name"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-97', 'tempDir', 'link-26');">tempDir</a></tt> <tt class="py-op">+</tt> <tt class="py-string">'hermesvr/'</tt> </tt>
<a name="L745"></a><tt class="py-lineno"> 745</tt>  <tt class="py-line">    <tt class="py-name">redDir</tt> <tt class="py-op">=</tt> <tt id="link-98" class="py-name"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-98', 'tempDir', 'link-26');">tempDir</a></tt> <tt class="py-op">+</tt> <tt class="py-string">'hermesvr/reduced/'</tt> </tt>
<a name="L746"></a><tt class="py-lineno"> 746</tt>  <tt class="py-line">    <tt class="py-name">delRedDir</tt><tt class="py-op">,</tt> <tt class="py-name">delVrDir</tt> <tt class="py-op">=</tt> <tt class="py-name">False</tt><tt class="py-op">,</tt> <tt class="py-name">False</tt> </tt>
<a name="L747"></a><tt class="py-lineno"> 747</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isdir</tt><tt class="py-op">(</tt><tt class="py-name">vrDir</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L748"></a><tt class="py-lineno"> 748</tt>  <tt class="py-line">        <tt class="py-name">delVrDir</tt> <tt class="py-op">=</tt> <tt class="py-name">True</tt> </tt>
<a name="L749"></a><tt class="py-lineno"> 749</tt>  <tt class="py-line">        <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">mkdir</tt><tt class="py-op">(</tt><tt class="py-name">vrDir</tt><tt class="py-op">)</tt> </tt>
<a name="L750"></a><tt class="py-lineno"> 750</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isdir</tt><tt class="py-op">(</tt><tt class="py-name">redDir</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L751"></a><tt class="py-lineno"> 751</tt>  <tt class="py-line">        <tt class="py-name">delRedDir</tt> <tt class="py-op">=</tt> <tt class="py-name">True</tt> </tt>
<a name="L752"></a><tt class="py-lineno"> 752</tt>  <tt class="py-line">        <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">mkdir</tt><tt class="py-op">(</tt><tt class="py-name">redDir</tt><tt class="py-op">)</tt> </tt>
<a name="L753"></a><tt class="py-lineno"> 753</tt>  <tt class="py-line">     </tt>
<a name="L754"></a><tt class="py-lineno"> 754</tt>  <tt class="py-line">    <tt class="py-comment">#-- Get unseq.</tt> </tt>
<a name="L755"></a><tt class="py-lineno"> 755</tt>  <tt class="py-line">    <tt class="py-name">header</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getheader</tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt> </tt>
<a name="L756"></a><tt class="py-lineno"> 756</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-string">'unseq'</tt> <tt class="py-keyword">in</tt> <tt class="py-name">kwargs</tt><tt class="py-op">:</tt> </tt>
<a name="L757"></a><tt class="py-lineno"> 757</tt>  <tt class="py-line">        <tt class="py-name">unseq</tt> <tt class="py-op">=</tt> <tt class="py-name">kwargs</tt><tt class="py-op">.</tt><tt id="link-99" class="py-name"><a title="ivs.io.database.Database.pop" class="py-name" href="#" onclick="return doclink('link-99', 'pop', 'link-68');">pop</a></tt><tt class="py-op">(</tt><tt class="py-string">'unseq'</tt><tt class="py-op">)</tt> </tt>
<a name="L758"></a><tt class="py-lineno"> 758</tt>  <tt class="py-line">        <tt id="link-100" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-100', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Using provided sequence number: {:}'</tt><tt class="py-op">.</tt><tt id="link-101" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-101', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L759"></a><tt class="py-lineno"> 759</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-string">'unseq'</tt> <tt class="py-keyword">in</tt> <tt class="py-name">header</tt><tt class="py-op">:</tt> </tt>
<a name="L760"></a><tt class="py-lineno"> 760</tt>  <tt class="py-line">        <tt class="py-name">unseq</tt> <tt class="py-op">=</tt> <tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt> </tt>
<a name="L761"></a><tt class="py-lineno"> 761</tt>  <tt class="py-line">        <tt id="link-102" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-102', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Using sequence number from fits header: {:}'</tt><tt class="py-op">.</tt><tt id="link-103" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-103', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L762"></a><tt class="py-lineno"> 762</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L763"></a><tt class="py-lineno"> 763</tt>  <tt class="py-line">        <tt class="py-name">unseq</tt> <tt class="py-op">=</tt> <tt class="py-number">1</tt> </tt>
<a name="L764"></a><tt class="py-lineno"> 764</tt>  <tt class="py-line">        <tt id="link-104" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-104', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Using default sequence number: {:}'</tt><tt class="py-op">.</tt><tt id="link-105" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-105', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L765"></a><tt class="py-lineno"> 765</tt>  <tt class="py-line">     </tt>
<a name="L766"></a><tt class="py-lineno"> 766</tt>  <tt class="py-line">    <tt class="py-comment">#-- Construct filename and copy</tt> </tt>
<a name="L767"></a><tt class="py-lineno"> 767</tt>  <tt class="py-line">    <tt class="py-name">vrFile</tt> <tt class="py-op">=</tt> <tt class="py-name">redDir</tt><tt class="py-op">+</tt> <tt class="py-string">'{:.0f}_HRF_OBJ_ext.fits'</tt><tt class="py-op">.</tt><tt id="link-106" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-106', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt> </tt>
<a name="L768"></a><tt class="py-lineno"> 768</tt>  <tt class="py-line">    <tt class="py-name">shutil</tt><tt class="py-op">.</tt><tt class="py-name">copyfile</tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">,</tt> <tt class="py-name">vrFile</tt> <tt class="py-op">)</tt> </tt>
<a name="L769"></a><tt class="py-lineno"> 769</tt>  <tt class="py-line">    <tt id="link-107" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-107', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Coppied input file to: {:}'</tt><tt class="py-op">.</tt><tt id="link-108" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-108', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">vrFile</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L770"></a><tt class="py-lineno"> 770</tt>  <tt class="py-line">     </tt>
<a name="L771"></a><tt class="py-lineno"> 771</tt>  <tt class="py-line">    <tt class="py-comment">#-- Which version to use and update hermesConfig:</tt> </tt>
<a name="L772"></a><tt class="py-lineno"> 772</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">version</tt> <tt class="py-op">==</tt> <tt class="py-string">'release'</tt><tt class="py-op">:</tt> </tt>
<a name="L773"></a><tt class="py-lineno"> 773</tt>  <tt class="py-line">        <tt id="link-109" class="py-name" targets="Variable ivs.makedoc.cmd=ivs.makedoc-module.html#cmd"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-109', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">=</tt> <tt class="py-string">'python /STER/mercator/mercator/Hermes/releases/hermes5/pipeline/run/hermesVR.py'</tt> </tt>
<a name="L774"></a><tt class="py-lineno"> 774</tt>  <tt class="py-line">        <tt class="py-name">oldConfig</tt> <tt class="py-op">=</tt> <tt id="link-110" class="py-name" targets="Function ivs.catalogs.hermes.write_hermesConfig()=ivs.catalogs.hermes-module.html#write_hermesConfig"><a title="ivs.catalogs.hermes.write_hermesConfig" class="py-name" href="#" onclick="return doclink('link-110', 'write_hermesConfig', 'link-110');">write_hermesConfig</a></tt><tt class="py-op">(</tt><tt class="py-name">Nights</tt><tt class="py-op">=</tt><tt id="link-111" class="py-name"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-111', 'tempDir', 'link-26');">tempDir</a></tt><tt class="py-op">,</tt> <tt class="py-name">CurrentNight</tt><tt class="py-op">=</tt><tt class="py-name">vrDir</tt><tt class="py-op">,</tt> <tt class="py-name">Reduced</tt><tt class="py-op">=</tt><tt id="link-112" class="py-name"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-112', 'tempDir', 'link-26');">tempDir</a></tt><tt class="py-op">)</tt> </tt>
<a name="L775"></a><tt class="py-lineno"> 775</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L776"></a><tt class="py-lineno"> 776</tt>  <tt class="py-line">        <tt id="link-113" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-113', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">=</tt> <tt class="py-string">'python /STER/mercator/mercator/Hermes/trunk/hermes/pipeline/run/hermesVR.py'</tt> </tt>
<a name="L777"></a><tt class="py-lineno"> 777</tt>  <tt class="py-line">        <tt class="py-name">oldConfig</tt> <tt class="py-op">=</tt> <tt id="link-114" class="py-name"><a title="ivs.catalogs.hermes.write_hermesConfig" class="py-name" href="#" onclick="return doclink('link-114', 'write_hermesConfig', 'link-110');">write_hermesConfig</a></tt><tt class="py-op">(</tt><tt class="py-name">Nights</tt><tt class="py-op">=</tt><tt class="py-name">vrDir</tt><tt class="py-op">,</tt> <tt class="py-name">CurrentNight</tt><tt class="py-op">=</tt><tt class="py-name">vrDir</tt><tt class="py-op">,</tt> <tt class="py-name">Reduced</tt><tt class="py-op">=</tt><tt id="link-115" class="py-name"><a title="ivs.catalogs.hermes.tempDir" class="py-name" href="#" onclick="return doclink('link-115', 'tempDir', 'link-26');">tempDir</a></tt><tt class="py-op">)</tt> </tt>
<a name="L778"></a><tt class="py-lineno"> 778</tt>  <tt class="py-line">     </tt>
<a name="L779"></a><tt class="py-lineno"> 779</tt>  <tt class="py-line">    <tt class="py-comment">#-- Delete old hermesVR results so it is possible to check if hermesVR completed</tt> </tt>
<a name="L780"></a><tt class="py-lineno"> 780</tt>  <tt class="py-line">    <tt class="py-name">hermesOutput</tt> <tt class="py-op">=</tt> <tt class="py-name">oldConfig</tt><tt class="py-op">[</tt><tt class="py-string">'AnalysesResults'</tt><tt class="py-op">]</tt> <tt class="py-op">+</tt> <tt class="py-string">"/{:.0f}_AllCCF.data"</tt><tt class="py-op">.</tt><tt id="link-116" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-116', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt> </tt>
<a name="L781"></a><tt class="py-lineno"> 781</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isfile</tt><tt class="py-op">(</tt><tt class="py-name">hermesOutput</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L782"></a><tt class="py-lineno"> 782</tt>  <tt class="py-line">        <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">remove</tt><tt class="py-op">(</tt><tt class="py-name">hermesOutput</tt><tt class="py-op">)</tt> </tt>
<a name="L783"></a><tt class="py-lineno"> 783</tt>  <tt class="py-line">        <tt id="link-117" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-117', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Removing existing hermesRV result: {:}'</tt><tt class="py-op">.</tt><tt id="link-118" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-118', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">hermesOutput</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L784"></a><tt class="py-lineno"> 784</tt>  <tt class="py-line">     </tt>
<a name="L785"></a><tt class="py-lineno"> 785</tt>  <tt class="py-line">    <tt class="py-comment">#-- Create command and run hermesVR</tt> </tt>
<a name="L786"></a><tt class="py-lineno"> 786</tt>  <tt class="py-line">    <tt class="py-name">runError</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L787"></a><tt class="py-lineno"> 787</tt>  <tt class="py-line">    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L788"></a><tt class="py-lineno"> 788</tt>  <tt class="py-line">        <tt id="link-119" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-119', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -i {:.0f}"</tt><tt class="py-op">.</tt><tt id="link-120" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-120', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">)</tt> </tt>
<a name="L789"></a><tt class="py-lineno"> 789</tt>  <tt class="py-line">         </tt>
<a name="L790"></a><tt class="py-lineno"> 790</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">mask_file</tt><tt class="py-op">:</tt> </tt>
<a name="L791"></a><tt class="py-lineno"> 791</tt>  <tt class="py-line">            <tt id="link-121" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-121', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -m {:}"</tt><tt class="py-op">.</tt><tt id="link-122" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-122', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">mask_file</tt><tt class="py-op">)</tt> </tt>
<a name="L792"></a><tt class="py-lineno"> 792</tt>  <tt class="py-line">             </tt>
<a name="L793"></a><tt class="py-lineno"> 793</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">wvl_file</tt><tt class="py-op">:</tt> </tt>
<a name="L794"></a><tt class="py-lineno"> 794</tt>  <tt class="py-line">            <tt id="link-123" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-123', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -w {:}"</tt><tt class="py-op">.</tt><tt id="link-124" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-124', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">wvl_file</tt><tt class="py-op">)</tt> </tt>
<a name="L795"></a><tt class="py-lineno"> 795</tt>  <tt class="py-line">             </tt>
<a name="L796"></a><tt class="py-lineno"> 796</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">flatfield</tt> <tt class="py-keyword">and</tt> <tt class="py-name">version</tt><tt class="py-op">==</tt><tt class="py-string">'release'</tt> <tt class="py-keyword">or</tt> <tt class="py-keyword">not</tt> <tt class="py-name">flatfield</tt> <tt class="py-keyword">and</tt> <tt class="py-name">version</tt><tt class="py-op">==</tt><tt class="py-string">'trunk'</tt><tt class="py-op">:</tt> </tt>
<a name="L797"></a><tt class="py-lineno"> 797</tt>  <tt class="py-line">            <tt id="link-125" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-125', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -f"</tt> </tt>
<a name="L798"></a><tt class="py-lineno"> 798</tt>  <tt class="py-line">         </tt>
<a name="L799"></a><tt class="py-lineno"> 799</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">vrange</tt> <tt class="py-op">==</tt> <tt class="py-string">'large'</tt><tt class="py-op">:</tt> </tt>
<a name="L800"></a><tt class="py-lineno"> 800</tt>  <tt class="py-line">            <tt id="link-126" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-126', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -L"</tt> </tt>
<a name="L801"></a><tt class="py-lineno"> 801</tt>  <tt class="py-line">        <tt class="py-keyword">elif</tt> <tt class="py-name">vrange</tt> <tt class="py-op">==</tt> <tt class="py-string">'xlarge'</tt><tt class="py-op">:</tt> </tt>
<a name="L802"></a><tt class="py-lineno"> 802</tt>  <tt class="py-line">            <tt id="link-127" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-127', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -LL"</tt> </tt>
<a name="L803"></a><tt class="py-lineno"> 803</tt>  <tt class="py-line">         </tt>
<a name="L804"></a><tt class="py-lineno"> 804</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">vrot</tt> <tt class="py-keyword">and</tt> <tt class="py-name">version</tt> <tt class="py-op">==</tt> <tt class="py-string">'trunk'</tt><tt class="py-op">:</tt> </tt>
<a name="L805"></a><tt class="py-lineno"> 805</tt>  <tt class="py-line">            <tt id="link-128" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-128', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">" -ROT"</tt> </tt>
<a name="L806"></a><tt class="py-lineno"> 806</tt>  <tt class="py-line">         </tt>
<a name="L807"></a><tt class="py-lineno"> 807</tt>  <tt class="py-line">        <tt class="py-comment"># RUN</tt> </tt>
<a name="L808"></a><tt class="py-lineno"> 808</tt>  <tt class="py-line">        <tt id="link-129" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-129', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'running hermesVR {:} version, with command:\n\t{:}'</tt><tt class="py-op">.</tt><tt id="link-130" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-130', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">version</tt><tt class="py-op">,</tt> <tt id="link-131" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-131', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L809"></a><tt class="py-lineno"> 809</tt>  <tt class="py-line">        <tt class="py-name">out</tt><tt class="py-op">,</tt> <tt class="py-name">err</tt><tt class="py-op">,</tt> <tt class="py-name">returncode</tt> <tt class="py-op">=</tt> <tt id="link-132" class="py-name" targets="Function ivs.catalogs.hermes._subprocess_execute()=ivs.catalogs.hermes-module.html#_subprocess_execute"><a title="ivs.catalogs.hermes._subprocess_execute" class="py-name" href="#" onclick="return doclink('link-132', '_subprocess_execute', 'link-132');">_subprocess_execute</a></tt><tt class="py-op">(</tt><tt id="link-133" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-133', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> <tt class="py-name">timeout</tt><tt class="py-op">)</tt> </tt>
<a name="L810"></a><tt class="py-lineno"> 810</tt>  <tt class="py-line">         </tt>
<a name="L811"></a><tt class="py-lineno"> 811</tt>  <tt class="py-line">        <tt class="py-comment"># Error Handling</tt> </tt>
<a name="L812"></a><tt class="py-lineno"> 812</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">returncode</tt> <tt class="py-op">==</tt> <tt class="py-op">-</tt><tt class="py-number">1</tt><tt class="py-op">:</tt> </tt>
<a name="L813"></a><tt class="py-lineno"> 813</tt>  <tt class="py-line">            <tt id="link-134" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-134', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">warning</tt><tt class="py-op">(</tt><tt class="py-string">'Timeout, hermesVR was terminated after'</tt> \ </tt>
<a name="L814"></a><tt class="py-lineno"> 814</tt>  <tt class="py-line">                           <tt class="py-op">+</tt><tt class="py-string">' {:.0f}s'</tt><tt class="py-op">.</tt><tt id="link-135" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-135', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">timeout</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L815"></a><tt class="py-lineno"> 815</tt>  <tt class="py-line">        <tt class="py-keyword">elif</tt> <tt class="py-name">returncode</tt> <tt class="py-op">&lt;</tt> <tt class="py-number">0</tt><tt class="py-op">:</tt> </tt>
<a name="L816"></a><tt class="py-lineno"> 816</tt>  <tt class="py-line">            <tt id="link-136" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-136', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">warning</tt><tt class="py-op">(</tt><tt class="py-string">'hermesVR terminated with signal: '</tt> \ </tt>
<a name="L817"></a><tt class="py-lineno"> 817</tt>  <tt class="py-line">                           <tt class="py-op">+</tt><tt class="py-string">' {:.0f}s'</tt><tt class="py-op">.</tt><tt id="link-137" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-137', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">abs</tt><tt class="py-op">(</tt><tt class="py-name">returncode</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L818"></a><tt class="py-lineno"> 818</tt>  <tt class="py-line">        <tt class="py-keyword">elif</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isfile</tt><tt class="py-op">(</tt><tt class="py-name">hermesOutput</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L819"></a><tt class="py-lineno"> 819</tt>  <tt class="py-line">            <tt id="link-138" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-138', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">warning</tt><tt class="py-op">(</tt><tt class="py-string">'hermesVR finished but did not succeed, check log for details'</tt><tt class="py-op">)</tt> </tt>
<a name="L820"></a><tt class="py-lineno"> 820</tt>  <tt class="py-line">            <tt class="py-name">returncode</tt> <tt class="py-op">=</tt> <tt class="py-op">-</tt><tt class="py-number">35</tt> </tt>
<a name="L821"></a><tt class="py-lineno"> 821</tt>  <tt class="py-line">            <tt id="link-139" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-139', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-name">out</tt><tt class="py-op">)</tt> </tt>
<a name="L822"></a><tt class="py-lineno"> 822</tt>  <tt class="py-line">             </tt>
<a name="L823"></a><tt class="py-lineno"> 823</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">verbose</tt><tt class="py-op">:</tt> <tt class="py-keyword">print</tt> <tt class="py-name">out</tt> </tt>
<a name="L824"></a><tt class="py-lineno"> 824</tt>  <tt class="py-line">     </tt>
<a name="L825"></a><tt class="py-lineno"> 825</tt>  <tt class="py-line">    <tt class="py-keyword">except</tt> <tt class="py-name">Exception</tt><tt class="py-op">,</tt> <tt class="py-name">e</tt><tt class="py-op">:</tt> </tt>
<a name="L826"></a><tt class="py-lineno"> 826</tt>  <tt class="py-line">        <tt class="py-name">runError</tt> <tt class="py-op">=</tt> <tt class="py-name">e</tt> </tt>
<a name="L827"></a><tt class="py-lineno"> 827</tt>  <tt class="py-line">     </tt>
<a name="L828"></a><tt class="py-lineno"> 828</tt>  <tt class="py-line">    <tt class="py-comment">#-- restore hermesConfig and delete coppied files</tt> </tt>
<a name="L829"></a><tt class="py-lineno"> 829</tt>  <tt class="py-line">    <tt id="link-140" class="py-name"><a title="ivs.catalogs.hermes.write_hermesConfig" class="py-name" href="#" onclick="return doclink('link-140', 'write_hermesConfig', 'link-110');">write_hermesConfig</a></tt><tt class="py-op">(</tt><tt class="py-op">**</tt><tt class="py-name">oldConfig</tt><tt class="py-op">)</tt> </tt>
<a name="L830"></a><tt class="py-lineno"> 830</tt>  <tt class="py-line">    <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">remove</tt><tt class="py-op">(</tt><tt class="py-name">vrFile</tt><tt class="py-op">)</tt> </tt>
<a name="L831"></a><tt class="py-lineno"> 831</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">delRedDir</tt><tt class="py-op">:</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">rmdir</tt><tt class="py-op">(</tt><tt class="py-name">redDir</tt><tt class="py-op">)</tt> </tt>
<a name="L832"></a><tt class="py-lineno"> 832</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">delVrDir</tt><tt class="py-op">:</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">rmdir</tt><tt class="py-op">(</tt><tt class="py-name">vrDir</tt><tt class="py-op">)</tt> </tt>
<a name="L833"></a><tt class="py-lineno"> 833</tt>  <tt class="py-line">     </tt>
<a name="L834"></a><tt class="py-lineno"> 834</tt>  <tt class="py-line">    <tt class="py-comment">#-- Now raise possible errors</tt> </tt>
<a name="L835"></a><tt class="py-lineno"> 835</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">runError</tt><tt class="py-op">:</tt> <tt class="py-keyword">raise</tt> <tt class="py-name">runError</tt> </tt>
<a name="L836"></a><tt class="py-lineno"> 836</tt>  <tt class="py-line">     </tt>
<a name="L837"></a><tt class="py-lineno"> 837</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">unseq</tt><tt class="py-op">,</tt> <tt class="py-name">out</tt><tt class="py-op">,</tt> <tt class="py-name">returncode</tt> </tt>
</div><a name="L838"></a><tt class="py-lineno"> 838</tt>  <tt class="py-line"> </tt>
<a name="CCFList"></a><div id="CCFList-def"><a name="L839"></a><tt class="py-lineno"> 839</tt> <a class="py-toggle" href="#" id="CCFList-toggle" onclick="return toggle('CCFList');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#CCFList">CCFList</a><tt class="py-op">(</tt><tt class="py-param">ID</tt><tt class="py-op">,</tt><tt class="py-param">config_dir</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">out_dir</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">mask_file</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">,</tt><tt class="py-param">cosmic_clipping</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt><tt class="py-param">flatfield</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="CCFList-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="CCFList-expanded"><a name="L840"></a><tt class="py-lineno"> 840</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L841"></a><tt class="py-lineno"> 841</tt>  <tt class="py-line"><tt class="py-docstring">    Calculate radial velocities for Hermes stars.</tt> </tt>
<a name="L842"></a><tt class="py-lineno"> 842</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L843"></a><tt class="py-lineno"> 843</tt>  <tt class="py-line"><tt class="py-docstring">    @warning: you have to have the DRS installed locally!</tt> </tt>
<a name="L844"></a><tt class="py-lineno"> 844</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L845"></a><tt class="py-lineno"> 845</tt>  <tt class="py-line"><tt class="py-docstring">    @warning: this function changes your hermesConfig.xml file, you'd better</tt> </tt>
<a name="L846"></a><tt class="py-lineno"> 846</tt>  <tt class="py-line"><tt class="py-docstring">    backup it before use</tt> </tt>
<a name="L847"></a><tt class="py-lineno"> 847</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L848"></a><tt class="py-lineno"> 848</tt>  <tt class="py-line">    <tt class="py-comment">#-- build the command</tt> </tt>
<a name="L849"></a><tt class="py-lineno"> 849</tt>  <tt class="py-line">    <tt id="link-141" class="py-name" targets="Function ivs.catalogs.hermes.make_list_star()=ivs.catalogs.hermes-module.html#make_list_star"><a title="ivs.catalogs.hermes.make_list_star" class="py-name" href="#" onclick="return doclink('link-141', 'make_list_star', 'link-141');">make_list_star</a></tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt> </tt>
<a name="L850"></a><tt class="py-lineno"> 850</tt>  <tt class="py-line">    <tt id="link-142" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-142', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">=</tt> <tt class="py-string">'python /STER/mercator/mercator/HermesTools/CCFList.py -i %s.list'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">ID</tt><tt class="py-op">)</tt> </tt>
<a name="L851"></a><tt class="py-lineno"> 851</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">mask_file</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L852"></a><tt class="py-lineno"> 852</tt>  <tt class="py-line">        <tt id="link-143" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-143', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">' -m %s'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">abspath</tt><tt class="py-op">(</tt><tt class="py-name">mask_file</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L853"></a><tt class="py-lineno"> 853</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">cosmic_clipping</tt><tt class="py-op">:</tt> </tt>
<a name="L854"></a><tt class="py-lineno"> 854</tt>  <tt class="py-line">        <tt id="link-144" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-144', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">' -nc'</tt> </tt>
<a name="L855"></a><tt class="py-lineno"> 855</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">flatfield</tt><tt class="py-op">:</tt> </tt>
<a name="L856"></a><tt class="py-lineno"> 856</tt>  <tt class="py-line">        <tt id="link-145" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-145', 'cmd', 'link-109');">cmd</a></tt> <tt class="py-op">+=</tt> <tt class="py-string">' -f'</tt> </tt>
<a name="L857"></a><tt class="py-lineno"> 857</tt>  <tt class="py-line">         </tt>
<a name="L858"></a><tt class="py-lineno"> 858</tt>  <tt class="py-line">    <tt class="py-comment">#-- change configFile</tt> </tt>
<a name="L859"></a><tt class="py-lineno"> 859</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">config_dir</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L860"></a><tt class="py-lineno"> 860</tt>  <tt class="py-line">        <tt class="py-name">config_dir</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">expanduser</tt><tt class="py-op">(</tt><tt class="py-string">'~/hermesRun'</tt><tt class="py-op">)</tt> </tt>
<a name="L861"></a><tt class="py-lineno"> 861</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">out_dir</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L862"></a><tt class="py-lineno"> 862</tt>  <tt class="py-line">        <tt class="py-name">out_dir</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">getcwd</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L863"></a><tt class="py-lineno"> 863</tt>  <tt class="py-line">    <tt class="py-name">out_dir</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">abspath</tt><tt class="py-op">(</tt><tt class="py-name">out_dir</tt><tt class="py-op">)</tt> </tt>
<a name="L864"></a><tt class="py-lineno"> 864</tt>  <tt class="py-line">     </tt>
<a name="L865"></a><tt class="py-lineno"> 865</tt>  <tt class="py-line">    <tt class="py-name">config_file</tt> <tt class="py-op">=</tt> <tt class="py-string">r"""&lt;hermes&gt;</tt> </tt>
<a name="L866"></a><tt class="py-lineno"> 866</tt>  <tt class="py-line"><tt class="py-string">&lt;Nights&gt;/STER/mercator/hermes&lt;/Nights&gt;</tt> </tt>
<a name="L867"></a><tt class="py-lineno"> 867</tt>  <tt class="py-line"><tt class="py-string">&lt;CurrentNight&gt;/STER/mercator/hermes/20110501&lt;/CurrentNight&gt;</tt> </tt>
<a name="L868"></a><tt class="py-lineno"> 868</tt>  <tt class="py-line"><tt class="py-string">&lt;Reduced&gt;/STER/mercator/hermes/20110501/reduced&lt;/Reduced&gt;</tt> </tt>
<a name="L869"></a><tt class="py-lineno"> 869</tt>  <tt class="py-line"><tt class="py-string">&lt;AnalysesResults&gt;%s&lt;/AnalysesResults&gt;</tt> </tt>
<a name="L870"></a><tt class="py-lineno"> 870</tt>  <tt class="py-line"><tt class="py-string">&lt;DebugPath&gt;%s&lt;/DebugPath&gt;</tt> </tt>
<a name="L871"></a><tt class="py-lineno"> 871</tt>  <tt class="py-line"><tt class="py-string">&lt;Raw&gt;raw&lt;/Raw&gt;</tt> </tt>
<a name="L872"></a><tt class="py-lineno"> 872</tt>  <tt class="py-line"><tt class="py-string">&lt;ConsoleLogSeverity&gt;debug&lt;/ConsoleLogSeverity&gt;</tt> </tt>
<a name="L873"></a><tt class="py-lineno"> 873</tt>  <tt class="py-line"><tt class="py-string">&lt;LogFileName&gt;%s&lt;/LogFileName&gt;</tt> </tt>
<a name="L874"></a><tt class="py-lineno"> 874</tt>  <tt class="py-line"><tt class="py-string">&lt;LogFileFormater&gt;%%(asctime)s  ::  %%(levelname)s  ::</tt> </tt>
<a name="L875"></a><tt class="py-lineno"> 875</tt>  <tt class="py-line"><tt class="py-string">  %%(message)s&lt;/LogFileFormater&gt;</tt> </tt>
<a name="L876"></a><tt class="py-lineno"> 876</tt>  <tt class="py-line"><tt class="py-string">&lt;/hermes&gt;"""</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">out_dir</tt><tt class="py-op">,</tt><tt class="py-name">out_dir</tt><tt class="py-op">,</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">out_dir</tt><tt class="py-op">,</tt><tt class="py-string">'hermes.log'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L877"></a><tt class="py-lineno"> 877</tt>  <tt class="py-line">     </tt>
<a name="L878"></a><tt class="py-lineno"> 878</tt>  <tt class="py-line">    <tt class="py-comment">#   write to file</tt> </tt>
<a name="L879"></a><tt class="py-lineno"> 879</tt>  <tt class="py-line">    <tt id="link-146" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-146', 'config', 'link-21');">config</a></tt> <tt class="py-op">=</tt> <tt class="py-name">open</tt><tt class="py-op">(</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">config_dir</tt><tt class="py-op">,</tt><tt class="py-string">'hermesConfig.xml'</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-string">'w'</tt><tt class="py-op">)</tt> </tt>
<a name="L880"></a><tt class="py-lineno"> 880</tt>  <tt class="py-line">    <tt id="link-147" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-147', 'config', 'link-21');">config</a></tt><tt class="py-op">.</tt><tt id="link-148" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-148', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">config_file</tt><tt class="py-op">)</tt> </tt>
<a name="L881"></a><tt class="py-lineno"> 881</tt>  <tt class="py-line">    <tt id="link-149" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-149', 'config', 'link-21');">config</a></tt><tt class="py-op">.</tt><tt class="py-name">close</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L882"></a><tt class="py-lineno"> 882</tt>  <tt class="py-line">     </tt>
<a name="L883"></a><tt class="py-lineno"> 883</tt>  <tt class="py-line">    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L884"></a><tt class="py-lineno"> 884</tt>  <tt class="py-line">        <tt class="py-name">retcode</tt> <tt class="py-op">=</tt> <tt class="py-name">subprocess</tt><tt class="py-op">.</tt><tt class="py-name">call</tt><tt class="py-op">(</tt><tt id="link-150" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-150', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">,</tt> <tt class="py-name">shell</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L885"></a><tt class="py-lineno"> 885</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">retcode</tt> <tt class="py-op">&lt;</tt> <tt class="py-number">0</tt><tt class="py-op">:</tt> </tt>
<a name="L886"></a><tt class="py-lineno"> 886</tt>  <tt class="py-line">            <tt id="link-151" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-151', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">error</tt><tt class="py-op">(</tt><tt class="py-string">"Child (%s) was terminated by signal %d"</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt id="link-152" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-152', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">,</tt><tt class="py-op">-</tt><tt class="py-name">retcode</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L887"></a><tt class="py-lineno"> 887</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L888"></a><tt class="py-lineno"> 888</tt>  <tt class="py-line">            <tt id="link-153" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-153', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">error</tt><tt class="py-op">(</tt><tt class="py-string">"Child (%s) returned %d"</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt id="link-154" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-154', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">,</tt><tt class="py-name">retcode</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L889"></a><tt class="py-lineno"> 889</tt>  <tt class="py-line">    <tt class="py-keyword">except</tt> <tt class="py-name">OSError</tt> <tt class="py-keyword">as</tt> <tt class="py-name">e</tt><tt class="py-op">:</tt> </tt>
<a name="L890"></a><tt class="py-lineno"> 890</tt>  <tt class="py-line">        <tt id="link-155" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-155', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">error</tt><tt class="py-op">(</tt><tt class="py-string">"Execution (%s) failed: %s"</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt id="link-156" class="py-name"><a title="ivs.makedoc.cmd" class="py-name" href="#" onclick="return doclink('link-156', 'cmd', 'link-109');">cmd</a></tt><tt class="py-op">,</tt><tt class="py-name">e</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
</div><a name="L891"></a><tt class="py-lineno"> 891</tt>  <tt class="py-line">     </tt>
<a name="L892"></a><tt class="py-lineno"> 892</tt>  <tt class="py-line">     </tt>
<a name="L893"></a><tt class="py-lineno"> 893</tt>  <tt class="py-line"> </tt>
<a name="L894"></a><tt class="py-lineno"> 894</tt>  <tt class="py-line">     </tt>
<a name="L895"></a><tt class="py-lineno"> 895</tt>  <tt class="py-line">     </tt>
<a name="L896"></a><tt class="py-lineno"> 896</tt>  <tt class="py-line"> </tt>
<a name="L897"></a><tt class="py-lineno"> 897</tt>  <tt class="py-line"> </tt>
<a name="L898"></a><tt class="py-lineno"> 898</tt>  <tt class="py-line"><tt class="py-comment">#}</tt> </tt>
<a name="L899"></a><tt class="py-lineno"> 899</tt>  <tt class="py-line"> </tt>
<a name="HermesCCF"></a><div id="HermesCCF-def"><a name="L900"></a><tt class="py-lineno"> 900</tt> <a class="py-toggle" href="#" id="HermesCCF-toggle" onclick="return toggle('HermesCCF');">-</a><tt class="py-line"><tt class="py-keyword">class</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html">HermesCCF</a><tt class="py-op">(</tt><tt class="py-base-class">object</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="HermesCCF-expanded"><a name="L901"></a><tt class="py-lineno"> 901</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L902"></a><tt class="py-lineno"> 902</tt>  <tt class="py-line"><tt class="py-docstring">    Object that holds all information stored in the *_AllCCF.fits files written by hermesVR.</tt> </tt>
<a name="L903"></a><tt class="py-lineno"> 903</tt>  <tt class="py-line"><tt class="py-docstring">    The original information is stored in the following variables that can be accessed</tt> </tt>
<a name="L904"></a><tt class="py-lineno"> 904</tt>  <tt class="py-line"><tt class="py-docstring">    directly:</tt> </tt>
<a name="L905"></a><tt class="py-lineno"> 905</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L906"></a><tt class="py-lineno"> 906</tt>  <tt class="py-line"><tt class="py-docstring">        - filename: The path to the *_AllCCF.fits file</tt> </tt>
<a name="L907"></a><tt class="py-lineno"> 907</tt>  <tt class="py-line"><tt class="py-docstring">        - header: The header of the original spectra that was the input to hermesVR</tt> </tt>
<a name="L908"></a><tt class="py-lineno"> 908</tt>  <tt class="py-line"><tt class="py-docstring">        - groups: The summary that hermesVR prints of the 5 preset order groups stored</tt> </tt>
<a name="L909"></a><tt class="py-lineno"> 909</tt>  <tt class="py-line"><tt class="py-docstring">                  as a rec array</tt> </tt>
<a name="L910"></a><tt class="py-lineno"> 910</tt>  <tt class="py-line"><tt class="py-docstring">        - ccfs: All cross-correlation functions stored as a array (index 0-54)</tt> </tt>
<a name="L911"></a><tt class="py-lineno"> 911</tt>  <tt class="py-line"><tt class="py-docstring">        - vr: the velocity scale of the cross correlation functions (array)</tt> </tt>
<a name="L912"></a><tt class="py-lineno"> 912</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L913"></a><tt class="py-lineno"> 913</tt>  <tt class="py-line"><tt class="py-docstring">    Appart from these attributes, two functions allow you to read the ccf by order or</tt> </tt>
<a name="L914"></a><tt class="py-lineno"> 914</tt>  <tt class="py-line"><tt class="py-docstring">    a list of orders where the order numbers are the original hermes orders (40-94).</tt> </tt>
<a name="L915"></a><tt class="py-lineno"> 915</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L916"></a><tt class="py-lineno"> 916</tt>  <tt class="py-line">     </tt>
<a name="HermesCCF.__init__"></a><div id="HermesCCF.__init__-def"><a name="L917"></a><tt class="py-lineno"> 917</tt> <a class="py-toggle" href="#" id="HermesCCF.__init__-toggle" onclick="return toggle('HermesCCF.__init__');">-</a><tt class="py-line">    <tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html#__init__">__init__</a><tt class="py-op">(</tt><tt class="py-param">self</tt><tt class="py-op">,</tt> <tt class="py-param">filename</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF.__init__-collapsed" style="display:none;" pad="++++" indent="++++++++"></div><div id="HermesCCF.__init__-expanded"><a name="L918"></a><tt class="py-lineno"> 918</tt>  <tt class="py-line">        <tt class="py-docstring">"""</tt> </tt>
<a name="L919"></a><tt class="py-lineno"> 919</tt>  <tt class="py-line"><tt class="py-docstring">        Read the provided file and store all information.</tt> </tt>
<a name="L920"></a><tt class="py-lineno"> 920</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L921"></a><tt class="py-lineno"> 921</tt>  <tt class="py-line"><tt class="py-docstring">        @param filename: The complete path to the AllCCF.fits file to read.</tt> </tt>
<a name="L922"></a><tt class="py-lineno"> 922</tt>  <tt class="py-line"><tt class="py-docstring">        @type filename: string</tt> </tt>
<a name="L923"></a><tt class="py-lineno"> 923</tt>  <tt class="py-line"><tt class="py-docstring">        """</tt> </tt>
<a name="L924"></a><tt class="py-lineno"> 924</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">header</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L925"></a><tt class="py-lineno"> 925</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">vr</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L926"></a><tt class="py-lineno"> 926</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">ccfs</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L927"></a><tt class="py-lineno"> 927</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">groups</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L928"></a><tt class="py-lineno"> 928</tt>  <tt class="py-line">         </tt>
<a name="L929"></a><tt class="py-lineno"> 929</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">filename</tt> <tt class="py-op">!=</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L930"></a><tt class="py-lineno"> 930</tt>  <tt class="py-line">            <tt class="py-name">self</tt><tt class="py-op">.</tt><tt id="link-157" class="py-name" targets="Method ivs.catalogs.hermes.HermesCCF._read_file()=ivs.catalogs.hermes.HermesCCF-class.html#_read_file"><a title="ivs.catalogs.hermes.HermesCCF._read_file" class="py-name" href="#" onclick="return doclink('link-157', '_read_file', 'link-157');">_read_file</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt> </tt>
<a name="L931"></a><tt class="py-lineno"> 931</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L932"></a><tt class="py-lineno"> 932</tt>  <tt class="py-line">            <tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
</div><a name="L933"></a><tt class="py-lineno"> 933</tt>  <tt class="py-line">     </tt>
<a name="L934"></a><tt class="py-lineno"> 934</tt>  <tt class="py-line">    <tt class="py-comment">#{ Interaction</tt> </tt>
<a name="L935"></a><tt class="py-lineno"> 935</tt>  <tt class="py-line">     </tt>
<a name="HermesCCF.ccf"></a><div id="HermesCCF.ccf-def"><a name="L936"></a><tt class="py-lineno"> 936</tt> <a class="py-toggle" href="#" id="HermesCCF.ccf-toggle" onclick="return toggle('HermesCCF.ccf');">-</a><tt class="py-line">    <tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html#ccf">ccf</a><tt class="py-op">(</tt><tt class="py-param">self</tt><tt class="py-op">,</tt> <tt class="py-param">order</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF.ccf-collapsed" style="display:none;" pad="++++" indent="++++++++"></div><div id="HermesCCF.ccf-expanded"><a name="L937"></a><tt class="py-lineno"> 937</tt>  <tt class="py-line">        <tt class="py-docstring">"""</tt> </tt>
<a name="L938"></a><tt class="py-lineno"> 938</tt>  <tt class="py-line"><tt class="py-docstring">        Return the ccf function belonging to the requested order. The order number </tt> </tt>
<a name="L939"></a><tt class="py-lineno"> 939</tt>  <tt class="py-line"><tt class="py-docstring">        is the real order number (40 &lt;= order &lt;= 94).</tt> </tt>
<a name="L940"></a><tt class="py-lineno"> 940</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L941"></a><tt class="py-lineno"> 941</tt>  <tt class="py-line"><tt class="py-docstring">        @param order: The hermes order of which you want the ccf</tt> </tt>
<a name="L942"></a><tt class="py-lineno"> 942</tt>  <tt class="py-line"><tt class="py-docstring">        @type order: int</tt> </tt>
<a name="L943"></a><tt class="py-lineno"> 943</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L944"></a><tt class="py-lineno"> 944</tt>  <tt class="py-line"><tt class="py-docstring">        @return: The cross correlation function of the requested order</tt> </tt>
<a name="L945"></a><tt class="py-lineno"> 945</tt>  <tt class="py-line"><tt class="py-docstring">        @rtype: array</tt> </tt>
<a name="L946"></a><tt class="py-lineno"> 946</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L947"></a><tt class="py-lineno"> 947</tt>  <tt class="py-line"><tt class="py-docstring">        @raise IndexError: When the order is out of bounds.</tt> </tt>
<a name="L948"></a><tt class="py-lineno"> 948</tt>  <tt class="py-line"><tt class="py-docstring">        """</tt> </tt>
<a name="L949"></a><tt class="py-lineno"> 949</tt>  <tt class="py-line">        <tt class="py-name">order</tt> <tt class="py-op">=</tt> <tt class="py-number">94</tt> <tt class="py-op">-</tt> <tt class="py-name">order</tt> </tt>
<a name="L950"></a><tt class="py-lineno"> 950</tt>  <tt class="py-line">         </tt>
<a name="L951"></a><tt class="py-lineno"> 951</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">order</tt> <tt class="py-op">&lt;</tt> <tt class="py-number">0</tt> <tt class="py-keyword">or</tt> <tt class="py-name">order</tt> <tt class="py-op">&gt;</tt> <tt class="py-number">54</tt><tt class="py-op">:</tt> </tt>
<a name="L952"></a><tt class="py-lineno"> 952</tt>  <tt class="py-line">            <tt class="py-keyword">raise</tt> <tt class="py-name">IndexError</tt><tt class="py-op">(</tt><tt class="py-string">'Order {:.0f} is out of bounds (40 - 94)'</tt><tt class="py-op">.</tt><tt id="link-158" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-158', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-number">94</tt> <tt class="py-op">-</tt> <tt class="py-name">order</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L953"></a><tt class="py-lineno"> 953</tt>  <tt class="py-line">         </tt>
<a name="L954"></a><tt class="py-lineno"> 954</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">ccfs</tt><tt class="py-op">[</tt><tt class="py-name">order</tt><tt class="py-op">]</tt> </tt>
</div><a name="L955"></a><tt class="py-lineno"> 955</tt>  <tt class="py-line">     </tt>
<a name="HermesCCF.combine_ccf"></a><div id="HermesCCF.combine_ccf-def"><a name="L956"></a><tt class="py-lineno"> 956</tt> <a class="py-toggle" href="#" id="HermesCCF.combine_ccf-toggle" onclick="return toggle('HermesCCF.combine_ccf');">-</a><tt class="py-line">    <tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html#combine_ccf">combine_ccf</a><tt class="py-op">(</tt><tt class="py-param">self</tt><tt class="py-op">,</tt> <tt class="py-param">orders</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF.combine_ccf-collapsed" style="display:none;" pad="++++" indent="++++++++"></div><div id="HermesCCF.combine_ccf-expanded"><a name="L957"></a><tt class="py-lineno"> 957</tt>  <tt class="py-line">        <tt class="py-docstring">"""</tt> </tt>
<a name="L958"></a><tt class="py-lineno"> 958</tt>  <tt class="py-line"><tt class="py-docstring">        Sum the ccf function belonging to the requested order numbers. The order </tt> </tt>
<a name="L959"></a><tt class="py-lineno"> 959</tt>  <tt class="py-line"><tt class="py-docstring">        numbers can be given as a list of integers or in a string representation.</tt> </tt>
<a name="L960"></a><tt class="py-lineno"> 960</tt>  <tt class="py-line"><tt class="py-docstring">        When using the string representation, you can use the ':' sign to give a</tt> </tt>
<a name="L961"></a><tt class="py-lineno"> 961</tt>  <tt class="py-line"><tt class="py-docstring">        range of order which will include the starting and ending order. Fx the </tt> </tt>
<a name="L962"></a><tt class="py-lineno"> 962</tt>  <tt class="py-line"><tt class="py-docstring">        following two commands will return the same summed ccf:</tt> </tt>
<a name="L963"></a><tt class="py-lineno"> 963</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L964"></a><tt class="py-lineno"> 964</tt>  <tt class="py-line"><tt class="py-docstring">        &gt;&gt;&gt; combine_ccf([54,55,56,57,75,76])</tt> </tt>
<a name="L965"></a><tt class="py-lineno"> 965</tt>  <tt class="py-line"><tt class="py-docstring">        &gt;&gt;&gt; combine_ccf('54:57,75,76')</tt> </tt>
<a name="L966"></a><tt class="py-lineno"> 966</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L967"></a><tt class="py-lineno"> 967</tt>  <tt class="py-line"><tt class="py-docstring">        @param orders: The hermes orders of which you want the summed ccf</tt> </tt>
<a name="L968"></a><tt class="py-lineno"> 968</tt>  <tt class="py-line"><tt class="py-docstring">        @type orders: list or string</tt> </tt>
<a name="L969"></a><tt class="py-lineno"> 969</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L970"></a><tt class="py-lineno"> 970</tt>  <tt class="py-line"><tt class="py-docstring">        @return: The summed cross correlation function of the requested orders</tt> </tt>
<a name="L971"></a><tt class="py-lineno"> 971</tt>  <tt class="py-line"><tt class="py-docstring">        @rtype: array</tt> </tt>
<a name="L972"></a><tt class="py-lineno"> 972</tt>  <tt class="py-line"><tt class="py-docstring">        </tt> </tt>
<a name="L973"></a><tt class="py-lineno"> 973</tt>  <tt class="py-line"><tt class="py-docstring">        @raise IndexError: When an order is out of bounds.</tt> </tt>
<a name="L974"></a><tt class="py-lineno"> 974</tt>  <tt class="py-line"><tt class="py-docstring">        """</tt> </tt>
<a name="L975"></a><tt class="py-lineno"> 975</tt>  <tt class="py-line">         </tt>
<a name="L976"></a><tt class="py-lineno"> 976</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">type</tt><tt class="py-op">(</tt><tt class="py-name">orders</tt><tt class="py-op">)</tt> <tt class="py-op">==</tt> <tt class="py-name">str</tt><tt class="py-op">:</tt> </tt>
<a name="L977"></a><tt class="py-lineno"> 977</tt>  <tt class="py-line">            <tt class="py-name">orders</tt> <tt class="py-op">=</tt> <tt class="py-name">orders</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">','</tt><tt class="py-op">)</tt> </tt>
<a name="L978"></a><tt class="py-lineno"> 978</tt>  <tt class="py-line">            <tt class="py-name">o_list</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">]</tt> </tt>
<a name="L979"></a><tt class="py-lineno"> 979</tt>  <tt class="py-line">            <tt class="py-keyword">for</tt> <tt class="py-name">o</tt> <tt class="py-keyword">in</tt> <tt class="py-name">orders</tt><tt class="py-op">:</tt> </tt>
<a name="L980"></a><tt class="py-lineno"> 980</tt>  <tt class="py-line">                <tt class="py-keyword">if</tt> <tt class="py-string">':'</tt> <tt class="py-keyword">in</tt> <tt class="py-name">o</tt><tt class="py-op">:</tt> </tt>
<a name="L981"></a><tt class="py-lineno"> 981</tt>  <tt class="py-line">                    <tt class="py-name">o</tt> <tt class="py-op">=</tt> <tt class="py-name">o</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">':'</tt><tt class="py-op">)</tt> </tt>
<a name="L982"></a><tt class="py-lineno"> 982</tt>  <tt class="py-line">                    <tt class="py-name">o_list</tt><tt class="py-op">.</tt><tt id="link-159" class="py-name" targets="Function ivs.aux.decorators.extend()=ivs.aux.decorators-module.html#extend"><a title="ivs.aux.decorators.extend" class="py-name" href="#" onclick="return doclink('link-159', 'extend', 'link-159');">extend</a></tt><tt class="py-op">(</tt> <tt class="py-name">range</tt><tt class="py-op">(</tt> <tt class="py-name">int</tt><tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">,</tt> <tt class="py-name">int</tt><tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">[</tt><tt class="py-number">1</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-number">1</tt> <tt class="py-op">)</tt> <tt class="py-op">)</tt> </tt>
<a name="L983"></a><tt class="py-lineno"> 983</tt>  <tt class="py-line">                <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L984"></a><tt class="py-lineno"> 984</tt>  <tt class="py-line">                    <tt class="py-name">o_list</tt><tt class="py-op">.</tt><tt class="py-name">append</tt><tt class="py-op">(</tt> <tt class="py-name">int</tt><tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">)</tt> <tt class="py-op">)</tt> </tt>
<a name="L985"></a><tt class="py-lineno"> 985</tt>  <tt class="py-line">            <tt id="link-160" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-160', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">"converted order string: ''{:}'' to list: {:}"</tt><tt class="py-op">.</tt><tt id="link-161" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-161', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">orders</tt><tt class="py-op">,</tt> <tt class="py-name">o_list</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L986"></a><tt class="py-lineno"> 986</tt>  <tt class="py-line">            <tt class="py-name">orders</tt> <tt class="py-op">=</tt> <tt class="py-name">o_list</tt> </tt>
<a name="L987"></a><tt class="py-lineno"> 987</tt>  <tt class="py-line">         </tt>
<a name="L988"></a><tt class="py-lineno"> 988</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">any</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">&lt;</tt><tt class="py-number">40</tt><tt class="py-op">)</tt> <tt class="py-op">|</tt> <tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">&gt;</tt><tt class="py-number">94</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">o</tt> <tt class="py-keyword">in</tt> <tt class="py-name">orders</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L989"></a><tt class="py-lineno"> 989</tt>  <tt class="py-line">            <tt class="py-keyword">raise</tt> <tt class="py-name">IndexError</tt><tt class="py-op">(</tt><tt class="py-string">'Some/All orders {:} are out of bounds (40 - 94)'</tt><tt class="py-op">.</tt><tt id="link-162" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-162', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">orders</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L990"></a><tt class="py-lineno"> 990</tt>  <tt class="py-line">         </tt>
<a name="L991"></a><tt class="py-lineno"> 991</tt>  <tt class="py-line">        <tt id="link-163" class="py-name" targets="Method ivs.catalogs.hermes.HermesCCF.ccf()=ivs.catalogs.hermes.HermesCCF-class.html#ccf"><a title="ivs.catalogs.hermes.HermesCCF.ccf" class="py-name" href="#" onclick="return doclink('link-163', 'ccf', 'link-163');">ccf</a></tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">zeros_like</tt><tt class="py-op">(</tt><tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">vr</tt><tt class="py-op">)</tt> </tt>
<a name="L992"></a><tt class="py-lineno"> 992</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">o</tt> <tt class="py-keyword">in</tt> <tt class="py-name">orders</tt><tt class="py-op">:</tt> </tt>
<a name="L993"></a><tt class="py-lineno"> 993</tt>  <tt class="py-line">            <tt id="link-164" class="py-name"><a title="ivs.catalogs.hermes.HermesCCF.ccf" class="py-name" href="#" onclick="return doclink('link-164', 'ccf', 'link-163');">ccf</a></tt> <tt class="py-op">+=</tt> <tt class="py-name">self</tt><tt class="py-op">.</tt><tt id="link-165" class="py-name"><a title="ivs.catalogs.hermes.HermesCCF.ccf" class="py-name" href="#" onclick="return doclink('link-165', 'ccf', 'link-163');">ccf</a></tt><tt class="py-op">(</tt><tt class="py-name">o</tt><tt class="py-op">)</tt> </tt>
<a name="L994"></a><tt class="py-lineno"> 994</tt>  <tt class="py-line">             </tt>
<a name="L995"></a><tt class="py-lineno"> 995</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-166" class="py-name"><a title="ivs.catalogs.hermes.HermesCCF.ccf" class="py-name" href="#" onclick="return doclink('link-166', 'ccf', 'link-163');">ccf</a></tt> </tt>
</div><a name="L996"></a><tt class="py-lineno"> 996</tt>  <tt class="py-line">     </tt>
<a name="L997"></a><tt class="py-lineno"> 997</tt>  <tt class="py-line">    <tt class="py-comment">#}</tt> </tt>
<a name="L998"></a><tt class="py-lineno"> 998</tt>  <tt class="py-line">     </tt>
<a name="L999"></a><tt class="py-lineno"> 999</tt>  <tt class="py-line">    <tt class="py-comment">#{ Internal</tt> </tt>
<a name="L1000"></a><tt class="py-lineno">1000</tt>  <tt class="py-line">     </tt>
<a name="HermesCCF._read_file"></a><div id="HermesCCF._read_file-def"><a name="L1001"></a><tt class="py-lineno">1001</tt> <a class="py-toggle" href="#" id="HermesCCF._read_file-toggle" onclick="return toggle('HermesCCF._read_file');">-</a><tt class="py-line">    <tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html#_read_file">_read_file</a><tt class="py-op">(</tt><tt class="py-param">self</tt><tt class="py-op">,</tt> <tt class="py-param">filename</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF._read_file-collapsed" style="display:none;" pad="++++" indent="++++++++"></div><div id="HermesCCF._read_file-expanded"><a name="L1002"></a><tt class="py-lineno">1002</tt>  <tt class="py-line">        <tt class="py-docstring">"Read the *_AllCCF.fits file "</tt> </tt>
<a name="L1003"></a><tt class="py-lineno">1003</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt class="py-name">filename</tt> </tt>
<a name="L1004"></a><tt class="py-lineno">1004</tt>  <tt class="py-line">         </tt>
<a name="L1005"></a><tt class="py-lineno">1005</tt>  <tt class="py-line">        <tt class="py-name">hdu</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">open</tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt> </tt>
<a name="L1006"></a><tt class="py-lineno">1006</tt>  <tt class="py-line">         </tt>
<a name="L1007"></a><tt class="py-lineno">1007</tt>  <tt class="py-line">        <tt class="py-comment">#-- header of original observation</tt> </tt>
<a name="L1008"></a><tt class="py-lineno">1008</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">header</tt> <tt class="py-op">=</tt> <tt class="py-name">hdu</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">header</tt> </tt>
<a name="L1009"></a><tt class="py-lineno">1009</tt>  <tt class="py-line">         </tt>
<a name="L1010"></a><tt class="py-lineno">1010</tt>  <tt class="py-line">        <tt class="py-comment">#-- individual ccfs</tt> </tt>
<a name="L1011"></a><tt class="py-lineno">1011</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">ccfs</tt> <tt class="py-op">=</tt> <tt class="py-name">hdu</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">.</tt><tt class="py-name">T</tt> </tt>
<a name="L1012"></a><tt class="py-lineno">1012</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">vr</tt> <tt class="py-op">=</tt> <tt class="py-name">hdu</tt><tt class="py-op">[</tt><tt class="py-number">2</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">.</tt><tt class="py-name">field</tt><tt class="py-op">(</tt><tt class="py-string">'VR'</tt><tt class="py-op">)</tt> </tt>
<a name="L1013"></a><tt class="py-lineno">1013</tt>  <tt class="py-line">         </tt>
<a name="L1014"></a><tt class="py-lineno">1014</tt>  <tt class="py-line">        <tt class="py-comment">#-- data of preselected groups</tt> </tt>
<a name="L1015"></a><tt class="py-lineno">1015</tt>  <tt class="py-line">        <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">groups</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">array</tt><tt class="py-op">(</tt><tt class="py-name">hdu</tt><tt class="py-op">[</tt><tt class="py-number">1</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">,</tt> <tt class="py-name">dtype</tt> <tt class="py-op">=</tt> <tt class="py-name">hdu</tt><tt class="py-op">[</tt><tt class="py-number">1</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">.</tt><tt class="py-name">dtype</tt><tt class="py-op">)</tt> </tt>
<a name="L1016"></a><tt class="py-lineno">1016</tt>  <tt class="py-line">         </tt>
<a name="L1017"></a><tt class="py-lineno">1017</tt>  <tt class="py-line">        <tt id="link-167" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-167', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">debug</tt><tt class="py-op">(</tt><tt class="py-string">'Read ccf file: {:}'</tt><tt class="py-op">.</tt><tt id="link-168" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-168', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1018"></a><tt class="py-lineno">1018</tt>  <tt class="py-line">         </tt>
<a name="L1019"></a><tt class="py-lineno">1019</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> </tt>
</div><a name="L1020"></a><tt class="py-lineno">1020</tt>  <tt class="py-line">     </tt>
<a name="HermesCCF.__str__"></a><div id="HermesCCF.__str__-def"><a name="L1021"></a><tt class="py-lineno">1021</tt> <a class="py-toggle" href="#" id="HermesCCF.__str__-toggle" onclick="return toggle('HermesCCF.__str__');">-</a><tt class="py-line">    <tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes.HermesCCF-class.html#__str__">__str__</a><tt class="py-op">(</tt><tt class="py-param">self</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="HermesCCF.__str__-collapsed" style="display:none;" pad="++++" indent="++++++++"></div><div id="HermesCCF.__str__-expanded"><a name="L1022"></a><tt class="py-lineno">1022</tt>  <tt class="py-line">        <tt class="py-docstring">"String representation of this object "</tt> </tt>
<a name="L1023"></a><tt class="py-lineno">1023</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">header</tt> <tt class="py-op">==</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L1024"></a><tt class="py-lineno">1024</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt class="py-string">"&lt; empty Hermes CCF object &gt;"</tt> </tt>
<a name="L1025"></a><tt class="py-lineno">1025</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L1026"></a><tt class="py-lineno">1026</tt>  <tt class="py-line">            <tt class="py-name">obj</tt><tt class="py-op">,</tt> <tt class="py-name">sq</tt> <tt class="py-op">=</tt> <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'object'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> <tt class="py-name">self</tt><tt class="py-op">.</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">]</tt> </tt>
<a name="L1027"></a><tt class="py-lineno">1027</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt class="py-string">"&lt; CCF of {:} with unseq {:.0f} &gt;"</tt><tt class="py-op">.</tt><tt id="link-169" class="py-name"><a title="ivs.asteroseismology.redgiantfreqs.format" class="py-name" href="#" onclick="return doclink('link-169', 'format', 'link-46');">format</a></tt><tt class="py-op">(</tt><tt class="py-name">obj</tt><tt class="py-op">,</tt> <tt class="py-name">sq</tt><tt class="py-op">)</tt> </tt>
</div></div><a name="L1028"></a><tt class="py-lineno">1028</tt>  <tt class="py-line">     </tt>
<a name="L1029"></a><tt class="py-lineno">1029</tt>  <tt class="py-line">    <tt class="py-comment">#}</tt> </tt>
<a name="L1030"></a><tt class="py-lineno">1030</tt>  <tt class="py-line"> </tt>
<a name="L1031"></a><tt class="py-lineno">1031</tt>  <tt class="py-line"><tt class="py-comment">#{ Administrator functions</tt> </tt>
<a name="L1032"></a><tt class="py-lineno">1032</tt>  <tt class="py-line"> </tt>
<a name="make_data_overview"></a><div id="make_data_overview-def"><a name="L1033"></a><tt class="py-lineno">1033</tt> <a class="py-toggle" href="#" id="make_data_overview-toggle" onclick="return toggle('make_data_overview');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#make_data_overview">make_data_overview</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="make_data_overview-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="make_data_overview-expanded"><a name="L1034"></a><tt class="py-lineno">1034</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L1035"></a><tt class="py-lineno">1035</tt>  <tt class="py-line"><tt class="py-docstring">    Summarize all Hermes data in a file for easy data retrieval.</tt> </tt>
<a name="L1036"></a><tt class="py-lineno">1036</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1037"></a><tt class="py-lineno">1037</tt>  <tt class="py-line"><tt class="py-docstring">    The file is located in one of date data directories (see C{config.py}), in</tt> </tt>
<a name="L1038"></a><tt class="py-lineno">1038</tt>  <tt class="py-line"><tt class="py-docstring">    subdirectories C{catalogs/hermes/HermesFullDataOverview.tsv}. If it doesn't</tt> </tt>
<a name="L1039"></a><tt class="py-lineno">1039</tt>  <tt class="py-line"><tt class="py-docstring">    exist, it will be created. It contains the following columns, which are</tt> </tt>
<a name="L1040"></a><tt class="py-lineno">1040</tt>  <tt class="py-line"><tt class="py-docstring">    extracted from the Hermes FITS headers (except C{filename}:</tt> </tt>
<a name="L1041"></a><tt class="py-lineno">1041</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1042"></a><tt class="py-lineno">1042</tt>  <tt class="py-line"><tt class="py-docstring">        1.  UNSEQ</tt> </tt>
<a name="L1043"></a><tt class="py-lineno">1043</tt>  <tt class="py-line"><tt class="py-docstring">        2.  PROG_ID</tt> </tt>
<a name="L1044"></a><tt class="py-lineno">1044</tt>  <tt class="py-line"><tt class="py-docstring">        3.  OBSMODE</tt> </tt>
<a name="L1045"></a><tt class="py-lineno">1045</tt>  <tt class="py-line"><tt class="py-docstring">        4.  BVCOR</tt> </tt>
<a name="L1046"></a><tt class="py-lineno">1046</tt>  <tt class="py-line"><tt class="py-docstring">        5.  OBSERVER</tt> </tt>
<a name="L1047"></a><tt class="py-lineno">1047</tt>  <tt class="py-line"><tt class="py-docstring">        6.  OBJECT</tt> </tt>
<a name="L1048"></a><tt class="py-lineno">1048</tt>  <tt class="py-line"><tt class="py-docstring">        7.  RA</tt> </tt>
<a name="L1049"></a><tt class="py-lineno">1049</tt>  <tt class="py-line"><tt class="py-docstring">        8.  DEC</tt> </tt>
<a name="L1050"></a><tt class="py-lineno">1050</tt>  <tt class="py-line"><tt class="py-docstring">        9.  BJD</tt> </tt>
<a name="L1051"></a><tt class="py-lineno">1051</tt>  <tt class="py-line"><tt class="py-docstring">        10. EXPTIME</tt> </tt>
<a name="L1052"></a><tt class="py-lineno">1052</tt>  <tt class="py-line"><tt class="py-docstring">        11. PMTOTAL</tt> </tt>
<a name="L1053"></a><tt class="py-lineno">1053</tt>  <tt class="py-line"><tt class="py-docstring">        12. DATE-AVG</tt> </tt>
<a name="L1054"></a><tt class="py-lineno">1054</tt>  <tt class="py-line"><tt class="py-docstring">        13. OBJECT</tt> </tt>
<a name="L1055"></a><tt class="py-lineno">1055</tt>  <tt class="py-line"><tt class="py-docstring">        14. airmass</tt> </tt>
<a name="L1056"></a><tt class="py-lineno">1056</tt>  <tt class="py-line"><tt class="py-docstring">        15. filename</tt> </tt>
<a name="L1057"></a><tt class="py-lineno">1057</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1058"></a><tt class="py-lineno">1058</tt>  <tt class="py-line"><tt class="py-docstring">    This file can most easily be read with the L{ivs.io.ascii} module and the</tt> </tt>
<a name="L1059"></a><tt class="py-lineno">1059</tt>  <tt class="py-line"><tt class="py-docstring">    command:</tt> </tt>
<a name="L1060"></a><tt class="py-lineno">1060</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1061"></a><tt class="py-lineno">1061</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; hermes_file = config.get_datafile(os.path.join('catalogs','hermes'),'HermesFullDataOverview.tsv')</tt> </tt>
<a name="L1062"></a><tt class="py-lineno">1062</tt>  <tt class="py-line"><tt class="py-docstring">    &gt;&gt;&gt; data = ascii.read2recarray(hermes_file,splitchar='\\t')</tt> </tt>
<a name="L1063"></a><tt class="py-lineno">1063</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1064"></a><tt class="py-lineno">1064</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L1065"></a><tt class="py-lineno">1065</tt>  <tt class="py-line">    <tt id="link-170" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-170', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'Collecting files...'</tt><tt class="py-op">)</tt> </tt>
<a name="L1066"></a><tt class="py-lineno">1066</tt>  <tt class="py-line">    <tt class="py-comment">#-- all hermes data directories</tt> </tt>
<a name="L1067"></a><tt class="py-lineno">1067</tt>  <tt class="py-line">    <tt class="py-name">dirs</tt> <tt class="py-op">=</tt> <tt class="py-name">sorted</tt><tt class="py-op">(</tt><tt id="link-171" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-171', 'glob', 'link-0');">glob</a></tt><tt class="py-op">.</tt><tt id="link-172" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-172', 'glob', 'link-0');">glob</a></tt><tt class="py-op">(</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt id="link-173" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-173', 'config', 'link-21');">config</a></tt><tt class="py-op">.</tt><tt id="link-174" class="py-name" targets="Variable ivs.config.ivs_dirs=ivs.config-module.html#ivs_dirs"><a title="ivs.config.ivs_dirs" class="py-name" href="#" onclick="return doclink('link-174', 'ivs_dirs', 'link-174');">ivs_dirs</a></tt><tt class="py-op">[</tt><tt class="py-string">'hermes'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt><tt class="py-string">'20??????'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1068"></a><tt class="py-lineno">1068</tt>  <tt class="py-line">    <tt class="py-name">dirs</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-name">idir</tt> <tt class="py-keyword">for</tt> <tt class="py-name">idir</tt> <tt class="py-keyword">in</tt> <tt class="py-name">dirs</tt> <tt class="py-keyword">if</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isdir</tt><tt class="py-op">(</tt><tt class="py-name">idir</tt><tt class="py-op">)</tt><tt class="py-op">]</tt> </tt>
<a name="L1069"></a><tt class="py-lineno">1069</tt>  <tt class="py-line">    <tt class="py-name">obj_files</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-op">]</tt> </tt>
<a name="L1070"></a><tt class="py-lineno">1070</tt>  <tt class="py-line">    <tt class="py-comment">#-- collect in those directories the raw and relevant reduced files</tt> </tt>
<a name="L1071"></a><tt class="py-lineno">1071</tt>  <tt class="py-line">    <tt class="py-keyword">for</tt> <tt class="py-name">idir</tt> <tt class="py-keyword">in</tt> <tt class="py-name">dirs</tt><tt class="py-op">:</tt> </tt>
<a name="L1072"></a><tt class="py-lineno">1072</tt>  <tt class="py-line">        <tt class="py-name">obj_files</tt> <tt class="py-op">+=</tt> <tt class="py-name">sorted</tt><tt class="py-op">(</tt><tt id="link-175" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-175', 'glob', 'link-0');">glob</a></tt><tt class="py-op">.</tt><tt id="link-176" class="py-name"><a title="ivs.config.glob" class="py-name" href="#" onclick="return doclink('link-176', 'glob', 'link-0');">glob</a></tt><tt class="py-op">(</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">idir</tt><tt class="py-op">,</tt><tt class="py-string">'raw'</tt><tt class="py-op">,</tt><tt class="py-string">'*.fits'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1073"></a><tt class="py-lineno">1073</tt>  <tt class="py-line">        <tt class="py-comment">#obj_files += sorted(glob.glob(os.path.join(idir,'reduced','*OBJ*wavelength_merged.fits')))</tt> </tt>
<a name="L1074"></a><tt class="py-lineno">1074</tt>  <tt class="py-line">        <tt class="py-comment">#obj_files += sorted(glob.glob(os.path.join(idir,'reduced','*OBJ*wavelength_merged_c.fits')))</tt> </tt>
<a name="L1075"></a><tt class="py-lineno">1075</tt>  <tt class="py-line">        <tt class="py-comment">#obj_files += sorted(glob.glob(os.path.join(idir,'reduced','*OBJ*log_merged.fits')))</tt> </tt>
<a name="L1076"></a><tt class="py-lineno">1076</tt>  <tt class="py-line">        <tt class="py-comment">#obj_files += sorted(glob.glob(os.path.join(idir,'reduced','*OBJ*log_merged_c.fits')))</tt> </tt>
<a name="L1077"></a><tt class="py-lineno">1077</tt>  <tt class="py-line">     </tt>
<a name="L1078"></a><tt class="py-lineno">1078</tt>  <tt class="py-line">    <tt class="py-comment">#-- keep track of what is already in the file, if it exists:</tt> </tt>
<a name="L1079"></a><tt class="py-lineno">1079</tt>  <tt class="py-line">    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L1080"></a><tt class="py-lineno">1080</tt>  <tt class="py-line">        <tt class="py-name">overview_file</tt> <tt class="py-op">=</tt> <tt id="link-177" class="py-name"><a title="ivs.config" class="py-name" href="#" onclick="return doclink('link-177', 'config', 'link-21');">config</a></tt><tt class="py-op">.</tt><tt id="link-178" class="py-name"><a title="ivs.config.get_datafile" class="py-name" href="#" onclick="return doclink('link-178', 'get_datafile', 'link-65');">get_datafile</a></tt><tt class="py-op">(</tt><tt class="py-string">'catalogs/hermes'</tt><tt class="py-op">,</tt><tt class="py-string">'HermesFullDataOverview.tsv'</tt><tt class="py-op">)</tt> </tt>
<a name="L1081"></a><tt class="py-lineno">1081</tt>  <tt class="py-line">        <tt class="py-comment">#overview_file = config.get_datafile(os.path.join('catalogs','hermes'),'HermesFullDataOverview.tsv')</tt> </tt>
<a name="L1082"></a><tt class="py-lineno">1082</tt>  <tt class="py-line">        <tt class="py-name">overview_data</tt> <tt class="py-op">=</tt> <tt id="link-179" class="py-name"><a title="ivs.io.ascii" class="py-name" href="#" onclick="return doclink('link-179', 'ascii', 'link-7');">ascii</a></tt><tt class="py-op">.</tt><tt id="link-180" class="py-name"><a title="ivs.io.ascii.read2recarray
ivs.io.fits.read2recarray" class="py-name" href="#" onclick="return doclink('link-180', 'read2recarray', 'link-32');">read2recarray</a></tt><tt class="py-op">(</tt><tt class="py-name">overview_file</tt><tt class="py-op">,</tt><tt class="py-name">splitchar</tt><tt class="py-op">=</tt><tt class="py-string">'\t'</tt><tt class="py-op">)</tt> </tt>
<a name="L1083"></a><tt class="py-lineno">1083</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt> <tt class="py-op">=</tt> <tt class="py-name">open</tt><tt class="py-op">(</tt><tt class="py-name">overview_file</tt><tt class="py-op">,</tt><tt class="py-string">'a'</tt><tt class="py-op">)</tt> </tt>
<a name="L1084"></a><tt class="py-lineno">1084</tt>  <tt class="py-line">        <tt id="link-181" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-181', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'Found %d FITS files: appending to overview file %s'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">obj_files</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-name">overview_file</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1085"></a><tt class="py-lineno">1085</tt>  <tt class="py-line">    <tt class="py-comment">#   if not, begin a new file</tt> </tt>
<a name="L1086"></a><tt class="py-lineno">1086</tt>  <tt class="py-line">    <tt class="py-keyword">except</tt> <tt class="py-name">IOError</tt><tt class="py-op">:</tt> </tt>
<a name="L1087"></a><tt class="py-lineno">1087</tt>  <tt class="py-line">        <tt class="py-name">overview_file</tt> <tt class="py-op">=</tt> <tt class="py-string">'HermesFullDataOverview.tsv'</tt> </tt>
<a name="L1088"></a><tt class="py-lineno">1088</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt> <tt class="py-op">=</tt> <tt class="py-name">open</tt><tt class="py-op">(</tt><tt class="py-name">overview_file</tt><tt class="py-op">,</tt><tt class="py-string">'w'</tt><tt class="py-op">)</tt> </tt>
<a name="L1089"></a><tt class="py-lineno">1089</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt><tt class="py-op">.</tt><tt id="link-182" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-182', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-string">'#unseq prog_id obsmode bvcor observer object ra dec bjd exptime pmtotal date-avg airmass filename\n'</tt><tt class="py-op">)</tt> </tt>
<a name="L1090"></a><tt class="py-lineno">1090</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt><tt class="py-op">.</tt><tt id="link-183" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-183', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-string">'#i i a20 &gt;f8 a50 a50 &gt;f8 &gt;f8 &gt;f8 &gt;f8 &gt;f8 a30 &gt;f8 a200\n'</tt><tt class="py-op">)</tt> </tt>
<a name="L1091"></a><tt class="py-lineno">1091</tt>  <tt class="py-line">        <tt class="py-name">overview_data</tt> <tt class="py-op">=</tt> <tt class="py-op">{</tt><tt class="py-string">'filename'</tt><tt class="py-op">:</tt><tt class="py-op">[</tt><tt class="py-op">]</tt><tt class="py-op">}</tt> </tt>
<a name="L1092"></a><tt class="py-lineno">1092</tt>  <tt class="py-line">        <tt id="link-184" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-184', 'logger', 'link-27');">logger</a></tt><tt class="py-op">.</tt><tt class="py-name">info</tt><tt class="py-op">(</tt><tt class="py-string">'Found %d FITS files: starting new overview file %s'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">obj_files</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-name">overview_file</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1093"></a><tt class="py-lineno">1093</tt>  <tt class="py-line">     </tt>
<a name="L1094"></a><tt class="py-lineno">1094</tt>  <tt class="py-line">    <tt class="py-comment">#-- and summarize the contents in a tab separated file (some columns contain spaces)</tt> </tt>
<a name="L1095"></a><tt class="py-lineno">1095</tt>  <tt class="py-line">    <tt class="py-name">existing_files</tt> <tt class="py-op">=</tt> <tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">sort</tt><tt class="py-op">(</tt><tt class="py-name">overview_data</tt><tt class="py-op">[</tt><tt class="py-string">'filename'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L1096"></a><tt class="py-lineno">1096</tt>  <tt class="py-line">    <tt class="py-keyword">for</tt> <tt class="py-name">i</tt><tt class="py-op">,</tt><tt class="py-name">obj_file</tt> <tt class="py-keyword">in</tt> <tt class="py-name">enumerate</tt><tt class="py-op">(</tt><tt class="py-name">obj_files</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L1097"></a><tt class="py-lineno">1097</tt>  <tt class="py-line">        <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt id="link-185" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-185', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">chr</tt><tt class="py-op">(</tt><tt class="py-number">27</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'[s'</tt><tt class="py-op">)</tt> <tt class="py-comment"># save cursor</tt> </tt>
<a name="L1098"></a><tt class="py-lineno">1098</tt>  <tt class="py-line">        <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt id="link-186" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-186', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">chr</tt><tt class="py-op">(</tt><tt class="py-number">27</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'[2K'</tt><tt class="py-op">)</tt> <tt class="py-comment"># remove line</tt> </tt>
<a name="L1099"></a><tt class="py-lineno">1099</tt>  <tt class="py-line">        <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt id="link-187" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-187', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-string">'Scanning %5d / %5d FITS files'</tt><tt class="py-op">%</tt><tt class="py-op">(</tt><tt class="py-name">i</tt><tt class="py-op">+</tt><tt class="py-number">1</tt><tt class="py-op">,</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">obj_files</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1100"></a><tt class="py-lineno">1100</tt>  <tt class="py-line">        <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt class="py-name">flush</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-comment"># flush to screen</tt> </tt>
<a name="L1101"></a><tt class="py-lineno">1101</tt>  <tt class="py-line">         </tt>
<a name="L1102"></a><tt class="py-lineno">1102</tt>  <tt class="py-line">        <tt class="py-comment">#-- maybe this file is already processed: forget about it then</tt> </tt>
<a name="L1103"></a><tt class="py-lineno">1103</tt>  <tt class="py-line">        <tt class="py-name">index</tt> <tt class="py-op">=</tt> <tt class="py-name">existing_files</tt><tt class="py-op">.</tt><tt class="py-name">searchsorted</tt><tt class="py-op">(</tt><tt class="py-name">obj_file</tt><tt class="py-op">)</tt> </tt>
<a name="L1104"></a><tt class="py-lineno">1104</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">index</tt><tt class="py-op">&lt;</tt><tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">existing_files</tt><tt class="py-op">)</tt> <tt class="py-keyword">and</tt> <tt class="py-name">existing_files</tt><tt class="py-op">[</tt><tt class="py-name">index</tt><tt class="py-op">]</tt><tt class="py-op">==</tt><tt class="py-name">obj_file</tt><tt class="py-op">:</tt> </tt>
<a name="L1105"></a><tt class="py-lineno">1105</tt>  <tt class="py-line">            <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt id="link-188" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-188', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">chr</tt><tt class="py-op">(</tt><tt class="py-number">27</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'[u'</tt><tt class="py-op">)</tt> <tt class="py-comment"># reset cursor</tt> </tt>
<a name="L1106"></a><tt class="py-lineno">1106</tt>  <tt class="py-line">            <tt class="py-keyword">continue</tt> </tt>
<a name="L1107"></a><tt class="py-lineno">1107</tt>  <tt class="py-line">         </tt>
<a name="L1108"></a><tt class="py-lineno">1108</tt>  <tt class="py-line">        <tt class="py-comment">#-- keep track of: UNSEQ, PROG_ID, OBSMODE, BVCOR, OBSERVER, </tt> </tt>
<a name="L1109"></a><tt class="py-lineno">1109</tt>  <tt class="py-line">        <tt class="py-comment">#                  OBJECT, RA, DEC, BJD, EXPTIME, DATE-AVG, PMTOTAL,</tt> </tt>
<a name="L1110"></a><tt class="py-lineno">1110</tt>  <tt class="py-line">        <tt class="py-comment">#                  airmass and filename (not part of fitsheader)</tt> </tt>
<a name="L1111"></a><tt class="py-lineno">1111</tt>  <tt class="py-line">        <tt class="py-name">contents</tt> <tt class="py-op">=</tt> <tt class="py-name">dict</tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">=</tt><tt class="py-op">-</tt><tt class="py-number">1</tt><tt class="py-op">,</tt><tt class="py-name">prog_id</tt><tt class="py-op">=</tt><tt class="py-op">-</tt><tt class="py-number">1</tt><tt class="py-op">,</tt><tt class="py-name">obsmode</tt><tt class="py-op">=</tt><tt class="py-string">'nan'</tt><tt class="py-op">,</tt><tt class="py-name">bvcor</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt><tt class="py-name">observer</tt><tt class="py-op">=</tt><tt class="py-string">'nan'</tt><tt class="py-op">,</tt> </tt>
<a name="L1112"></a><tt class="py-lineno">1112</tt>  <tt class="py-line">                        <tt class="py-name">object</tt><tt class="py-op">=</tt><tt class="py-string">'nan'</tt><tt class="py-op">,</tt><tt class="py-name">ra</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt><tt class="py-name">dec</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt> </tt>
<a name="L1113"></a><tt class="py-lineno">1113</tt>  <tt class="py-line">                        <tt class="py-name">bjd</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt><tt class="py-name">exptime</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt><tt class="py-name">pmtotal</tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt><tt id="link-189" class="py-name"><a title="ivs.observations.airmass
ivs.observations.airmass.airmass" class="py-name" href="#" onclick="return doclink('link-189', 'airmass', 'link-14');">airmass</a></tt><tt class="py-op">=</tt><tt class="py-name">np</tt><tt class="py-op">.</tt><tt class="py-name">nan</tt><tt class="py-op">,</tt> </tt>
<a name="L1114"></a><tt class="py-lineno">1114</tt>  <tt class="py-line">                        <tt class="py-name">filename</tt><tt class="py-op">=</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">realpath</tt><tt class="py-op">(</tt><tt class="py-name">obj_file</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1115"></a><tt class="py-lineno">1115</tt>  <tt class="py-line">        <tt class="py-name">contents</tt><tt class="py-op">[</tt><tt class="py-string">'date-avg'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-string">'nan'</tt> </tt>
<a name="L1116"></a><tt class="py-lineno">1116</tt>  <tt class="py-line">        <tt class="py-name">header</tt> <tt class="py-op">=</tt> <tt class="py-name">pyfits</tt><tt class="py-op">.</tt><tt class="py-name">getheader</tt><tt class="py-op">(</tt><tt class="py-name">obj_file</tt><tt class="py-op">)</tt> </tt>
<a name="L1117"></a><tt class="py-lineno">1117</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-name">contents</tt><tt class="py-op">:</tt> </tt>
<a name="L1118"></a><tt class="py-lineno">1118</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-name">header</tt> <tt class="py-keyword">and</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-op">[</tt><tt class="py-string">'unseq'</tt><tt class="py-op">,</tt><tt class="py-string">'prog_id'</tt><tt class="py-op">]</tt><tt class="py-op">:</tt> </tt>
<a name="L1119"></a><tt class="py-lineno">1119</tt>  <tt class="py-line">                <tt class="py-keyword">try</tt><tt class="py-op">:</tt> <tt class="py-name">contents</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">int</tt><tt class="py-op">(</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L1120"></a><tt class="py-lineno">1120</tt>  <tt class="py-line">                <tt class="py-keyword">except</tt><tt class="py-op">:</tt> <tt class="py-keyword">pass</tt> </tt>
<a name="L1121"></a><tt class="py-lineno">1121</tt>  <tt class="py-line">            <tt class="py-keyword">elif</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-name">header</tt> <tt class="py-keyword">and</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-op">[</tt><tt class="py-string">'obsmode'</tt><tt class="py-op">,</tt><tt class="py-string">'observer'</tt><tt class="py-op">,</tt><tt class="py-string">'object'</tt><tt class="py-op">,</tt><tt class="py-string">'date-avg'</tt><tt class="py-op">]</tt><tt class="py-op">:</tt> </tt>
<a name="L1122"></a><tt class="py-lineno">1122</tt>  <tt class="py-line">                <tt class="py-name">contents</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">str</tt><tt class="py-op">(</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L1123"></a><tt class="py-lineno">1123</tt>  <tt class="py-line">            <tt class="py-keyword">elif</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-name">header</tt> <tt class="py-keyword">and</tt> <tt class="py-name">key</tt> <tt class="py-keyword">in</tt> <tt class="py-op">[</tt><tt class="py-string">'ra'</tt><tt class="py-op">,</tt><tt class="py-string">'dec'</tt><tt class="py-op">,</tt><tt class="py-string">'exptime'</tt><tt class="py-op">,</tt><tt class="py-string">'pmtotal'</tt><tt class="py-op">,</tt><tt class="py-string">'bjd'</tt><tt class="py-op">,</tt><tt class="py-string">'bvcor'</tt><tt class="py-op">]</tt><tt class="py-op">:</tt> </tt>
<a name="L1124"></a><tt class="py-lineno">1124</tt>  <tt class="py-line">                <tt class="py-name">contents</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L1125"></a><tt class="py-lineno">1125</tt>  <tt class="py-line">            <tt class="py-keyword">elif</tt> <tt class="py-name">key</tt><tt class="py-op">==</tt><tt class="py-string">'airmass'</tt> <tt class="py-keyword">and</tt> <tt class="py-string">'telalt'</tt> <tt class="py-keyword">in</tt> <tt class="py-name">header</tt><tt class="py-op">:</tt> </tt>
<a name="L1126"></a><tt class="py-lineno">1126</tt>  <tt class="py-line">                <tt class="py-keyword">if</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'telalt'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">&lt;</tt><tt class="py-number">90</tt><tt class="py-op">:</tt> </tt>
<a name="L1127"></a><tt class="py-lineno">1127</tt>  <tt class="py-line">                    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L1128"></a><tt class="py-lineno">1128</tt>  <tt class="py-line">                        <tt class="py-name">contents</tt><tt class="py-op">[</tt><tt class="py-name">key</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt id="link-190" class="py-name"><a title="ivs.observations.airmass
ivs.observations.airmass.airmass" class="py-name" href="#" onclick="return doclink('link-190', 'airmass', 'link-14');">airmass</a></tt><tt class="py-op">.</tt><tt id="link-191" class="py-name"><a title="ivs.observations.airmass
ivs.observations.airmass.airmass" class="py-name" href="#" onclick="return doclink('link-191', 'airmass', 'link-14');">airmass</a></tt><tt class="py-op">(</tt><tt class="py-number">90</tt><tt class="py-op">-</tt><tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">header</tt><tt class="py-op">[</tt><tt class="py-string">'telalt'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1129"></a><tt class="py-lineno">1129</tt>  <tt class="py-line">                    <tt class="py-keyword">except</tt> <tt class="py-name">ValueError</tt><tt class="py-op">:</tt> </tt>
<a name="L1130"></a><tt class="py-lineno">1130</tt>  <tt class="py-line">                        <tt class="py-keyword">pass</tt> </tt>
<a name="L1131"></a><tt class="py-lineno">1131</tt>  <tt class="py-line">                 </tt>
<a name="L1132"></a><tt class="py-lineno">1132</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt><tt class="py-op">.</tt><tt id="link-192" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-192', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-string">'%(unseq)d\t%(prog_id)d\t%(obsmode)s\t%(bvcor)f\t%(observer)s\t%(object)s\t%(ra)f\t%(dec)f\t%(bjd)f\t%(exptime)f\t%(pmtotal)f\t%(date-avg)s\t%(airmass)f\t%(filename)s\n'</tt><tt class="py-op">%</tt><tt class="py-name">contents</tt><tt class="py-op">)</tt> </tt>
<a name="L1133"></a><tt class="py-lineno">1133</tt>  <tt class="py-line">        <tt class="py-name">outfile</tt><tt class="py-op">.</tt><tt class="py-name">flush</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1134"></a><tt class="py-lineno">1134</tt>  <tt class="py-line">        <tt class="py-name">sys</tt><tt class="py-op">.</tt><tt class="py-name">stdout</tt><tt class="py-op">.</tt><tt id="link-193" class="py-name"><a title="ivs.aux.decorators.LogPrinter.write" class="py-name" href="#" onclick="return doclink('link-193', 'write', 'link-94');">write</a></tt><tt class="py-op">(</tt><tt class="py-name">chr</tt><tt class="py-op">(</tt><tt class="py-number">27</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'[u'</tt><tt class="py-op">)</tt> <tt class="py-comment"># reset cursor</tt> </tt>
<a name="L1135"></a><tt class="py-lineno">1135</tt>  <tt class="py-line">    <tt class="py-name">outfile</tt><tt class="py-op">.</tt><tt class="py-name">close</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1136"></a><tt class="py-lineno">1136</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">overview_file</tt> </tt>
</div><a name="L1137"></a><tt class="py-lineno">1137</tt>  <tt class="py-line"> </tt>
<a name="_derive_filelocation_from_raw"></a><div id="_derive_filelocation_from_raw-def"><a name="L1138"></a><tt class="py-lineno">1138</tt> <a class="py-toggle" href="#" id="_derive_filelocation_from_raw-toggle" onclick="return toggle('_derive_filelocation_from_raw');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#_derive_filelocation_from_raw">_derive_filelocation_from_raw</a><tt class="py-op">(</tt><tt class="py-param">rawfile</tt><tt class="py-op">,</tt><tt class="py-param">data_type</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="_derive_filelocation_from_raw-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="_derive_filelocation_from_raw-expanded"><a name="L1139"></a><tt class="py-lineno">1139</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L1140"></a><tt class="py-lineno">1140</tt>  <tt class="py-line"><tt class="py-docstring">    Derive the location of a reduced file from the raw file.</tt> </tt>
<a name="L1141"></a><tt class="py-lineno">1141</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L1142"></a><tt class="py-lineno">1142</tt>  <tt class="py-line">    <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">rawfile</tt><tt class="py-op">.</tt><tt class="py-name">replace</tt><tt class="py-op">(</tt><tt class="py-string">'raw'</tt><tt class="py-op">,</tt><tt class="py-string">'reduced'</tt><tt class="py-op">)</tt> </tt>
<a name="L1143"></a><tt class="py-lineno">1143</tt>  <tt class="py-line">    <tt class="py-name">redfiledir</tt><tt class="py-op">,</tt><tt class="py-name">redfilebase</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">dirname</tt><tt class="py-op">(</tt><tt class="py-name">redfile</tt><tt class="py-op">)</tt><tt class="py-op">,</tt><tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt id="link-194" class="py-name" targets="Variable ivs.sed.reddening.basename=ivs.sed.reddening-module.html#basename"><a title="ivs.sed.reddening.basename" class="py-name" href="#" onclick="return doclink('link-194', 'basename', 'link-194');">basename</a></tt><tt class="py-op">(</tt><tt class="py-name">redfile</tt><tt class="py-op">)</tt> </tt>
<a name="L1144"></a><tt class="py-lineno">1144</tt>  <tt class="py-line">    <tt class="py-name">base</tt><tt class="py-op">,</tt><tt class="py-name">ext</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">splitext</tt><tt class="py-op">(</tt><tt class="py-name">redfilebase</tt><tt class="py-op">)</tt> </tt>
<a name="L1145"></a><tt class="py-lineno">1145</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">data_type</tt><tt class="py-op">.</tt><tt class="py-name">lower</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">==</tt><tt class="py-string">'cosmicsremoved_log'</tt><tt class="py-op">:</tt> </tt>
<a name="L1146"></a><tt class="py-lineno">1146</tt>  <tt class="py-line">        <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">redfiledir</tt><tt class="py-op">,</tt><tt class="py-string">'_'</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">base</tt><tt class="py-op">,</tt><tt class="py-string">'ext'</tt><tt class="py-op">,</tt><tt class="py-string">'CosmicsRemoved'</tt><tt class="py-op">,</tt><tt class="py-string">'log'</tt><tt class="py-op">,</tt><tt class="py-string">'merged'</tt><tt class="py-op">,</tt><tt class="py-string">'c'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'.fits'</tt> </tt>
<a name="L1147"></a><tt class="py-lineno">1147</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">data_type</tt><tt class="py-op">.</tt><tt class="py-name">lower</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">==</tt><tt class="py-string">'cosmicsremoved_wavelength'</tt><tt class="py-op">:</tt> </tt>
<a name="L1148"></a><tt class="py-lineno">1148</tt>  <tt class="py-line">        <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">redfiledir</tt><tt class="py-op">,</tt><tt class="py-string">'_'</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">base</tt><tt class="py-op">,</tt><tt class="py-string">'ext'</tt><tt class="py-op">,</tt><tt class="py-string">'CosmicsRemoved'</tt><tt class="py-op">,</tt><tt class="py-string">'wavelength'</tt><tt class="py-op">,</tt><tt class="py-string">'merged'</tt><tt class="py-op">,</tt><tt class="py-string">'c'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'.fits'</tt> </tt>
<a name="L1149"></a><tt class="py-lineno">1149</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">data_type</tt><tt class="py-op">.</tt><tt class="py-name">lower</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">==</tt><tt class="py-string">'log'</tt><tt class="py-op">:</tt> </tt>
<a name="L1150"></a><tt class="py-lineno">1150</tt>  <tt class="py-line">        <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">redfiledir</tt><tt class="py-op">,</tt><tt class="py-string">'_'</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">base</tt><tt class="py-op">,</tt><tt class="py-string">'ext'</tt><tt class="py-op">,</tt><tt class="py-string">'log'</tt><tt class="py-op">,</tt><tt class="py-string">'merged'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'.fits'</tt> </tt>
<a name="L1151"></a><tt class="py-lineno">1151</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">data_type</tt><tt class="py-op">.</tt><tt class="py-name">lower</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">==</tt><tt class="py-string">'wavelength'</tt><tt class="py-op">:</tt> </tt>
<a name="L1152"></a><tt class="py-lineno">1152</tt>  <tt class="py-line">        <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">redfiledir</tt><tt class="py-op">,</tt><tt class="py-string">'_'</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-op">[</tt><tt class="py-name">base</tt><tt class="py-op">,</tt><tt class="py-string">'ext'</tt><tt class="py-op">,</tt><tt class="py-string">'wavelength'</tt><tt class="py-op">,</tt><tt class="py-string">'merged'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">+</tt><tt class="py-string">'.fits'</tt> </tt>
<a name="L1153"></a><tt class="py-lineno">1153</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L1154"></a><tt class="py-lineno">1154</tt>  <tt class="py-line">        <tt class="py-name">redfile</tt> <tt class="py-op">=</tt> <tt class="py-name">rawfile</tt> </tt>
<a name="L1155"></a><tt class="py-lineno">1155</tt>  <tt class="py-line">    <tt class="py-comment">#-- extra check to see if it exists</tt> </tt>
<a name="L1156"></a><tt class="py-lineno">1156</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">os</tt><tt class="py-op">.</tt><tt class="py-name">path</tt><tt class="py-op">.</tt><tt class="py-name">isfile</tt><tt class="py-op">(</tt><tt class="py-name">redfile</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L1157"></a><tt class="py-lineno">1157</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-string">'naf'</tt> </tt>
<a name="L1158"></a><tt class="py-lineno">1158</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">redfile</tt> </tt>
</div><a name="L1159"></a><tt class="py-lineno">1159</tt>  <tt class="py-line"> </tt>
<a name="_timestamp2jd"></a><div id="_timestamp2jd-def"><a name="L1160"></a><tt class="py-lineno">1160</tt> <a class="py-toggle" href="#" id="_timestamp2jd-toggle" onclick="return toggle('_timestamp2jd');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#_timestamp2jd">_timestamp2jd</a><tt class="py-op">(</tt><tt class="py-param">timestamp</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="_timestamp2jd-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="_timestamp2jd-expanded"><a name="L1161"></a><tt class="py-lineno">1161</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L1162"></a><tt class="py-lineno">1162</tt>  <tt class="py-line"><tt class="py-docstring">    Convert the time stamp from a HERMES FITS 'date-avg' to Julian Date.</tt> </tt>
<a name="L1163"></a><tt class="py-lineno">1163</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1164"></a><tt class="py-lineno">1164</tt>  <tt class="py-line"><tt class="py-docstring">    @param timestamp: string from 'date-avg'</tt> </tt>
<a name="L1165"></a><tt class="py-lineno">1165</tt>  <tt class="py-line"><tt class="py-docstring">    @type timestamp: string</tt> </tt>
<a name="L1166"></a><tt class="py-lineno">1166</tt>  <tt class="py-line"><tt class="py-docstring">    @return: julian date</tt> </tt>
<a name="L1167"></a><tt class="py-lineno">1167</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: float</tt> </tt>
<a name="L1168"></a><tt class="py-lineno">1168</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L1169"></a><tt class="py-lineno">1169</tt>  <tt class="py-line">    <tt class="py-name">date</tt><tt class="py-op">,</tt> <tt class="py-name">hour</tt> <tt class="py-op">=</tt> <tt class="py-name">timestamp</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">"T"</tt><tt class="py-op">)</tt> </tt>
<a name="L1170"></a><tt class="py-lineno">1170</tt>  <tt class="py-line">    <tt class="py-name">year</tt><tt class="py-op">,</tt> <tt class="py-name">month</tt><tt class="py-op">,</tt> <tt class="py-name">day</tt> <tt class="py-op">=</tt> <tt class="py-name">date</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">"-"</tt><tt class="py-op">)</tt> </tt>
<a name="L1171"></a><tt class="py-lineno">1171</tt>  <tt class="py-line">    <tt class="py-name">hour</tt><tt class="py-op">,</tt> <tt class="py-name">minute</tt><tt class="py-op">,</tt> <tt class="py-name">second</tt> <tt class="py-op">=</tt> <tt class="py-name">hour</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">":"</tt><tt class="py-op">)</tt> </tt>
<a name="L1172"></a><tt class="py-lineno">1172</tt>  <tt class="py-line">    <tt class="py-name">year</tt>   <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">year</tt><tt class="py-op">)</tt> </tt>
<a name="L1173"></a><tt class="py-lineno">1173</tt>  <tt class="py-line">    <tt class="py-name">month</tt>  <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">month</tt><tt class="py-op">)</tt> </tt>
<a name="L1174"></a><tt class="py-lineno">1174</tt>  <tt class="py-line">    <tt class="py-name">day</tt>    <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">day</tt><tt class="py-op">)</tt> </tt>
<a name="L1175"></a><tt class="py-lineno">1175</tt>  <tt class="py-line">    <tt class="py-name">hour</tt>   <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">hour</tt><tt class="py-op">)</tt> </tt>
<a name="L1176"></a><tt class="py-lineno">1176</tt>  <tt class="py-line">    <tt class="py-name">minute</tt> <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">minute</tt><tt class="py-op">)</tt> </tt>
<a name="L1177"></a><tt class="py-lineno">1177</tt>  <tt class="py-line">    <tt class="py-name">second</tt> <tt class="py-op">=</tt> <tt class="py-name">float</tt><tt class="py-op">(</tt><tt class="py-name">second</tt><tt class="py-op">)</tt> </tt>
<a name="L1178"></a><tt class="py-lineno">1178</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-195" class="py-name"><a title="ivs.units.conversions" class="py-name" href="#" onclick="return doclink('link-195', 'conversions', 'link-19');">conversions</a></tt><tt class="py-op">.</tt><tt id="link-196" class="py-name" targets="Method ivs.units.conversions.Unit.convert()=ivs.units.conversions.Unit-class.html#convert,Function ivs.units.conversions.convert()=ivs.units.conversions-module.html#convert"><a title="ivs.units.conversions.Unit.convert
ivs.units.conversions.convert" class="py-name" href="#" onclick="return doclink('link-196', 'convert', 'link-196');">convert</a></tt><tt class="py-op">(</tt><tt class="py-string">"CD"</tt><tt class="py-op">,</tt><tt class="py-string">"JD"</tt><tt class="py-op">,</tt><tt class="py-op">(</tt><tt class="py-name">year</tt><tt class="py-op">,</tt> <tt class="py-name">month</tt><tt class="py-op">,</tt> <tt class="py-name">day</tt><tt class="py-op">,</tt> <tt class="py-name">hour</tt><tt class="py-op">,</tt> <tt class="py-name">minute</tt><tt class="py-op">,</tt> <tt class="py-name">second</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
</div><a name="L1179"></a><tt class="py-lineno">1179</tt>  <tt class="py-line"> </tt>
<a name="_timestamp2datetime"></a><div id="_timestamp2datetime-def"><a name="L1180"></a><tt class="py-lineno">1180</tt> <a class="py-toggle" href="#" id="_timestamp2datetime-toggle" onclick="return toggle('_timestamp2datetime');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#_timestamp2datetime">_timestamp2datetime</a><tt class="py-op">(</tt><tt class="py-param">timestamp</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="_timestamp2datetime-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="_timestamp2datetime-expanded"><a name="L1181"></a><tt class="py-lineno">1181</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L1182"></a><tt class="py-lineno">1182</tt>  <tt class="py-line"><tt class="py-docstring">    Convert the time stamp from a HERMES FITS 'date-avg' to a datetime object.</tt> </tt>
<a name="L1183"></a><tt class="py-lineno">1183</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1184"></a><tt class="py-lineno">1184</tt>  <tt class="py-line"><tt class="py-docstring">    @param timestamp: string from 'date-avg'</tt> </tt>
<a name="L1185"></a><tt class="py-lineno">1185</tt>  <tt class="py-line"><tt class="py-docstring">    @type timestamp: string</tt> </tt>
<a name="L1186"></a><tt class="py-lineno">1186</tt>  <tt class="py-line"><tt class="py-docstring">    @return: datetime object</tt> </tt>
<a name="L1187"></a><tt class="py-lineno">1187</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: datetime</tt> </tt>
<a name="L1188"></a><tt class="py-lineno">1188</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L1189"></a><tt class="py-lineno">1189</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">timestamp</tt><tt class="py-op">==</tt><tt class="py-string">'nan'</tt><tt class="py-op">:</tt> </tt>
<a name="L1190"></a><tt class="py-lineno">1190</tt>  <tt class="py-line">        <tt class="py-name">timestamp</tt> <tt class="py-op">=</tt> <tt class="py-string">'1000-01-01T00:00:00'</tt> </tt>
<a name="L1191"></a><tt class="py-lineno">1191</tt>  <tt class="py-line">     </tt>
<a name="L1192"></a><tt class="py-lineno">1192</tt>  <tt class="py-line">    <tt class="py-name">timestamp</tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-name">int</tt><tt class="py-op">(</tt><tt class="py-name">i</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">i</tt> <tt class="py-keyword">in</tt> <tt class="py-string">' '</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-string">' '</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-string">' '</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-string">' '</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">timestamp</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">'-'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">'T'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">':'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">'.'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">]</tt> </tt>
<a name="L1193"></a><tt class="py-lineno">1193</tt>  <tt class="py-line">    <tt class="py-comment">#-- only the day is given, make sure to switch it to mid-day</tt> </tt>
<a name="L1194"></a><tt class="py-lineno">1194</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">timestamp</tt><tt class="py-op">)</tt><tt class="py-op">==</tt><tt class="py-number">3</tt><tt class="py-op">:</tt> </tt>
<a name="L1195"></a><tt class="py-lineno">1195</tt>  <tt class="py-line">        <tt class="py-name">timestamp</tt> <tt class="py-op">+=</tt> <tt class="py-op">[</tt><tt class="py-number">12</tt><tt class="py-op">,</tt><tt class="py-number">0</tt><tt class="py-op">,</tt><tt class="py-number">0</tt><tt class="py-op">]</tt> </tt>
<a name="L1196"></a><tt class="py-lineno">1196</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">datetime</tt><tt class="py-op">.</tt><tt class="py-name">datetime</tt><tt class="py-op">(</tt><tt class="py-op">*</tt><tt class="py-name">timestamp</tt><tt class="py-op">)</tt> </tt>
</div><a name="L1197"></a><tt class="py-lineno">1197</tt>  <tt class="py-line"> </tt>
<a name="_etree_to_dict"></a><div id="_etree_to_dict-def"><a name="L1198"></a><tt class="py-lineno">1198</tt> <a class="py-toggle" href="#" id="_etree_to_dict-toggle" onclick="return toggle('_etree_to_dict');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#_etree_to_dict">_etree_to_dict</a><tt class="py-op">(</tt><tt class="py-param">t</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="_etree_to_dict-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="_etree_to_dict-expanded"><a name="L1199"></a><tt class="py-lineno">1199</tt>  <tt class="py-line">    <tt class="py-docstring">"""</tt> </tt>
<a name="L1200"></a><tt class="py-lineno">1200</tt>  <tt class="py-line"><tt class="py-docstring">    Convert a xml tree to a dictionary.</tt> </tt>
<a name="L1201"></a><tt class="py-lineno">1201</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1202"></a><tt class="py-lineno">1202</tt>  <tt class="py-line"><tt class="py-docstring">    @param t: the xml tree</tt> </tt>
<a name="L1203"></a><tt class="py-lineno">1203</tt>  <tt class="py-line"><tt class="py-docstring">    @type t: ElementTree root</tt> </tt>
<a name="L1204"></a><tt class="py-lineno">1204</tt>  <tt class="py-line"><tt class="py-docstring">    </tt> </tt>
<a name="L1205"></a><tt class="py-lineno">1205</tt>  <tt class="py-line"><tt class="py-docstring">    @return: the xml tree as a dictionary</tt> </tt>
<a name="L1206"></a><tt class="py-lineno">1206</tt>  <tt class="py-line"><tt class="py-docstring">    @rtype: dict</tt> </tt>
<a name="L1207"></a><tt class="py-lineno">1207</tt>  <tt class="py-line"><tt class="py-docstring">    """</tt> </tt>
<a name="L1208"></a><tt class="py-lineno">1208</tt>  <tt class="py-line">    <tt class="py-name">d</tt> <tt class="py-op">=</tt> <tt class="py-op">{</tt><tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">tag</tt><tt class="py-op">:</tt> <tt class="py-op">{</tt><tt class="py-op">}</tt> <tt class="py-keyword">if</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">attrib</tt> <tt class="py-keyword">else</tt> <tt class="py-name">None</tt><tt class="py-op">}</tt> </tt>
<a name="L1209"></a><tt class="py-lineno">1209</tt>  <tt class="py-line">    <tt class="py-name">children</tt> <tt class="py-op">=</tt> <tt class="py-name">list</tt><tt class="py-op">(</tt><tt class="py-name">t</tt><tt class="py-op">)</tt> </tt>
<a name="L1210"></a><tt class="py-lineno">1210</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">children</tt><tt class="py-op">:</tt> </tt>
<a name="L1211"></a><tt class="py-lineno">1211</tt>  <tt class="py-line">        <tt class="py-name">dd</tt> <tt class="py-op">=</tt> <tt class="py-name">defaultdict</tt><tt class="py-op">(</tt><tt class="py-name">list</tt><tt class="py-op">)</tt> </tt>
<a name="L1212"></a><tt class="py-lineno">1212</tt>  <tt class="py-line">        <tt class="py-keyword">for</tt> <tt class="py-name">dc</tt> <tt class="py-keyword">in</tt> <tt class="py-name">map</tt><tt class="py-op">(</tt><tt id="link-197" class="py-name"><a title="ivs.catalogs.hermes._etree_to_dict" class="py-name" href="#" onclick="return doclink('link-197', '_etree_to_dict', 'link-86');">_etree_to_dict</a></tt><tt class="py-op">,</tt> <tt class="py-name">children</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L1213"></a><tt class="py-lineno">1213</tt>  <tt class="py-line">            <tt class="py-keyword">for</tt> <tt class="py-name">k</tt><tt class="py-op">,</tt> <tt class="py-name">v</tt> <tt class="py-keyword">in</tt> <tt class="py-name">dc</tt><tt class="py-op">.</tt><tt class="py-name">iteritems</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L1214"></a><tt class="py-lineno">1214</tt>  <tt class="py-line">                <tt class="py-name">dd</tt><tt class="py-op">[</tt><tt class="py-name">k</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt class="py-name">append</tt><tt class="py-op">(</tt><tt class="py-name">v</tt><tt class="py-op">)</tt> </tt>
<a name="L1215"></a><tt class="py-lineno">1215</tt>  <tt class="py-line">        <tt class="py-name">d</tt> <tt class="py-op">=</tt> <tt class="py-op">{</tt><tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">tag</tt><tt class="py-op">:</tt> <tt class="py-op">{</tt><tt class="py-name">k</tt><tt class="py-op">:</tt><tt class="py-name">v</tt><tt class="py-op">[</tt><tt class="py-number">0</tt><tt class="py-op">]</tt> <tt class="py-keyword">if</tt> <tt class="py-name">len</tt><tt class="py-op">(</tt><tt class="py-name">v</tt><tt class="py-op">)</tt> <tt class="py-op">==</tt> <tt class="py-number">1</tt> <tt class="py-keyword">else</tt> <tt class="py-name">v</tt> <tt class="py-keyword">for</tt> <tt class="py-name">k</tt><tt class="py-op">,</tt> <tt class="py-name">v</tt> <tt class="py-keyword">in</tt> <tt class="py-name">dd</tt><tt class="py-op">.</tt><tt class="py-name">iteritems</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">}</tt><tt class="py-op">}</tt> </tt>
<a name="L1216"></a><tt class="py-lineno">1216</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">attrib</tt><tt class="py-op">:</tt> </tt>
<a name="L1217"></a><tt class="py-lineno">1217</tt>  <tt class="py-line">        <tt class="py-name">d</tt><tt class="py-op">[</tt><tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">tag</tt><tt class="py-op">]</tt><tt class="py-op">.</tt><tt id="link-198" class="py-name"><a title="ivs.aux.progressMeter.ProgressMeter.update
ivs.io.database.Database.update" class="py-name" href="#" onclick="return doclink('link-198', 'update', 'link-90');">update</a></tt><tt class="py-op">(</tt><tt class="py-op">(</tt><tt class="py-string">'@'</tt> <tt class="py-op">+</tt> <tt class="py-name">k</tt><tt class="py-op">,</tt> <tt class="py-name">v</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt class="py-name">k</tt><tt class="py-op">,</tt> <tt class="py-name">v</tt> <tt class="py-keyword">in</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">attrib</tt><tt class="py-op">.</tt><tt class="py-name">iteritems</tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L1218"></a><tt class="py-lineno">1218</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">text</tt><tt class="py-op">:</tt> </tt>
<a name="L1219"></a><tt class="py-lineno">1219</tt>  <tt class="py-line">        <tt class="py-name">text</tt> <tt class="py-op">=</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">text</tt><tt class="py-op">.</tt><tt class="py-name">strip</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1220"></a><tt class="py-lineno">1220</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">children</tt> <tt class="py-keyword">or</tt> <tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">attrib</tt><tt class="py-op">:</tt> </tt>
<a name="L1221"></a><tt class="py-lineno">1221</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt class="py-name">text</tt><tt class="py-op">:</tt> </tt>
<a name="L1222"></a><tt class="py-lineno">1222</tt>  <tt class="py-line">              <tt class="py-name">d</tt><tt class="py-op">[</tt><tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">tag</tt><tt class="py-op">]</tt><tt class="py-op">[</tt><tt class="py-string">'#text'</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">text</tt> </tt>
<a name="L1223"></a><tt class="py-lineno">1223</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L1224"></a><tt class="py-lineno">1224</tt>  <tt class="py-line">            <tt class="py-name">d</tt><tt class="py-op">[</tt><tt class="py-name">t</tt><tt class="py-op">.</tt><tt class="py-name">tag</tt><tt class="py-op">]</tt> <tt class="py-op">=</tt> <tt class="py-name">text</tt> </tt>
<a name="L1225"></a><tt class="py-lineno">1225</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">d</tt> </tt>
</div><a name="L1226"></a><tt class="py-lineno">1226</tt>  <tt class="py-line"> </tt>
<a name="_subprocess_execute"></a><div id="_subprocess_execute-def"><a name="L1227"></a><tt class="py-lineno">1227</tt> <a class="py-toggle" href="#" id="_subprocess_execute-toggle" onclick="return toggle('_subprocess_execute');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="ivs.catalogs.hermes-module.html#_subprocess_execute">_subprocess_execute</a><tt class="py-op">(</tt><tt class="py-param">command</tt><tt class="py-op">,</tt> <tt class="py-param">time_out</tt><tt class="py-op">=</tt><tt class="py-number">100</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="_subprocess_execute-collapsed" style="display:none;" pad="++++" indent="++++"></div><div id="_subprocess_execute-expanded"><a name="L1228"></a><tt class="py-lineno">1228</tt>  <tt class="py-line">    <tt class="py-docstring">"""executing the command with a watchdog"""</tt> </tt>
<a name="L1229"></a><tt class="py-lineno">1229</tt>  <tt class="py-line"> </tt>
<a name="L1230"></a><tt class="py-lineno">1230</tt>  <tt class="py-line">    <tt class="py-comment"># launching the command</tt> </tt>
<a name="L1231"></a><tt class="py-lineno">1231</tt>  <tt class="py-line">    <tt class="py-name">c</tt> <tt class="py-op">=</tt> <tt class="py-name">subprocess</tt><tt class="py-op">.</tt><tt class="py-name">Popen</tt><tt class="py-op">(</tt><tt class="py-name">command</tt><tt class="py-op">,</tt> <tt class="py-name">stdout</tt><tt class="py-op">=</tt><tt class="py-name">subprocess</tt><tt class="py-op">.</tt><tt class="py-name">PIPE</tt><tt class="py-op">)</tt> </tt>
<a name="L1232"></a><tt class="py-lineno">1232</tt>  <tt class="py-line"> </tt>
<a name="L1233"></a><tt class="py-lineno">1233</tt>  <tt class="py-line">    <tt class="py-comment"># now waiting for the command to complete</tt> </tt>
<a name="L1234"></a><tt class="py-lineno">1234</tt>  <tt class="py-line">    <tt class="py-name">t</tt> <tt class="py-op">=</tt> <tt class="py-number">0</tt> </tt>
<a name="L1235"></a><tt class="py-lineno">1235</tt>  <tt class="py-line">    <tt class="py-keyword">while</tt> <tt class="py-name">t</tt> <tt class="py-op">&lt;</tt> <tt class="py-name">time_out</tt> <tt class="py-keyword">and</tt> <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">poll</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L1236"></a><tt class="py-lineno">1236</tt>  <tt class="py-line">        <tt class="py-name">time</tt><tt class="py-op">.</tt><tt class="py-name">sleep</tt><tt class="py-op">(</tt><tt class="py-number">1</tt><tt class="py-op">)</tt>  <tt class="py-comment"># (comment 1)</tt> </tt>
<a name="L1237"></a><tt class="py-lineno">1237</tt>  <tt class="py-line">        <tt class="py-name">t</tt> <tt class="py-op">+=</tt> <tt class="py-number">1</tt> </tt>
<a name="L1238"></a><tt class="py-lineno">1238</tt>  <tt class="py-line"> </tt>
<a name="L1239"></a><tt class="py-lineno">1239</tt>  <tt class="py-line">    <tt class="py-comment"># there are two possibilities for the while to have stopped:</tt> </tt>
<a name="L1240"></a><tt class="py-lineno">1240</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">poll</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L1241"></a><tt class="py-lineno">1241</tt>  <tt class="py-line">        <tt class="py-comment"># in the case the process did not complete, we kill it</tt> </tt>
<a name="L1242"></a><tt class="py-lineno">1242</tt>  <tt class="py-line">        <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">terminate</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1243"></a><tt class="py-lineno">1243</tt>  <tt class="py-line">        <tt class="py-comment"># and fill the return code with some error value</tt> </tt>
<a name="L1244"></a><tt class="py-lineno">1244</tt>  <tt class="py-line">        <tt class="py-name">out</tt><tt class="py-op">,</tt> <tt class="py-name">err</tt> <tt class="py-op">=</tt> <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">communicate</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1245"></a><tt class="py-lineno">1245</tt>  <tt class="py-line">        <tt class="py-name">returncode</tt> <tt class="py-op">=</tt> <tt class="py-op">-</tt><tt class="py-number">1</tt> </tt>
<a name="L1246"></a><tt class="py-lineno">1246</tt>  <tt class="py-line"> </tt>
<a name="L1247"></a><tt class="py-lineno">1247</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt>                  </tt>
<a name="L1248"></a><tt class="py-lineno">1248</tt>  <tt class="py-line">        <tt class="py-comment"># in the case the process completed normally</tt> </tt>
<a name="L1249"></a><tt class="py-lineno">1249</tt>  <tt class="py-line">        <tt class="py-name">out</tt><tt class="py-op">,</tt> <tt class="py-name">err</tt> <tt class="py-op">=</tt> <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">communicate</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1250"></a><tt class="py-lineno">1250</tt>  <tt class="py-line">        <tt class="py-name">returncode</tt> <tt class="py-op">=</tt> <tt class="py-name">c</tt><tt class="py-op">.</tt><tt class="py-name">poll</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L1251"></a><tt class="py-lineno">1251</tt>  <tt class="py-line"> </tt>
<a name="L1252"></a><tt class="py-lineno">1252</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">out</tt><tt class="py-op">,</tt> <tt class="py-name">err</tt><tt class="py-op">,</tt> <tt class="py-name">returncode</tt> </tt>
</div><a name="L1253"></a><tt class="py-lineno">1253</tt>  <tt class="py-line"> </tt>
<a name="L1254"></a><tt class="py-lineno">1254</tt>  <tt class="py-line"><tt class="py-comment">#}</tt> </tt>
<a name="L1255"></a><tt class="py-lineno">1255</tt>  <tt class="py-line"> </tt>
<a name="L1256"></a><tt class="py-lineno">1256</tt>  <tt class="py-line"><tt class="py-keyword">if</tt> <tt class="py-name">__name__</tt><tt class="py-op">==</tt><tt class="py-string">"__main__"</tt><tt class="py-op">:</tt> </tt>
<a name="L1257"></a><tt class="py-lineno">1257</tt>  <tt class="py-line">     </tt>
<a name="L1258"></a><tt class="py-lineno">1258</tt>  <tt class="py-line">    <tt class="py-keyword">from</tt> <tt id="link-199" class="py-name"><a title="ivs" class="py-name" href="#" onclick="return doclink('link-199', 'ivs', 'link-2');">ivs</a></tt><tt class="py-op">.</tt><tt id="link-200" class="py-name"><a title="ivs.aux" class="py-name" href="#" onclick="return doclink('link-200', 'aux', 'link-10');">aux</a></tt> <tt class="py-keyword">import</tt> <tt id="link-201" class="py-name"><a title="ivs.aux.loggers" class="py-name" href="#" onclick="return doclink('link-201', 'loggers', 'link-11');">loggers</a></tt> </tt>
<a name="L1259"></a><tt class="py-lineno">1259</tt>  <tt class="py-line">    <tt id="link-202" class="py-name"><a title="ivs.asteroseismology.granulation.logger
ivs.asteroseismology.redgiantfreqs.logger
ivs.asteroseismology.solarosc.logger
ivs.aux.decorators.logger
ivs.catalogs.coralie.logger
ivs.catalogs.corot.logger
ivs.catalogs.crossmatch.logger
ivs.catalogs.gator.logger
ivs.catalogs.gcpd.logger
ivs.catalogs.hermes.logger
ivs.catalogs.hipparcos.logger
ivs.catalogs.kepler.logger
ivs.catalogs.mast.logger
ivs.catalogs.p7.logger
ivs.catalogs.sesame.logger
ivs.catalogs.vizier.logger
ivs.io.ascii.logger
ivs.io.fits.logger
ivs.io.hdf5.logger
ivs.observations.distance.logger
ivs.observations.visibility.logger
ivs.roche.binary.logger
ivs.sed.builder.logger
ivs.sed.creategrids.logger
ivs.sed.decorators.logger
ivs.sed.distance.logger
ivs.sed.extinctionmodels.logger
ivs.sed.filters.logger
ivs.sed.fit.logger
ivs.sed.limbdark.logger
ivs.sed.model.logger
ivs.sed.reddening.logger
ivs.sigproc.evaluate.logger
ivs.sigproc.filtering.logger
ivs.sigproc.fit.logger
ivs.sigproc.funclib.logger
ivs.spectra.linelists.logger
ivs.spectra.model.logger
ivs.spectra.tools.logger
ivs.stellar_evolution.adipls.logger
ivs.stellar_evolution.fileio.logger
ivs.stellar_evolution.gyre.logger
ivs.stellar_evolution.puls.logger
ivs.timeseries.decorators.logger
ivs.timeseries.freqanalyse.logger
ivs.timeseries.keplerorbit.logger
ivs.timeseries.pergrams.logger
ivs.timeseries.windowfunctions.logger
ivs.units.conversions.logger" class="py-name" href="#" onclick="return doclink('link-202', 'logger', 'link-27');">logger</a></tt> <tt class="py-op">=</tt> <tt id="link-203" class="py-name"><a title="ivs.aux.loggers" class="py-name" href="#" onclick="return doclink('link-203', 'loggers', 'link-11');">loggers</a></tt><tt class="py-op">.</tt><tt id="link-204" class="py-name" targets="Function ivs.aux.loggers.get_basic_logger()=ivs.aux.loggers-module.html#get_basic_logger"><a title="ivs.aux.loggers.get_basic_logger" class="py-name" href="#" onclick="return doclink('link-204', 'get_basic_logger', 'link-204');">get_basic_logger</a></tt><tt class="py-op">(</tt><tt class="py-name">clevel</tt><tt class="py-op">=</tt><tt class="py-string">'debug'</tt><tt class="py-op">)</tt> </tt>
<a name="L1260"></a><tt class="py-lineno">1260</tt>  <tt class="py-line">     </tt>
<a name="L1261"></a><tt class="py-lineno">1261</tt>  <tt class="py-line">    <tt class="py-name">filename</tt> <tt class="py-op">=</tt> <tt class="py-string">'/home/jorisv/sdB/Uli/hermesvr/reduced/2451576_HRF_OBJ_ext_CosmicsRemoved.fits'</tt> </tt>
<a name="L1262"></a><tt class="py-lineno">1262</tt>  <tt class="py-line">    <tt class="py-name">wvl_file</tt> <tt class="py-op">=</tt> <tt class="py-string">'/home/jorisv/sdB/Uli/hermesvr/reduced/2451577'</tt> </tt>
<a name="L1263"></a><tt class="py-lineno">1263</tt>  <tt class="py-line">     </tt>
<a name="L1264"></a><tt class="py-lineno">1264</tt>  <tt class="py-line">    <tt class="py-name">unseq</tt><tt class="py-op">,</tt><tt id="link-205" class="py-name" targets="Variable ivs.makedoc.output=ivs.makedoc-module.html#output"><a title="ivs.makedoc.output" class="py-name" href="#" onclick="return doclink('link-205', 'output', 'link-205');">output</a></tt><tt class="py-op">,</tt> <tt class="py-name">error</tt> <tt class="py-op">=</tt> <tt id="link-206" class="py-name" targets="Function ivs.catalogs.hermes.run_hermesVR()=ivs.catalogs.hermes-module.html#run_hermesVR"><a title="ivs.catalogs.hermes.run_hermesVR" class="py-name" href="#" onclick="return doclink('link-206', 'run_hermesVR', 'link-206');">run_hermesVR</a></tt><tt class="py-op">(</tt><tt class="py-name">filename</tt><tt class="py-op">,</tt> <tt class="py-name">wvl_file</tt><tt class="py-op">=</tt><tt class="py-name">wvl_file</tt><tt class="py-op">,</tt> <tt class="py-name">verbose</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">,</tt> <tt class="py-name">version</tt><tt class="py-op">=</tt><tt class="py-string">'trunk'</tt><tt class="py-op">,</tt> <tt class="py-name">timeout</tt><tt class="py-op">=</tt><tt class="py-number">500</tt><tt class="py-op">)</tt> </tt>
<a name="L1265"></a><tt class="py-lineno">1265</tt>  <tt class="py-line">     </tt>
<a name="L1266"></a><tt class="py-lineno">1266</tt>  <tt class="py-line">    <tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt id="link-207" class="py-name" targets="Function ivs.catalogs.hermes.read_hermesVR_velocities()=ivs.catalogs.hermes-module.html#read_hermesVR_velocities"><a title="ivs.catalogs.hermes.read_hermesVR_velocities" class="py-name" href="#" onclick="return doclink('link-207', 'read_hermesVR_velocities', 'link-207');">read_hermesVR_velocities</a></tt><tt class="py-op">(</tt><tt class="py-name">unseq</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-name">unseq</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L1267"></a><tt class="py-lineno">1267</tt>  <tt class="py-line">     </tt>
<a name="L1268"></a><tt class="py-lineno">1268</tt>  <tt class="py-line">    <tt class="py-keyword">print</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'vrad'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> <tt class="py-string">' +- '</tt><tt class="py-op">,</tt> <tt class="py-name">data</tt><tt class="py-op">[</tt><tt class="py-string">'vraderr'</tt><tt class="py-op">]</tt> </tt>
<a name="L1269"></a><tt class="py-lineno">1269</tt>  <tt class="py-line">     </tt>
<a name="L1270"></a><tt class="py-lineno">1270</tt>  <tt class="py-line">    <tt class="py-comment">#import time</tt> </tt>
<a name="L1271"></a><tt class="py-lineno">1271</tt>  <tt class="py-line">    <tt class="py-comment">#import sys</tt> </tt>
<a name="L1272"></a><tt class="py-lineno">1272</tt>  <tt class="py-line">    <tt class="py-comment">#import doctest</tt> </tt>
<a name="L1273"></a><tt class="py-lineno">1273</tt>  <tt class="py-line">    <tt class="py-comment">#import shutil</tt> </tt>
<a name="L1274"></a><tt class="py-lineno">1274</tt>  <tt class="py-line">    <tt class="py-comment">#import pylab as pl</tt> </tt>
<a name="L1275"></a><tt class="py-lineno">1275</tt>  <tt class="py-line">     </tt>
<a name="L1276"></a><tt class="py-lineno">1276</tt>  <tt class="py-line">    <tt class="py-comment">#if len(sys.argv[1:])==0:</tt> </tt>
<a name="L1277"></a><tt class="py-lineno">1277</tt>  <tt class="py-line">        <tt class="py-comment">#doctest.testmod()</tt> </tt>
<a name="L1278"></a><tt class="py-lineno">1278</tt>  <tt class="py-line">        <tt class="py-comment">#pl.show()</tt> </tt>
<a name="L1279"></a><tt class="py-lineno">1279</tt>  <tt class="py-line">     </tt>
<a name="L1280"></a><tt class="py-lineno">1280</tt>  <tt class="py-line">    <tt class="py-comment">#elif sys.argv[1].lower()=='update':</tt> </tt>
<a name="L1281"></a><tt class="py-lineno">1281</tt>  <tt class="py-line">        <tt class="py-comment">#logger = loggers.get_basic_logger()</tt> </tt>
<a name="L1282"></a><tt class="py-lineno">1282</tt>  <tt class="py-line">         </tt>
<a name="L1283"></a><tt class="py-lineno">1283</tt>  <tt class="py-line">        <tt class="py-comment">#while 1:</tt> </tt>
<a name="L1284"></a><tt class="py-lineno">1284</tt>  <tt class="py-line">            <tt class="py-comment">#source = make_data_overview()</tt> </tt>
<a name="L1285"></a><tt class="py-lineno">1285</tt>  <tt class="py-line">            <tt class="py-comment">#destination = '/STER/mercator/hermes/HermesFullDataOverview.tsv'</tt> </tt>
<a name="L1286"></a><tt class="py-lineno">1286</tt>  <tt class="py-line">            <tt class="py-comment">#if os.path.isfile(destination):</tt> </tt>
<a name="L1287"></a><tt class="py-lineno">1287</tt>  <tt class="py-line">                <tt class="py-comment">#original_size = os.path.getsize(destination)</tt> </tt>
<a name="L1288"></a><tt class="py-lineno">1288</tt>  <tt class="py-line">                <tt class="py-comment">#logger.info("Original file size: %.6f MB"%(original_size/1.0e6))</tt> </tt>
<a name="L1289"></a><tt class="py-lineno">1289</tt>  <tt class="py-line">            <tt class="py-comment">#else:</tt> </tt>
<a name="L1290"></a><tt class="py-lineno">1290</tt>  <tt class="py-line">                <tt class="py-comment">#logger.info('New file will be created')</tt> </tt>
<a name="L1291"></a><tt class="py-lineno">1291</tt>  <tt class="py-line">            <tt class="py-comment">#new_size = os.path.getsize(source)</tt> </tt>
<a name="L1292"></a><tt class="py-lineno">1292</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info("New file size: %.6f MB"%(new_size/1.0e6))</tt> </tt>
<a name="L1293"></a><tt class="py-lineno">1293</tt>  <tt class="py-line">            <tt class="py-comment">#os.system('cp %s %s'%(source,destination))</tt> </tt>
<a name="L1294"></a><tt class="py-lineno">1294</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info('Copied %s to %s'%(source,destination))</tt> </tt>
<a name="L1295"></a><tt class="py-lineno">1295</tt>  <tt class="py-line">             </tt>
<a name="L1296"></a><tt class="py-lineno">1296</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info('Going to bed know... see you tomorrow!')</tt> </tt>
<a name="L1297"></a><tt class="py-lineno">1297</tt>  <tt class="py-line">            <tt class="py-comment">#time.sleep(24*3600)</tt> </tt>
<a name="L1298"></a><tt class="py-lineno">1298</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info('Rise and shine!')</tt> </tt>
<a name="L1299"></a><tt class="py-lineno">1299</tt>  <tt class="py-line">             </tt>
<a name="L1300"></a><tt class="py-lineno">1300</tt>  <tt class="py-line">             </tt>
<a name="L1301"></a><tt class="py-lineno">1301</tt>  <tt class="py-line">    <tt class="py-comment">#elif sys.argv[1].lower()=='copy':</tt> </tt>
<a name="L1302"></a><tt class="py-lineno">1302</tt>  <tt class="py-line">        <tt class="py-comment">#while 1:</tt> </tt>
<a name="L1303"></a><tt class="py-lineno">1303</tt>  <tt class="py-line">            <tt class="py-comment">#source = '/STER/pieterd/IVSDATA/catalogs/hermes/HermesFullDataOverview.tsv'</tt> </tt>
<a name="L1304"></a><tt class="py-lineno">1304</tt>  <tt class="py-line">            <tt class="py-comment">#destination = '/STER/mercator/hermes/HermesFullDataOverview.tsv'</tt> </tt>
<a name="L1305"></a><tt class="py-lineno">1305</tt>  <tt class="py-line">            <tt class="py-comment">#if os.path.isfile(destination):</tt> </tt>
<a name="L1306"></a><tt class="py-lineno">1306</tt>  <tt class="py-line">                <tt class="py-comment">#original_size = os.path.getsize(destination)</tt> </tt>
<a name="L1307"></a><tt class="py-lineno">1307</tt>  <tt class="py-line">                <tt class="py-comment">#logger.info("Original file size: %.5f kB"%(original_size/1000.))</tt> </tt>
<a name="L1308"></a><tt class="py-lineno">1308</tt>  <tt class="py-line">            <tt class="py-comment">#else:</tt> </tt>
<a name="L1309"></a><tt class="py-lineno">1309</tt>  <tt class="py-line">                <tt class="py-comment">#logger.info('New file will be created')</tt> </tt>
<a name="L1310"></a><tt class="py-lineno">1310</tt>  <tt class="py-line">            <tt class="py-comment">#new_size = os.path.getsize(source)</tt> </tt>
<a name="L1311"></a><tt class="py-lineno">1311</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info("New file size: %.5f kB"%(new_size/1000.))</tt> </tt>
<a name="L1312"></a><tt class="py-lineno">1312</tt>  <tt class="py-line">            <tt class="py-comment">#shutil.copy(source,destination)</tt> </tt>
<a name="L1313"></a><tt class="py-lineno">1313</tt>  <tt class="py-line">            <tt class="py-comment">#logger.info('Copied %s to %s'%(source,destination))</tt> </tt>
<a name="L1314"></a><tt class="py-lineno">1314</tt>  <tt class="py-line">            <tt class="py-comment">#time.sleep(24*3600)</tt> </tt>
<a name="L1315"></a><tt class="py-lineno">1315</tt>  <tt class="py-line">             </tt>
<a name="L1316"></a><tt class="py-lineno">1316</tt>  <tt class="py-line">    <tt class="py-comment">#else:</tt> </tt>
<a name="L1317"></a><tt class="py-lineno">1317</tt>  <tt class="py-line">        <tt class="py-comment">#logger = loggers.get_basic_logger()</tt> </tt>
<a name="L1318"></a><tt class="py-lineno">1318</tt>  <tt class="py-line">        <tt class="py-comment">#for target in sys.argv[1:]:</tt> </tt>
<a name="L1319"></a><tt class="py-lineno">1319</tt>  <tt class="py-line">            <tt class="py-comment">#make_list_star(target)</tt> </tt>
<a name="L1320"></a><tt class="py-lineno">1320</tt>  <tt class="py-line"> </tt><script type="text/javascript">
<!--
expandto(location.href);
// -->
</script>
</pre>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="ivs-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Feb  1 05:27:12 2017
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
